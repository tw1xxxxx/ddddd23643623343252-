{"ast":null,"code":"var _jsxFileName = \"C:\\\\restaurant-website (2)\\\\restaurant-website\\\\Backend\\\\ClientApp\\\\src\\\\pages\\\\Admin.js\",\n  _s5 = $RefreshSig$();\nimport React, { useState, useEffect, useRef, useMemo, useCallback } from 'react';\nimport './Admin.css';\nimport { autoSaveReservations, autoSaveMenu, autoSavePhotos, loadTheme, loadMenu, loadReservations, loadCategories, loadPhotos, saveTheme, saveCategories } from '../utils/fileStorage';\nimport { defaultMenu } from '../data/defaultMenu';\n\n// Ð‘Ð°Ð·Ð¾Ð²Ñ‹Ðµ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸ Ð¿Ð¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst defaultCategories = [{\n  id: 1,\n  key: 'cold',\n  name: 'Ð¥Ð¾Ð»Ð¾Ð´Ð½Ñ‹Ðµ Ð·Ð°ÐºÑƒÑÐºÐ¸',\n  order: 1\n}, {\n  id: 2,\n  key: 'salads',\n  name: 'Ð¡Ð°Ð»Ð°Ñ‚Ñ‹',\n  order: 2\n}, {\n  id: 3,\n  key: 'hot',\n  name: 'Ð“Ð¾Ñ€ÑÑ‡Ð¸Ðµ Ð±Ð»ÑŽÐ´Ð°',\n  order: 3\n}, {\n  id: 4,\n  key: 'drinks',\n  name: 'ÐÐ°Ð¿Ð¸Ñ‚ÐºÐ¸',\n  order: 4\n}];\n\n// Ð‘Ð°Ð·Ð¾Ð²Ñ‹Ðµ Ñ‚ÐµÐ¼Ñ‹ Ð¿Ð¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ\nconst defaultThemes = {\n  elegant: {\n    id: 'elegant',\n    name: 'Ð­Ð»ÐµÐ³Ð°Ð½Ñ‚Ð½Ð°Ñ ÑÐ¸Ð½ÑÑ',\n    primaryColor: '#2C3E50',\n    primaryLight: '#34495E',\n    primaryDark: '#1C2833',\n    secondaryColor: '#3498DB',\n    secondaryLight: '#5DADE2',\n    secondaryDark: '#2980B9',\n    accentColor: '#E74C3C',\n    backgroundColor: '#ECF0F1',\n    textColor: '#2C3E50',\n    textLight: '#566573'\n  }\n};\nconst Admin = () => {\n  _s5();\n  var _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$(),\n    _s4 = $RefreshSig$();\n  // Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ Ð´Ð»Ñ Ð³ÐµÐ½ÐµÑ€Ð°Ñ†Ð¸Ð¸ ÑƒÐ½Ð¸ÐºÐ°Ð»ÑŒÐ½Ð¾Ð³Ð¾ ID\n  const generateUniqueId = existingItems => {\n    let newId;\n    let attempts = 0;\n    const maxAttempts = 100;\n    do {\n      // Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ timestamp + ÑÐ»ÑƒÑ‡Ð°Ð¹Ð½Ð¾Ðµ Ñ‡Ð¸ÑÐ»Ð¾ Ð´Ð»Ñ ÑƒÐ½Ð¸ÐºÐ°Ð»ÑŒÐ½Ð¾ÑÑ‚Ð¸\n      newId = Date.now() + Math.floor(Math.random() * 1000);\n      attempts++;\n\n      // ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼, Ñ‡Ñ‚Ð¾ Ñ‚Ð°ÐºÐ¾Ð³Ð¾ ID Ð½ÐµÑ‚ Ð² ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÑŽÑ‰Ð¸Ñ… ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð°Ñ…\n      const exists = existingItems.some(item => item.id === newId);\n      if (!exists) {\n        return newId;\n      }\n    } while (attempts < maxAttempts);\n\n    // Ð•ÑÐ»Ð¸ Ð½Ðµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ Ð½Ð°Ð¹Ñ‚Ð¸ ÑƒÐ½Ð¸ÐºÐ°Ð»ÑŒÐ½Ñ‹Ð¹ ID Ð·Ð° 100 Ð¿Ð¾Ð¿Ñ‹Ñ‚Ð¾Ðº, Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð¿Ñ€Ð¾ÑÑ‚Ð¾ timestamp\n    console.warn('âš ï¸ ÐÐµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ ÑÐ³ÐµÐ½ÐµÑ€Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ ÑƒÐ½Ð¸ÐºÐ°Ð»ÑŒÐ½Ñ‹Ð¹ ID Ð·Ð° 100 Ð¿Ð¾Ð¿Ñ‹Ñ‚Ð¾Ðº, Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ timestamp');\n    return Date.now();\n  };\n\n  // ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ Ð°Ð²Ñ‚Ð¾Ñ€Ð¸Ð·Ð°Ñ†Ð¸ÑŽ Ð¸Ð· localStorage Ð¿Ñ€Ð¸ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐµ\n  const [isAuthenticated, setIsAuthenticated] = useState(() => {\n    return localStorage.getItem('admin-authenticated') === 'true';\n  });\n  const [activeTab, setActiveTab] = useState('reservations');\n  const [reservations, setReservations] = useState([]);\n  const [menuItems, setMenuItems] = useState([]);\n  const [categories, setCategories] = useState([]);\n  const [themes, setThemes] = useState({});\n  const [currentTheme, setCurrentTheme] = useState('default');\n  const [photos, setPhotos] = useState([]);\n  const [editingItem, setEditingItem] = useState(null);\n  const [editingCategory, setEditingCategory] = useState(null);\n  const [editingTheme, setEditingTheme] = useState(null);\n  const [editingPhoto, setEditingPhoto] = useState(null);\n  const newPhotoKeyRef = useRef(`new-photo-${Date.now()}`); // Ð¡Ñ‚Ð°Ð±Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ key Ð´Ð»Ñ Ð½Ð¾Ð²Ð¾Ð¹ Ñ„Ð¾Ñ€Ð¼Ñ‹\n  const newPhotoObjectRef = useRef({}); // Ð¡Ñ‚Ð°Ð±Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ Ð¾Ð±ÑŠÐµÐºÑ‚ Ð´Ð»Ñ Ð½Ð¾Ð²Ð¾Ð¹ Ñ„Ð¾Ñ€Ð¼Ñ‹\n  // Ð“Ð»Ð¾Ð±Ð°Ð»ÑŒÐ½Ð¾Ðµ Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ðµ Ð´Ð»Ñ Ð·Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½Ð½Ñ‹Ñ… Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ð¹ (Ð²Ð½Ðµ ÐºÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚Ð°, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð½Ðµ Ñ‚ÐµÑ€ÑÑ‚ÑŒ Ð¿Ñ€Ð¸ Ð¿ÐµÑ€ÐµÑ€ÐµÐ½Ð´ÐµÑ€Ðµ)\n  const uploadedImagesStore = useRef(new Map()); // key -> base64 image\n  const newMenuItemKeyRef = useRef(`new-menu-item-${Date.now()}`); // Ð¡Ñ‚Ð°Ð±Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ key Ð´Ð»Ñ Ð½Ð¾Ð²Ð¾Ð¹ Ñ„Ð¾Ñ€Ð¼Ñ‹ Ð¼ÐµÐ½ÑŽ\n  // Ð“Ð»Ð¾Ð±Ð°Ð»ÑŒÐ½Ð¾Ðµ Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ðµ Ð´Ð»Ñ Ð·Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½Ð½Ñ‹Ñ… Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ð¹ Ð¼ÐµÐ½ÑŽ\n  const menuImagesStore = useRef(new Map()); // key -> base64 image\n  const [showNotification, setShowNotification] = useState(false);\n  const [notificationMessage, setNotificationMessage] = useState('');\n  const [notificationType, setNotificationType] = useState('success');\n\n  // Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ Ð´Ð»Ñ Ð¿ÐµÑ€ÐµÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ñ Ð²ÐºÐ»Ð°Ð´Ð¾Ðº Ñ Ð·Ð°ÐºÑ€Ñ‹Ñ‚Ð¸ÐµÐ¼ Ð²ÑÐµÑ… Ð¼Ð¾Ð´Ð°Ð»ÑŒÐ½Ñ‹Ñ… Ð¾ÐºÐ¾Ð½\n  const handleTabChange = tab => {\n    // Ð—Ð°ÐºÑ€Ñ‹Ð²Ð°ÐµÐ¼ Ð²ÑÐµ Ð¾Ñ‚ÐºÑ€Ñ‹Ñ‚Ñ‹Ðµ Ð¼Ð¾Ð´Ð°Ð»ÑŒÐ½Ñ‹Ðµ Ð¾ÐºÐ½Ð°\n    // ÐžÑ‡Ð¸Ñ‰Ð°ÐµÐ¼ Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ðµ Ð¿Ñ€Ð¸ Ð¿ÐµÑ€ÐµÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ð¸ Ð²ÐºÐ»Ð°Ð´Ð¾Ðº\n    if (editingItem) {\n      const formKey = (editingItem === null || editingItem === void 0 ? void 0 : editingItem.id) || newMenuItemKeyRef.current;\n      if (menuImagesStore.current.has(formKey)) {\n        menuImagesStore.current.delete(formKey);\n      }\n    }\n    setEditingItem(null);\n    setEditingCategory(null);\n    setEditingTheme(null);\n    if (editingPhoto) {\n      const formKey = (editingPhoto === null || editingPhoto === void 0 ? void 0 : editingPhoto.id) || newPhotoKeyRef.current;\n      if (uploadedImagesStore.current.has(formKey)) {\n        uploadedImagesStore.current.delete(formKey);\n      }\n    }\n    setEditingPhoto(null);\n    // ÐŸÐµÑ€ÐµÐºÐ»ÑŽÑ‡Ð°ÐµÐ¼ Ð²ÐºÐ»Ð°Ð´ÐºÑƒ\n    setActiveTab(tab);\n  };\n  useEffect(() => {\n    const loadCategoriesFromFile = async () => {\n      try {\n        const loadedCategories = await loadCategories();\n        if (Array.isArray(loadedCategories)) {\n          // ÐŸÑƒÑÑ‚Ð¾Ð¹ Ð¼Ð°ÑÑÐ¸Ð² - ÑÑ‚Ð¾ Ð²Ð°Ð»Ð¸Ð´Ð½Ð¾Ðµ ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ðµ (Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ ÑƒÐ´Ð°Ð»Ð¸Ð» Ð²ÑÐµ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸)\n          // ÐÐµ Ð¿Ð¾Ð´ÑÑ‚Ð°Ð²Ð»ÑÐµÐ¼ Ð´ÐµÑ„Ð¾Ð»Ñ‚Ð½Ñ‹Ðµ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸, ÐµÑÐ»Ð¸ Ð¼Ð°ÑÑÐ¸Ð² Ð¿Ñ€Ð¾ÑÑ‚Ð¾ Ð¿ÑƒÑÑ‚Ð¾Ð¹\n          const sorted = [...loadedCategories].sort((a, b) => a.order - b.order);\n          setCategories(sorted);\n          console.log(`ðŸ“¥ loadCategoriesFromFile: Ð—Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½Ð¾ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¹: ${sorted.length}`);\n        } else {\n          // Ð•ÑÐ»Ð¸ Ð·Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½Ð½Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð½Ðµ Ð¼Ð°ÑÑÐ¸Ð², Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð´ÐµÑ„Ð¾Ð»Ñ‚Ð½Ñ‹Ðµ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð¿Ñ€Ð¸ Ð¿ÐµÑ€Ð²Ð¾Ð¹ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐµ\n          // ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼, ÐµÑÑ‚ÑŒ Ð»Ð¸ ÑƒÐ¶Ðµ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð½Ñ‹Ðµ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸ Ð² localStorage\n          const stored = localStorage.getItem('restaurant-categories');\n          if (stored) {\n            try {\n              const parsed = JSON.parse(stored);\n              if (Array.isArray(parsed)) {\n                // Ð•ÑÐ»Ð¸ ÐµÑÑ‚ÑŒ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð½Ñ‹Ðµ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸, Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð¸Ñ… (Ð´Ð°Ð¶Ðµ ÐµÑÐ»Ð¸ Ð¿ÑƒÑÑ‚Ð¾Ð¹ Ð¼Ð°ÑÑÐ¸Ð²)\n                console.warn('âš ï¸ loadCategoriesFromFile: Ð”Ð°Ð½Ð½Ñ‹Ðµ Ð½Ðµ ÑÐ²Ð»ÑÑŽÑ‚ÑÑ Ð¼Ð°ÑÑÐ¸Ð²Ð¾Ð¼, Ð½Ð¾ ÐµÑÑ‚ÑŒ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð½Ñ‹Ðµ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸. Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð¿ÑƒÑÑ‚Ð¾Ð¹ Ð¼Ð°ÑÑÐ¸Ð².');\n                setCategories([]);\n              } else {\n                // Ð•ÑÐ»Ð¸ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð½Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð½Ðµ Ð¼Ð°ÑÑÐ¸Ð², Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð´ÐµÑ„Ð¾Ð»Ñ‚Ð½Ñ‹Ðµ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸\n                console.log('ðŸ“¥ loadCategoriesFromFile: Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð½Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð½Ðµ Ð¼Ð°ÑÑÐ¸Ð², Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð´ÐµÑ„Ð¾Ð»Ñ‚Ð½Ñ‹Ðµ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸');\n                setCategories([...defaultCategories]);\n              }\n            } catch (e) {\n              // Ð•ÑÐ»Ð¸ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð¿Ð¾Ð²Ñ€ÐµÐ¶Ð´ÐµÐ½Ñ‹, Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð´ÐµÑ„Ð¾Ð»Ñ‚Ð½Ñ‹Ðµ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸\n              console.log('ðŸ“¥ loadCategoriesFromFile: Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð½Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð¿Ð¾Ð²Ñ€ÐµÐ¶Ð´ÐµÐ½Ñ‹, Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð´ÐµÑ„Ð¾Ð»Ñ‚Ð½Ñ‹Ðµ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸');\n              setCategories([...defaultCategories]);\n            }\n          } else {\n            // Ð¢Ð¾Ð»ÑŒÐºÐ¾ ÐµÑÐ»Ð¸ Ð½ÐµÑ‚ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð½Ñ‹Ñ… ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¹ (Ð¿ÐµÑ€Ð²Ð°Ñ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ°), Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð´ÐµÑ„Ð¾Ð»Ñ‚Ð½Ñ‹Ðµ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸\n            console.log('ðŸ“¥ loadCategoriesFromFile: ÐŸÐµÑ€Ð²Ð°Ñ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ°, Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð´ÐµÑ„Ð¾Ð»Ñ‚Ð½Ñ‹Ðµ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸');\n            setCategories([...defaultCategories]);\n          }\n        }\n      } catch (error) {\n        console.error('ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¹:', error);\n        // ÐŸÑ€Ð¸ Ð¾ÑˆÐ¸Ð±ÐºÐµ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼, ÐµÑÑ‚ÑŒ Ð»Ð¸ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð½Ñ‹Ðµ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸\n        const stored = localStorage.getItem('restaurant-categories');\n        if (stored) {\n          try {\n            const parsed = JSON.parse(stored);\n            if (Array.isArray(parsed)) {\n              // Ð•ÑÐ»Ð¸ ÐµÑÑ‚ÑŒ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð½Ñ‹Ðµ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸, Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð¸Ñ… (Ð´Ð°Ð¶Ðµ ÐµÑÐ»Ð¸ Ð¿ÑƒÑÑ‚Ð¾Ð¹ Ð¼Ð°ÑÑÐ¸Ð²)\n              console.warn('âš ï¸ loadCategoriesFromFile: ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸, Ð½Ð¾ ÐµÑÑ‚ÑŒ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð½Ñ‹Ðµ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸. Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð¿ÑƒÑÑ‚Ð¾Ð¹ Ð¼Ð°ÑÑÐ¸Ð².');\n              setCategories([]);\n            } else {\n              console.log('ðŸ“¥ loadCategoriesFromFile: ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ð¸ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð½Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð½Ðµ Ð¼Ð°ÑÑÐ¸Ð², Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð´ÐµÑ„Ð¾Ð»Ñ‚Ð½Ñ‹Ðµ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸');\n              setCategories([...defaultCategories]);\n            }\n          } catch (e) {\n            console.log('ðŸ“¥ loadCategoriesFromFile: ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ð¸ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð½Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð¿Ð¾Ð²Ñ€ÐµÐ¶Ð´ÐµÐ½Ñ‹, Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð´ÐµÑ„Ð¾Ð»Ñ‚Ð½Ñ‹Ðµ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸');\n            setCategories([...defaultCategories]);\n          }\n        } else {\n          // Ð¢Ð¾Ð»ÑŒÐºÐ¾ ÐµÑÐ»Ð¸ Ð½ÐµÑ‚ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð½Ñ‹Ñ… ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¹, Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð´ÐµÑ„Ð¾Ð»Ñ‚Ð½Ñ‹Ðµ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸\n          console.log('ðŸ“¥ loadCategoriesFromFile: ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ð¸ Ð½ÐµÑ‚ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð½Ñ‹Ñ… ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¹, Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð´ÐµÑ„Ð¾Ð»Ñ‚Ð½Ñ‹Ðµ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸');\n          setCategories([...defaultCategories]);\n        }\n      }\n    };\n    const loadReservationsFromFile = async () => {\n      try {\n        const loadedReservations = await loadReservations();\n        setReservations(loadedReservations);\n      } catch (error) {\n        console.error('ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ð·Ð°ÑÐ²Ð¾Ðº:', error);\n        setReservations([]);\n      }\n    };\n    const loadMenuItemsFromFile = async () => {\n      try {\n        const loadedMenu = await loadMenu();\n        if (Array.isArray(loadedMenu)) {\n          // ÐŸÑƒÑÑ‚Ð¾Ð¹ Ð¼Ð°ÑÑÐ¸Ð² - ÑÑ‚Ð¾ Ð²Ð°Ð»Ð¸Ð´Ð½Ð¾Ðµ ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ðµ (Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ ÑƒÐ´Ð°Ð»Ð¸Ð» Ð²ÑÐµ Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ð¸)\n          // ÐÐµ Ð¿Ð¾Ð´ÑÑ‚Ð°Ð²Ð»ÑÐµÐ¼ Ð´ÐµÑ„Ð¾Ð»Ñ‚Ð½Ð¾Ðµ Ð¼ÐµÐ½ÑŽ, ÐµÑÐ»Ð¸ Ð¼Ð°ÑÑÐ¸Ð² Ð¿Ñ€Ð¾ÑÑ‚Ð¾ Ð¿ÑƒÑÑ‚Ð¾Ð¹\n          setMenuItems(loadedMenu);\n          console.log(`ðŸ“¥ loadMenuItemsFromFile: Ð—Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½Ð¾ Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ð¹: ${loadedMenu.length}`);\n        } else {\n          // Ð•ÑÐ»Ð¸ Ð·Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½Ð½Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð½Ðµ Ð¼Ð°ÑÑÐ¸Ð², Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ Ð¼ÐµÑ‚Ð°Ð´Ð°Ð½Ð½Ñ‹Ðµ\n          // ÐœÐµÑ‚Ð°Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð¼Ð¾Ð³ÑƒÑ‚ Ð±Ñ‹Ñ‚ÑŒ Ð¿ÑƒÑÑ‚Ñ‹Ð¼ Ð¼Ð°ÑÑÐ¸Ð²Ð¾Ð¼ \"[]\", Ñ‡Ñ‚Ð¾ Ñ‚Ð¾Ð¶Ðµ Ð²Ð°Ð»Ð¸Ð´Ð½Ð¾\n          const metadataStr = localStorage.getItem('restaurant-menu-metadata');\n          if (metadataStr) {\n            try {\n              const metadata = JSON.parse(metadataStr);\n              // Ð•ÑÐ»Ð¸ Ð¼ÐµÑ‚Ð°Ð´Ð°Ð½Ð½Ñ‹Ðµ ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÑŽÑ‚ (Ð´Ð°Ð¶Ðµ ÐµÑÐ»Ð¸ ÑÑ‚Ð¾ Ð¿ÑƒÑÑ‚Ð¾Ð¹ Ð¼Ð°ÑÑÐ¸Ð²), Ð·Ð½Ð°Ñ‡Ð¸Ñ‚ Ð¼ÐµÐ½ÑŽ Ð±Ñ‹Ð»Ð¾ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¾\n              // Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð¿ÑƒÑÑ‚Ð¾Ð¹ Ð¼Ð°ÑÑÐ¸Ð², Ð° Ð½Ðµ Ð´ÐµÑ„Ð¾Ð»Ñ‚Ð½Ð¾Ðµ Ð¼ÐµÐ½ÑŽ\n              console.warn('âš ï¸ loadMenuItemsFromFile: Ð”Ð°Ð½Ð½Ñ‹Ðµ Ð½Ðµ ÑÐ²Ð»ÑÑŽÑ‚ÑÑ Ð¼Ð°ÑÑÐ¸Ð²Ð¾Ð¼, Ð½Ð¾ ÐµÑÑ‚ÑŒ Ð¼ÐµÑ‚Ð°Ð´Ð°Ð½Ð½Ñ‹Ðµ. Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð¿ÑƒÑÑ‚Ð¾Ð¹ Ð¼Ð°ÑÑÐ¸Ð².');\n              setMenuItems([]);\n            } catch (e) {\n              // Ð•ÑÐ»Ð¸ Ð¼ÐµÑ‚Ð°Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð¿Ð¾Ð²Ñ€ÐµÐ¶Ð´ÐµÐ½Ñ‹, Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð´ÐµÑ„Ð¾Ð»Ñ‚Ð½Ð¾Ðµ Ð¼ÐµÐ½ÑŽ\n              console.log('ðŸ“¥ loadMenuItemsFromFile: ÐœÐµÑ‚Ð°Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð¿Ð¾Ð²Ñ€ÐµÐ¶Ð´ÐµÐ½Ñ‹, Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð´ÐµÑ„Ð¾Ð»Ñ‚Ð½Ð¾Ðµ Ð¼ÐµÐ½ÑŽ');\n              setMenuItems([...defaultMenu]);\n            }\n          } else {\n            // Ð¢Ð¾Ð»ÑŒÐºÐ¾ ÐµÑÐ»Ð¸ Ð½ÐµÑ‚ Ð¼ÐµÑ‚Ð°Ð´Ð°Ð½Ð½Ñ‹Ñ… (Ð¿ÐµÑ€Ð²Ð°Ñ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ°), Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð´ÐµÑ„Ð¾Ð»Ñ‚Ð½Ð¾Ðµ Ð¼ÐµÐ½ÑŽ\n            console.log('ðŸ“¥ loadMenuItemsFromFile: ÐŸÐµÑ€Ð²Ð°Ñ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ°, Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð´ÐµÑ„Ð¾Ð»Ñ‚Ð½Ð¾Ðµ Ð¼ÐµÐ½ÑŽ');\n            setMenuItems([...defaultMenu]);\n          }\n        }\n      } catch (error) {\n        console.error('ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ð¼ÐµÐ½ÑŽ:', error);\n        // ÐŸÑ€Ð¸ Ð¾ÑˆÐ¸Ð±ÐºÐµ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼, ÐµÑÑ‚ÑŒ Ð»Ð¸ Ð¼ÐµÑ‚Ð°Ð´Ð°Ð½Ð½Ñ‹Ðµ\n        const metadataStr = localStorage.getItem('restaurant-menu-metadata');\n        if (metadataStr) {\n          try {\n            const metadata = JSON.parse(metadataStr);\n            // Ð•ÑÐ»Ð¸ Ð¼ÐµÑ‚Ð°Ð´Ð°Ð½Ð½Ñ‹Ðµ ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÑŽÑ‚, Ð·Ð½Ð°Ñ‡Ð¸Ñ‚ Ð¼ÐµÐ½ÑŽ Ð±Ñ‹Ð»Ð¾ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¾, Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð¿ÑƒÑÑ‚Ð¾Ð¹ Ð¼Ð°ÑÑÐ¸Ð²\n            console.warn('âš ï¸ loadMenuItemsFromFile: ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸, Ð½Ð¾ ÐµÑÑ‚ÑŒ Ð¼ÐµÑ‚Ð°Ð´Ð°Ð½Ð½Ñ‹Ðµ. Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð¿ÑƒÑÑ‚Ð¾Ð¹ Ð¼Ð°ÑÑÐ¸Ð².');\n            setMenuItems([]);\n          } catch (e) {\n            // Ð•ÑÐ»Ð¸ Ð¼ÐµÑ‚Ð°Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð¿Ð¾Ð²Ñ€ÐµÐ¶Ð´ÐµÐ½Ñ‹, Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð´ÐµÑ„Ð¾Ð»Ñ‚Ð½Ð¾Ðµ Ð¼ÐµÐ½ÑŽ\n            console.log('ðŸ“¥ loadMenuItemsFromFile: ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ð¸ Ð¼ÐµÑ‚Ð°Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð¿Ð¾Ð²Ñ€ÐµÐ¶Ð´ÐµÐ½Ñ‹, Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð´ÐµÑ„Ð¾Ð»Ñ‚Ð½Ð¾Ðµ Ð¼ÐµÐ½ÑŽ');\n            setMenuItems([...defaultMenu]);\n          }\n        } else {\n          // Ð¢Ð¾Ð»ÑŒÐºÐ¾ ÐµÑÐ»Ð¸ Ð½ÐµÑ‚ Ð¼ÐµÑ‚Ð°Ð´Ð°Ð½Ð½Ñ‹Ñ…, Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð´ÐµÑ„Ð¾Ð»Ñ‚Ð½Ð¾Ðµ Ð¼ÐµÐ½ÑŽ\n          console.log('ðŸ“¥ loadMenuItemsFromFile: ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ð¸ Ð½ÐµÑ‚ Ð¼ÐµÑ‚Ð°Ð´Ð°Ð½Ð½Ñ‹Ñ…, Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð´ÐµÑ„Ð¾Ð»Ñ‚Ð½Ð¾Ðµ Ð¼ÐµÐ½ÑŽ');\n          setMenuItems([...defaultMenu]);\n        }\n      }\n    };\n    const loadThemesFromFile = async () => {\n      try {\n        const themeData = await loadTheme();\n        // ÐžÐ±ÑŠÐµÐ´Ð¸Ð½ÑÐµÐ¼ Ð±Ð°Ð·Ð¾Ð²Ñ‹Ðµ Ñ‚ÐµÐ¼Ñ‹ Ñ Ð·Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½Ð½Ñ‹Ð¼Ð¸\n        const allThemes = {\n          ...defaultThemes,\n          ...themeData.themes\n        };\n        setThemes(allThemes);\n\n        // Ð£ÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼ Ñ‚ÐµÐºÑƒÑ‰ÑƒÑŽ Ñ‚ÐµÐ¼Ñƒ\n        const currentThemeId = themeData.currentTheme || 'default';\n        setCurrentTheme(currentThemeId);\n        // ÐŸÑ€Ð¸Ð¼ÐµÐ½ÑÐµÐ¼ Ñ‚ÐµÐ¼Ñƒ Ð¿Ñ€Ð¸ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐµ Ñ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸ÐµÐ¼ Ð·Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½Ð½Ñ‹Ñ… Ñ‚ÐµÐ¼\n        applyThemeOnLoad(currentThemeId, allThemes);\n      } catch (error) {\n        console.error('ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ñ‚ÐµÐ¼:', error);\n        setThemes(defaultThemes);\n        setCurrentTheme('default');\n        applyThemeOnLoad('default', defaultThemes);\n      }\n    };\n    const applyThemeOnLoad = (themeId, themesToUse = null) => {\n      // Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð¿ÐµÑ€ÐµÐ´Ð°Ð½Ð½Ñ‹Ðµ Ñ‚ÐµÐ¼Ñ‹ Ð¸Ð»Ð¸ Ð·Ð°Ð³Ñ€ÑƒÐ¶Ð°ÐµÐ¼ Ð¸Ð· ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ñ\n      const allThemes = themesToUse || {\n        ...defaultThemes,\n        ...themes\n      };\n      if (themeId === 'default') {\n        document.documentElement.className = '';\n        const root = document.documentElement;\n        root.style.removeProperty('--primary-color');\n        root.style.removeProperty('--primary-light');\n        root.style.removeProperty('--primary-dark');\n        root.style.removeProperty('--secondary-color');\n        root.style.removeProperty('--secondary-light');\n        root.style.removeProperty('--secondary-dark');\n        root.style.removeProperty('--accent-color');\n        root.style.removeProperty('--background-color');\n        root.style.removeProperty('--text-color');\n        root.style.removeProperty('--text-light');\n        // Ð£ÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼ Ñ„Ð¾Ð½ html Ð² Ñ†Ð²ÐµÑ‚ Ð¿Ð¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ\n        document.documentElement.style.backgroundColor = '#8B7355';\n        return;\n      }\n\n      // ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ Ð±Ð°Ð·Ð¾Ð²Ñ‹Ðµ Ñ‚ÐµÐ¼Ñ‹\n      if (defaultThemes[themeId]) {\n        const theme = defaultThemes[themeId];\n        const root = document.documentElement;\n        root.style.setProperty('--primary-color', theme.primaryColor);\n        root.style.setProperty('--primary-light', theme.primaryLight);\n        root.style.setProperty('--primary-dark', theme.primaryDark);\n        root.style.setProperty('--secondary-color', theme.secondaryColor);\n        root.style.setProperty('--secondary-light', theme.secondaryLight);\n        root.style.setProperty('--secondary-dark', theme.secondaryDark);\n        root.style.setProperty('--accent-color', theme.accentColor);\n        root.style.setProperty('--background-color', theme.backgroundColor);\n        root.style.setProperty('--text-color', theme.textColor);\n        root.style.setProperty('--text-light', theme.textLight);\n        // Ð£ÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼ Ñ„Ð¾Ð½ html Ð´Ð»Ñ overscroll\n        document.documentElement.style.backgroundColor = theme.primaryColor;\n        return;\n      }\n\n      // ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒÑÐºÐ¸Ðµ Ñ‚ÐµÐ¼Ñ‹\n      const theme = allThemes[themeId];\n      if (theme) {\n        const root = document.documentElement;\n        root.style.setProperty('--primary-color', theme.primaryColor);\n        root.style.setProperty('--primary-light', theme.primaryLight);\n        root.style.setProperty('--primary-dark', theme.primaryDark);\n        root.style.setProperty('--secondary-color', theme.secondaryColor);\n        root.style.setProperty('--secondary-light', theme.secondaryLight);\n        root.style.setProperty('--secondary-dark', theme.secondaryDark);\n        root.style.setProperty('--accent-color', theme.accentColor);\n        root.style.setProperty('--background-color', theme.backgroundColor);\n        root.style.setProperty('--text-color', theme.textColor);\n        root.style.setProperty('--text-light', theme.textLight);\n        // Ð£ÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼ Ñ„Ð¾Ð½ html Ð´Ð»Ñ overscroll\n        document.documentElement.style.backgroundColor = theme.primaryColor;\n      }\n    };\n    const loadPhotosFromFile = async () => {\n      try {\n        const loadedPhotos = await loadPhotos();\n        if (Array.isArray(loadedPhotos) && loadedPhotos.length > 0) {\n          setPhotos(loadedPhotos);\n        } else {\n          setPhotos([]);\n        }\n      } catch (error) {\n        console.error('ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ð¹:', error);\n        setPhotos([]);\n      }\n    };\n    loadCategoriesFromFile();\n    loadReservationsFromFile();\n    loadMenuItemsFromFile();\n    loadThemesFromFile();\n    loadPhotosFromFile();\n  }, []);\n  const saveCategoriesToFile = async updatedCategories => {\n    // Ð¡Ð¾Ñ€Ñ‚Ð¸Ñ€ÑƒÐµÐ¼ Ð¿Ð¾ Ð¿Ð¾Ñ€ÑÐ´ÐºÑƒ Ð¿ÐµÑ€ÐµÐ´ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸ÐµÐ¼\n    const sorted = [...updatedCategories].sort((a, b) => a.order - b.order);\n    setCategories(sorted);\n    const saveResult = await saveCategories(sorted);\n    if (!saveResult.success) {\n      showAlert(`ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐºÐ°Ñ‡Ð¸Ð²Ð°Ð½Ð¸Ñ Ñ„Ð°Ð¹Ð»Ð° ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¹: ${saveResult.message}`, 'error');\n    } else {\n      showAlert('Ð¤Ð°Ð¹Ð» categories.json ÑÐºÐ°Ñ‡Ð°Ð½', 'success');\n    }\n  };\n  const addCategory = async () => {\n    const newCategory = {\n      id: Date.now(),\n      key: `category_${Date.now()}`,\n      name: 'ÐÐ¾Ð²Ð°Ñ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ñ',\n      order: categories.length + 1\n    };\n    const updated = [...categories, newCategory];\n    await saveCategoriesToFile(updated);\n    setEditingCategory(newCategory);\n    showAlert('ÐšÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ñ Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð°', 'success');\n  };\n  const updateCategory = async category => {\n    if (!category.name || !category.name.trim()) {\n      showAlert('Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ðµ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸', 'error');\n      return;\n    }\n    const updated = categories.map(cat => cat.id === category.id ? category : cat);\n    await saveCategoriesToFile(updated);\n    setEditingCategory(null);\n    showAlert('ÐšÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ñ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð°', 'success');\n  };\n  const deleteCategory = async id => {\n    // ÐÐ°Ñ…Ð¾Ð´Ð¸Ð¼ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸ÑŽ Ð´Ð»Ñ ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ñ (Ð´Ð»Ñ Ð»Ð¾Ð³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ)\n    const categoryToDelete = categories.find(cat => cat.id === id);\n    if (categoryToDelete) {\n      console.log('ðŸ—‘ï¸ deleteCategory: Ð£Ð´Ð°Ð»ÐµÐ½Ð¸Ðµ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸:', {\n        id: categoryToDelete.id,\n        name: categoryToDelete.name,\n        key: categoryToDelete.key\n      });\n    }\n\n    // ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼, Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ÑÑ Ð»Ð¸ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ñ Ð² Ð±Ð»ÑŽÐ´Ð°Ñ…\n    const category = categories.find(cat => cat.id === id);\n    if (category) {\n      const itemsInCategory = menuItems.filter(item => item.category === category.key);\n      if (itemsInCategory.length > 0) {\n        showAlert(`ÐÐµÐ»ÑŒÐ·Ñ ÑƒÐ´Ð°Ð»Ð¸Ñ‚ÑŒ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸ÑŽ: Ð² Ð½ÐµÐ¹ ÐµÑÑ‚ÑŒ ${itemsInCategory.length} Ð±Ð»ÑŽÐ´(Ð°)`, 'error');\n        return;\n      }\n    }\n\n    // Ð£Ð´Ð°Ð»ÑÐµÐ¼ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸ÑŽ Ð¸Ð· Ð¼Ð°ÑÑÐ¸Ð²Ð°\n    const updated = categories.filter(cat => cat.id !== id);\n    console.log(`ðŸ—‘ï¸ deleteCategory: ÐžÑÑ‚Ð°Ð»Ð¾ÑÑŒ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¹: ${updated.length}`);\n\n    // ÐžÐ±Ð½Ð¾Ð²Ð»ÑÐµÐ¼ Ð¿Ð¾Ñ€ÑÐ´Ð¾Ðº Ð¾ÑÑ‚Ð°Ð²ÑˆÐ¸Ñ…ÑÑ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¹\n    updated.forEach((cat, index) => {\n      cat.order = index + 1;\n    });\n\n    // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð½Ñ‹Ð¹ Ð¼Ð°ÑÑÐ¸Ð² (Ð´Ð°Ð¶Ðµ ÐµÑÐ»Ð¸ Ð¾Ð½ Ð¿ÑƒÑÑ‚Ð¾Ð¹)\n    await saveCategoriesToFile(updated);\n    if (updated.length === 0) {\n      console.log('âœ… deleteCategory: Ð’ÑÐµ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸ ÑƒÐ´Ð°Ð»ÐµÐ½Ñ‹, Ð¼Ð°ÑÑÐ¸Ð² Ð¿ÑƒÑÑ‚Ð¾Ð¹');\n    } else {\n      console.log('âœ… deleteCategory: ÐšÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ñ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ ÑƒÐ´Ð°Ð»ÐµÐ½Ð°');\n    }\n    showAlert('ÐšÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ñ ÑƒÐ´Ð°Ð»ÐµÐ½Ð°', 'success');\n  };\n  const moveCategory = async (id, direction) => {\n    const index = categories.findIndex(cat => cat.id === id);\n    if (index === -1) return;\n    const newIndex = direction === 'up' ? index - 1 : index + 1;\n    if (newIndex < 0 || newIndex >= categories.length) return;\n    const updated = [...categories];\n    [updated[index].order, updated[newIndex].order] = [updated[newIndex].order, updated[index].order];\n    await saveCategoriesToFile(updated);\n  };\n  const showAlert = useCallback((message, type = 'success') => {\n    setNotificationMessage(message);\n    setNotificationType(type);\n    setShowNotification(true);\n    setTimeout(() => setShowNotification(false), 4000);\n  }, []);\n\n  // Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ Ð°Ð²Ñ‚Ð¾Ñ€Ð¸Ð·Ð°Ñ†Ð¸Ð¸\n  const handleLogin = (username, password) => {\n    if (username === 'admin' && password === 'Tbil4dSokol') {\n      setIsAuthenticated(true);\n      localStorage.setItem('admin-authenticated', 'true');\n      showAlert('Ð”Ð¾Ð±Ñ€Ð¾ Ð¿Ð¾Ð¶Ð°Ð»Ð¾Ð²Ð°Ñ‚ÑŒ Ð² Ð°Ð´Ð¼Ð¸Ð½-Ð¿Ð°Ð½ÐµÐ»ÑŒ!', 'success');\n      return true;\n    } else {\n      showAlert('ÐÐµÐ²ÐµÑ€Ð½Ñ‹Ð¹ Ð»Ð¾Ð³Ð¸Ð½ Ð¸Ð»Ð¸ Ð¿Ð°Ñ€Ð¾Ð»ÑŒ', 'error');\n      return false;\n    }\n  };\n\n  // Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ Ð²Ñ‹Ñ…Ð¾Ð´Ð°\n  const handleLogout = () => {\n    setIsAuthenticated(false);\n    localStorage.removeItem('admin-authenticated');\n    showAlert('Ð’Ñ‹ Ð²Ñ‹ÑˆÐ»Ð¸ Ð¸Ð· Ð°Ð´Ð¼Ð¸Ð½-Ð¿Ð°Ð½ÐµÐ»Ð¸', 'success');\n  };\n\n  // Ð¤ÑƒÐ½ÐºÑ†Ð¸Ð¸ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ Ñ‚ÐµÐ¼Ð°Ð¼Ð¸\n  const applyTheme = async themeId => {\n    setCurrentTheme(themeId);\n    if (themeId === 'default') {\n      document.documentElement.className = '';\n      const root = document.documentElement;\n      root.style.removeProperty('--primary-color');\n      root.style.removeProperty('--primary-light');\n      root.style.removeProperty('--primary-dark');\n      root.style.removeProperty('--secondary-color');\n      root.style.removeProperty('--secondary-light');\n      root.style.removeProperty('--secondary-dark');\n      root.style.removeProperty('--accent-color');\n      root.style.removeProperty('--background-color');\n      root.style.removeProperty('--text-color');\n      root.style.removeProperty('--text-light');\n      // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ñ‚ÐµÐ¼Ñƒ Ð² Ñ„Ð°Ð¹Ð»\n      const saveResult = await saveTheme({\n        currentTheme: themeId,\n        themes: themes\n      });\n      if (saveResult.success) {\n        showAlert('Ð¢ÐµÐ¼Ð° \"ÐŸÐ¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ\" Ð¿Ñ€Ð¸Ð¼ÐµÐ½ÐµÐ½Ð°. Ð¤Ð°Ð¹Ð» theme.json ÑÐºÐ°Ñ‡Ð°Ð½.', 'success');\n      } else {\n        showAlert(`Ð¢ÐµÐ¼Ð° Ð¿Ñ€Ð¸Ð¼ÐµÐ½ÐµÐ½Ð°, Ð½Ð¾ Ñ„Ð°Ð¹Ð» Ð½Ðµ ÑÐºÐ°Ñ‡Ð°Ð½: ${saveResult.message}`, 'error');\n      }\n      return;\n    }\n\n    // ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ Ð±Ð°Ð·Ð¾Ð²Ñ‹Ðµ Ñ‚ÐµÐ¼Ñ‹\n    if (defaultThemes[themeId]) {\n      const theme = defaultThemes[themeId];\n      const root = document.documentElement;\n      root.style.setProperty('--primary-color', theme.primaryColor);\n      root.style.setProperty('--primary-light', theme.primaryLight);\n      root.style.setProperty('--primary-dark', theme.primaryDark);\n      root.style.setProperty('--secondary-color', theme.secondaryColor);\n      root.style.setProperty('--secondary-light', theme.secondaryLight);\n      root.style.setProperty('--secondary-dark', theme.secondaryDark);\n      root.style.setProperty('--accent-color', theme.accentColor);\n      root.style.setProperty('--background-color', theme.backgroundColor);\n      root.style.setProperty('--text-color', theme.textColor);\n      root.style.setProperty('--text-light', theme.textLight);\n      // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ñ‚ÐµÐ¼Ñƒ Ð² Ñ„Ð°Ð¹Ð»\n      const saveResult = await saveTheme({\n        currentTheme: themeId,\n        themes: themes\n      });\n      if (saveResult.success) {\n        showAlert(`Ð¢ÐµÐ¼Ð° \"${theme.name}\" Ð¿Ñ€Ð¸Ð¼ÐµÐ½ÐµÐ½Ð°. Ð¤Ð°Ð¹Ð» theme.json ÑÐºÐ°Ñ‡Ð°Ð½.`, 'success');\n      } else {\n        showAlert(`Ð¢ÐµÐ¼Ð° Ð¿Ñ€Ð¸Ð¼ÐµÐ½ÐµÐ½Ð°, Ð½Ð¾ Ñ„Ð°Ð¹Ð» Ð½Ðµ ÑÐºÐ°Ñ‡Ð°Ð½: ${saveResult.message}`, 'error');\n      }\n      return;\n    }\n\n    // ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒÑÐºÐ¸Ðµ Ñ‚ÐµÐ¼Ñ‹\n    const theme = themes[themeId];\n    if (theme) {\n      const root = document.documentElement;\n      root.style.setProperty('--primary-color', theme.primaryColor);\n      root.style.setProperty('--primary-light', theme.primaryLight);\n      root.style.setProperty('--primary-dark', theme.primaryDark);\n      root.style.setProperty('--secondary-color', theme.secondaryColor);\n      root.style.setProperty('--secondary-light', theme.secondaryLight);\n      root.style.setProperty('--secondary-dark', theme.secondaryDark);\n      root.style.setProperty('--accent-color', theme.accentColor);\n      root.style.setProperty('--background-color', theme.backgroundColor);\n      root.style.setProperty('--text-color', theme.textColor);\n      root.style.setProperty('--text-light', theme.textLight);\n      // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ñ‚ÐµÐ¼Ñƒ Ð² Ñ„Ð°Ð¹Ð»\n      const saveResult = await saveTheme({\n        currentTheme: themeId,\n        themes: themes\n      });\n      if (saveResult.success) {\n        showAlert(`Ð¢ÐµÐ¼Ð° \"${theme.name}\" Ð¿Ñ€Ð¸Ð¼ÐµÐ½ÐµÐ½Ð°. Ð¤Ð°Ð¹Ð» theme.json ÑÐºÐ°Ñ‡Ð°Ð½.`, 'success');\n      } else {\n        showAlert(`Ð¢ÐµÐ¼Ð° Ð¿Ñ€Ð¸Ð¼ÐµÐ½ÐµÐ½Ð°, Ð½Ð¾ Ñ„Ð°Ð¹Ð» Ð½Ðµ ÑÐºÐ°Ñ‡Ð°Ð½: ${saveResult.message}`, 'error');\n      }\n    }\n  };\n  const saveThemes = async updatedThemes => {\n    // ÐžÐ±ÑŠÐµÐ´Ð¸Ð½ÑÐµÐ¼ Ð±Ð°Ð·Ð¾Ð²Ñ‹Ðµ Ñ‚ÐµÐ¼Ñ‹ Ñ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒÑÐºÐ¸Ð¼Ð¸ Ð´Ð»Ñ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ\n    const allThemes = {\n      ...defaultThemes,\n      ...updatedThemes\n    };\n    setThemes(allThemes);\n    // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ð² Ñ„Ð°Ð¹Ð»\n    const saveResult = await saveTheme({\n      currentTheme: currentTheme,\n      themes: allThemes\n    });\n    if (!saveResult.success) {\n      showAlert(`ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐºÐ°Ñ‡Ð¸Ð²Ð°Ð½Ð¸Ñ Ñ„Ð°Ð¹Ð»Ð° Ñ‚ÐµÐ¼: ${saveResult.message}`, 'error');\n    } else {\n      showAlert('Ð¤Ð°Ð¹Ð» theme.json ÑÐºÐ°Ñ‡Ð°Ð½', 'success');\n    }\n  };\n\n  // Ð¤ÑƒÐ½ÐºÑ†Ð¸Ð¸ Ð´Ð»Ñ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ð³Ð¾ Ð²Ñ‹Ñ‡Ð¸ÑÐ»ÐµÐ½Ð¸Ñ ÑÐ²ÐµÑ‚Ð»Ð¾Ð³Ð¾ Ð¸ Ñ‚ÐµÐ¼Ð½Ð¾Ð³Ð¾ Ð²Ð°Ñ€Ð¸Ð°Ð½Ñ‚Ð¾Ð² Ñ†Ð²ÐµÑ‚Ð°\n  const hexToRgb = hex => {\n    const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n    return result ? {\n      r: parseInt(result[1], 16),\n      g: parseInt(result[2], 16),\n      b: parseInt(result[3], 16)\n    } : null;\n  };\n  const rgbToHex = (r, g, b) => {\n    return \"#\" + [r, g, b].map(x => {\n      const hex = x.toString(16);\n      return hex.length === 1 ? \"0\" + hex : hex;\n    }).join(\"\");\n  };\n  const lightenColor = (hex, percent = 20) => {\n    const rgb = hexToRgb(hex);\n    if (!rgb) return hex;\n    const r = Math.min(255, Math.round(rgb.r + (255 - rgb.r) * (percent / 100)));\n    const g = Math.min(255, Math.round(rgb.g + (255 - rgb.g) * (percent / 100)));\n    const b = Math.min(255, Math.round(rgb.b + (255 - rgb.b) * (percent / 100)));\n    return rgbToHex(r, g, b);\n  };\n  const darkenColor = (hex, percent = 20) => {\n    const rgb = hexToRgb(hex);\n    if (!rgb) return hex;\n    const r = Math.max(0, Math.round(rgb.r * (1 - percent / 100)));\n    const g = Math.max(0, Math.round(rgb.g * (1 - percent / 100)));\n    const b = Math.max(0, Math.round(rgb.b * (1 - percent / 100)));\n    return rgbToHex(r, g, b);\n  };\n  const addTheme = () => {\n    const basePrimaryColor = '#8B7355';\n    const newTheme = {\n      id: `theme_${Date.now()}`,\n      name: 'ÐÐ¾Ð²Ð°Ñ Ñ‚ÐµÐ¼Ð°',\n      primaryColor: basePrimaryColor,\n      primaryLight: lightenColor(basePrimaryColor, 20),\n      primaryDark: darkenColor(basePrimaryColor, 20),\n      secondaryColor: '#A8D8EA',\n      secondaryLight: '#C5E7F5',\n      secondaryDark: '#7BB8D4',\n      accentColor: '#D4B896',\n      backgroundColor: '#FDF6E3',\n      textColor: '#333333',\n      textLight: '#666666'\n    };\n    const updated = {\n      ...themes,\n      [newTheme.id]: newTheme\n    };\n    saveThemes(updated);\n    setEditingTheme(newTheme);\n    showAlert('Ð¢ÐµÐ¼Ð° Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð°', 'success');\n  };\n  const updateTheme = theme => {\n    if (!theme.name || !theme.name.trim()) {\n      showAlert('Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ðµ Ñ‚ÐµÐ¼Ñ‹', 'error');\n      return;\n    }\n    // ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ Ð²Ñ‹Ñ‡Ð¸ÑÐ»ÑÐµÐ¼ ÑÐ²ÐµÑ‚Ð»Ñ‹Ð¹ Ð¸ Ñ‚ÐµÐ¼Ð½Ñ‹Ð¹ Ð²Ð°Ñ€Ð¸Ð°Ð½Ñ‚Ñ‹ Ð¾ÑÐ½Ð¾Ð²Ð½Ð¾Ð³Ð¾ Ñ†Ð²ÐµÑ‚Ð°\n    const updatedTheme = {\n      ...theme,\n      primaryLight: lightenColor(theme.primaryColor, 20),\n      primaryDark: darkenColor(theme.primaryColor, 20)\n    };\n    const updated = {\n      ...themes,\n      [updatedTheme.id]: updatedTheme\n    };\n    saveThemes(updated);\n    setEditingTheme(null);\n    showAlert('Ð¢ÐµÐ¼Ð° Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð°', 'success');\n  };\n  const deleteTheme = id => {\n    if (defaultThemes[id]) {\n      showAlert('Ð‘Ð°Ð·Ð¾Ð²Ñ‹Ðµ Ñ‚ÐµÐ¼Ñ‹ Ð½ÐµÐ»ÑŒÐ·Ñ ÑƒÐ´Ð°Ð»ÑÑ‚ÑŒ', 'error');\n      return;\n    }\n    const updated = {\n      ...themes\n    };\n    delete updated[id];\n    saveThemes(updated);\n    if (currentTheme === id) {\n      applyTheme('default');\n    }\n    showAlert('Ð¢ÐµÐ¼Ð° ÑƒÐ´Ð°Ð»ÐµÐ½Ð°', 'success');\n  };\n  const deleteReservation = async id => {\n    const updated = reservations.filter(res => res.id !== id);\n    setReservations(updated);\n    const saveResult = await autoSaveReservations(updated);\n    if (saveResult.success) {\n      showAlert('Ð—Ð°ÑÐ²ÐºÐ° ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ ÑƒÐ´Ð°Ð»ÐµÐ½Ð°', 'success');\n    } else {\n      showAlert(`Ð—Ð°ÑÐ²ÐºÐ° ÑƒÐ´Ð°Ð»ÐµÐ½Ð°, Ð½Ð¾ Ñ„Ð°Ð¹Ð» Ð½Ðµ ÑÐºÐ°Ñ‡Ð°Ð½: ${saveResult.message}`, 'error');\n    }\n  };\n  const deleteMenuItem = async id => {\n    // ÐÐ°Ñ…Ð¾Ð´Ð¸Ð¼ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚ Ð´Ð»Ñ ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ñ (Ð´Ð»Ñ Ð»Ð¾Ð³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ)\n    const itemToDelete = menuItems.find(item => item.id === id);\n    if (itemToDelete) {\n      const hasImage = itemToDelete.image && itemToDelete.image.startsWith('data:image');\n      console.log('ðŸ—‘ï¸ deleteMenuItem: Ð£Ð´Ð°Ð»ÐµÐ½Ð¸Ðµ Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ð¸ Ð¼ÐµÐ½ÑŽ:', {\n        id: itemToDelete.id,\n        name: itemToDelete.name,\n        hasImage: hasImage,\n        imageSize: hasImage ? itemToDelete.image.length : 0\n      });\n    }\n\n    // Ð£Ð´Ð°Ð»ÑÐµÐ¼ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚ Ð¸Ð· Ð¼ÐµÐ½ÑŽ (Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ ÑƒÐ´Ð°Ð»ÑÐµÑ‚ÑÑ Ð²Ð¼ÐµÑÑ‚Ðµ Ñ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð¾Ð¼, Ñ‚Ð°Ðº ÐºÐ°Ðº Ð¾Ð½Ð¾ Ñ‡Ð°ÑÑ‚ÑŒ JSON)\n    const updated = menuItems.filter(item => item.id !== id);\n    setMenuItems(updated);\n\n    // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ð²ÑÐµ Ð¾ÑÑ‚Ð°Ð²ÑˆÐ¸ÐµÑÑ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ñ‹ Ð² Ñ„Ð°Ð¹Ð»\n    // ÐŸÑ€Ð¸ ÑÑ‚Ð¾Ð¼ ÑÑ‚Ð°Ñ€Ð¾Ðµ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ (base64) Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ ÑƒÐ´Ð°Ð»ÑÐµÑ‚ÑÑ, Ñ‚Ð°Ðº ÐºÐ°Ðº ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚ ÑƒÐ´Ð°Ð»ÐµÐ½ Ð¸Ð· Ð¼Ð°ÑÑÐ¸Ð²Ð°\n    const saveResult = await autoSaveMenu(updated);\n    if (saveResult.success) {\n      console.log('âœ… deleteMenuItem: ÐŸÐ¾Ð·Ð¸Ñ†Ð¸Ñ Ð¼ÐµÐ½ÑŽ Ð¸ ÐµÑ‘ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ ÑƒÐ´Ð°Ð»ÐµÐ½Ñ‹');\n      showAlert('Ð‘Ð»ÑŽÐ´Ð¾ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ ÑƒÐ´Ð°Ð»ÐµÐ½Ð¾', 'success');\n    } else {\n      console.error('âŒ deleteMenuItem: ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ Ð¿Ð¾ÑÐ»Ðµ ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ñ:', saveResult.message);\n      showAlert(`Ð‘Ð»ÑŽÐ´Ð¾ ÑƒÐ´Ð°Ð»ÐµÐ½Ð¾, Ð½Ð¾ Ñ„Ð°Ð¹Ð» Ð½Ðµ ÑÐºÐ°Ñ‡Ð°Ð½: ${saveResult.message}`, 'error');\n    }\n  };\n  const cancelPhotoEditing = useCallback(() => {\n    // ÐžÑ‡Ð¸Ñ‰Ð°ÐµÐ¼ Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ðµ Ð´Ð»Ñ Ð½Ð¾Ð²Ð¾Ð¹ Ñ„Ð¾Ñ€Ð¼Ñ‹ Ð¿Ñ€Ð¸ Ð¾Ñ‚Ð¼ÐµÐ½Ðµ\n    const formKey = (editingPhoto === null || editingPhoto === void 0 ? void 0 : editingPhoto.id) || newPhotoKeyRef.current;\n    if (uploadedImagesStore.current.has(formKey)) {\n      uploadedImagesStore.current.delete(formKey);\n    }\n    setEditingPhoto(null);\n  }, [editingPhoto]);\n  const savePhoto = useCallback(async photo => {\n    try {\n      // Ð’Ð°Ð»Ð¸Ð´Ð°Ñ†Ð¸Ñ: Ð½Ðµ ÑÐ¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ð¸ Ð±ÐµÐ· Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ\n      if (!photo.image || !photo.image.trim()) {\n        showAlert('Ð—Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚Ðµ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ', 'error');\n        return;\n      }\n\n      // Ð’Ð°Ð»Ð¸Ð´Ð°Ñ†Ð¸Ñ: Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ Ð´Ð¾Ð»Ð¶Ð½Ð¾ Ð±Ñ‹Ñ‚ÑŒ base64\n      if (!photo.image.startsWith('data:image')) {\n        showAlert('Ð—Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚Ðµ Ñ„Ð°Ð¹Ð» Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ', 'error');\n        return;\n      }\n\n      // Ð’Ð°Ð»Ð¸Ð´Ð°Ñ†Ð¸Ñ: Ð½Ðµ ÑÐ¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ð¿ÑƒÑÑ‚Ñ‹Ðµ Ð¾Ð±ÑŠÐµÐºÑ‚Ñ‹ Ð¸Ð»Ð¸ Ð¾Ð±ÑŠÐµÐºÑ‚Ñ‹ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ñ Ñ‚ÐµÐºÑÑ‚Ð¾Ð¼ (Ð±ÐµÐ· Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ)\n      // Ð­Ñ‚Ð¾ ÑƒÐ¶Ðµ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐµÐ½Ð¾ Ð²Ñ‹ÑˆÐµ, Ð½Ð¾ Ð´Ð»Ñ Ð½Ð°Ð´ÐµÐ¶Ð½Ð¾ÑÑ‚Ð¸ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ ÐµÑ‰Ðµ Ñ€Ð°Ð·\n      const hasValidImage = photo.image && photo.image.trim() && photo.image.startsWith('data:image');\n      if (!hasValidImage) {\n        showAlert('Ð¤Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ñ Ð´Ð¾Ð»Ð¶Ð½Ð° ÑÐ¾Ð´ÐµÑ€Ð¶Ð°Ñ‚ÑŒ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ', 'error');\n        return;\n      }\n      let updated;\n      if (photo.id) {\n        // Ð ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÑŽÑ‰ÐµÐ¹ Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ð¸\n        const oldPhoto = photos.find(p => p.id === photo.id);\n        const imageChanged = (oldPhoto === null || oldPhoto === void 0 ? void 0 : oldPhoto.image) !== photo.image;\n        console.log('ðŸ’¾ savePhoto: Ð ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÑŽÑ‰ÐµÐ¹ Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ð¸:', {\n          id: photo.id,\n          caption: photo.caption,\n          oldImageSize: oldPhoto !== null && oldPhoto !== void 0 && oldPhoto.image ? oldPhoto.image.length : 0,\n          newImageSize: photo.image ? photo.image.length : 0,\n          imageChanged: imageChanged\n        });\n\n        // Ð—Ð°Ð¼ÐµÐ½ÑÐµÐ¼ ÑÑ‚Ð°Ñ€ÑƒÑŽ Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸ÑŽ Ð½Ð¾Ð²Ð¾Ð¹ (ÑÑ‚Ð°Ñ€Ð¾Ðµ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ ÑƒÐ´Ð°Ð»ÑÐµÑ‚ÑÑ Ð²Ð¼ÐµÑÑ‚Ðµ ÑÐ¾ ÑÑ‚Ð°Ñ€Ñ‹Ð¼ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð¾Ð¼)\n        updated = photos.map(p => p.id === photo.id ? photo : p);\n        if (imageChanged) {\n          console.log('ðŸ”„ savePhoto: Ð˜Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ Ð·Ð°Ð¼ÐµÐ½ÐµÐ½Ð¾, ÑÑ‚Ð°Ñ€Ð¾Ðµ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ Ð±ÑƒÐ´ÐµÑ‚ ÑƒÐ´Ð°Ð»ÐµÐ½Ð¾ Ð¿Ñ€Ð¸ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ð¸');\n        }\n      } else {\n        // Ð”Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð½Ð¾Ð²Ð¾Ð¹ Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ð¸\n        // Ð“ÐµÐ½ÐµÑ€Ð¸Ñ€ÑƒÐµÐ¼ ÑƒÐ½Ð¸ÐºÐ°Ð»ÑŒÐ½Ñ‹Ð¹ ID, Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑÑ ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÑŽÑ‰Ð¸Ðµ Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ð¸\n        const newId = generateUniqueId(photos);\n        const newPhoto = {\n          ...photo,\n          id: newId\n        };\n        updated = [...photos, newPhoto];\n      }\n\n      // Ð¤Ð¸Ð»ÑŒÑ‚Ñ€ÑƒÐµÐ¼ Ð¿ÑƒÑÑ‚Ñ‹Ðµ Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ð¸ Ð¿ÐµÑ€ÐµÐ´ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸ÐµÐ¼\n      const validPhotos = updated.filter(p => {\n        return p && p.image && p.image.trim() && p.image.startsWith('data:image');\n      });\n      setPhotos(validPhotos);\n\n      // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ð½Ð° ÑÐµÑ€Ð²ÐµÑ€\n      const saveResult = await autoSavePhotos(validPhotos);\n      if (!saveResult.success) {\n        // Ð•ÑÐ»Ð¸ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ Ð½Ð° ÑÐµÑ€Ð²ÐµÑ€ Ð½Ðµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ, Ð¿Ð¾ÐºÐ°Ð·Ñ‹Ð²Ð°ÐµÐ¼ Ð¾ÑˆÐ¸Ð±ÐºÑƒ Ð¸ ÐÐ• Ð·Ð°ÐºÑ€Ñ‹Ð²Ð°ÐµÐ¼ Ð¼Ð¾Ð´Ð°Ð»ÑŒÐ½Ð¾Ðµ Ð¾ÐºÐ½Ð¾\n        showAlert(`ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ Ð½Ð° ÑÐµÑ€Ð²ÐµÑ€: ${saveResult.message}`, 'error');\n        console.error('ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ð¸:', saveResult);\n        return; // ÐÐµ Ð·Ð°ÐºÑ€Ñ‹Ð²Ð°ÐµÐ¼ Ð¼Ð¾Ð´Ð°Ð»ÑŒÐ½Ð¾Ðµ Ð¾ÐºÐ½Ð¾, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ Ð¼Ð¾Ð³ Ð¿Ð¾Ð¿Ñ€Ð¾Ð±Ð¾Ð²Ð°Ñ‚ÑŒ ÑÐ½Ð¾Ð²Ð°\n      }\n\n      // ÐžÑ‡Ð¸Ñ‰Ð°ÐµÐ¼ Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ðµ Ð´Ð»Ñ ÑÑ‚Ð¾Ð¹ Ñ„Ð¾Ñ€Ð¼Ñ‹ Ð¿Ð¾ÑÐ»Ðµ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾Ð³Ð¾ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ\n      const formKey = photo.id || newPhotoKeyRef.current;\n      if (uploadedImagesStore.current.has(formKey)) {\n        uploadedImagesStore.current.delete(formKey);\n      }\n      setEditingPhoto(null);\n      showAlert(photo.id ? 'Ð¤Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ñ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð°' : 'Ð¤Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ñ Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð°', 'success');\n    } catch (error) {\n      console.error('ÐÐµÐ¾Ð¶Ð¸Ð´Ð°Ð½Ð½Ð°Ñ Ð¾ÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¸ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ð¸ Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ð¸:', error);\n      showAlert(`ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¸ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ð¸ Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ð¸: ${error.message}`, 'error');\n    }\n  }, [photos]);\n  const deletePhoto = async id => {\n    // ÐÐ°Ñ…Ð¾Ð´Ð¸Ð¼ Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸ÑŽ Ð´Ð»Ñ ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ñ (Ð´Ð»Ñ Ð»Ð¾Ð³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ)\n    const photoToDelete = photos.find(p => p.id === id);\n    if (photoToDelete) {\n      const hasImage = photoToDelete.image && photoToDelete.image.startsWith('data:image');\n      console.log('ðŸ—‘ï¸ deletePhoto: Ð£Ð´Ð°Ð»ÐµÐ½Ð¸Ðµ Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ð¸:', {\n        id: photoToDelete.id,\n        caption: photoToDelete.caption,\n        hasImage: hasImage,\n        imageSize: hasImage ? photoToDelete.image.length : 0\n      });\n    }\n\n    // Ð£Ð´Ð°Ð»ÑÐµÐ¼ Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸ÑŽ Ð¸Ð· Ð¼Ð°ÑÑÐ¸Ð²Ð° (Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ ÑƒÐ´Ð°Ð»ÑÐµÑ‚ÑÑ Ð²Ð¼ÐµÑÑ‚Ðµ Ñ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð¾Ð¼, Ñ‚Ð°Ðº ÐºÐ°Ðº Ð¾Ð½Ð¾ Ñ‡Ð°ÑÑ‚ÑŒ JSON)\n    const updated = photos.filter(p => p.id !== id);\n    setPhotos(updated);\n\n    // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ð²ÑÐµ Ð¾ÑÑ‚Ð°Ð²ÑˆÐ¸ÐµÑÑ Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ð¸ Ð² Ñ„Ð°Ð¹Ð»\n    // ÐŸÑ€Ð¸ ÑÑ‚Ð¾Ð¼ ÑÑ‚Ð°Ñ€Ð¾Ðµ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ (base64) Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ ÑƒÐ´Ð°Ð»ÑÐµÑ‚ÑÑ, Ñ‚Ð°Ðº ÐºÐ°Ðº ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚ ÑƒÐ´Ð°Ð»ÐµÐ½ Ð¸Ð· Ð¼Ð°ÑÑÐ¸Ð²Ð°\n    const saveResult = await autoSavePhotos(updated);\n    if (saveResult.success) {\n      console.log('âœ… deletePhoto: Ð¤Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ñ Ð¸ ÐµÑ‘ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ ÑƒÐ´Ð°Ð»ÐµÐ½Ñ‹');\n      showAlert('Ð¤Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ñ ÑƒÐ´Ð°Ð»ÐµÐ½Ð°', 'success');\n    } else {\n      showAlert(`Ð¤Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ñ ÑƒÐ´Ð°Ð»ÐµÐ½Ð°, Ð½Ð¾ Ñ„Ð°Ð¹Ð» Ð½Ðµ ÑÐºÐ°Ñ‡Ð°Ð½: ${saveResult.message}`, 'error');\n    }\n  };\n  const validateMenuItem = item => {\n    if (!item.name || !item.name.trim()) {\n      showAlert('Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ðµ Ð±Ð»ÑŽÐ´Ð°', 'error');\n      return false;\n    }\n    if (!item.price || isNaN(parseFloat(item.price)) || parseFloat(item.price) <= 0) {\n      showAlert('Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½ÑƒÑŽ Ñ†ÐµÐ½Ñƒ (Ð±Ð¾Ð»ÑŒÑˆÐµ 0)', 'error');\n      return false;\n    }\n    if (!item.weight || !item.weight.trim()) {\n      showAlert('Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð²ÐµÑ/Ð¾Ð±ÑŠÐµÐ¼', 'error');\n      return false;\n    }\n    if (!item.description || !item.description.trim()) {\n      showAlert('Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð¾Ð¿Ð¸ÑÐ°Ð½Ð¸Ðµ Ð±Ð»ÑŽÐ´Ð°', 'error');\n      return false;\n    }\n    if (!item.image || !item.image.trim()) {\n      showAlert('Ð—Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚Ðµ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ', 'error');\n      return false;\n    }\n    if (!item.image.startsWith('data:image')) {\n      showAlert('Ð—Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚Ðµ Ñ„Ð°Ð¹Ð» Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ', 'error');\n      return false;\n    }\n    return true;\n  };\n  const saveMenuItem = async item => {\n    if (!validateMenuItem(item)) return;\n    console.log('ðŸ’¾ saveMenuItem: ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½Ñ‹ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð´Ð»Ñ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ:', {\n      id: item.id,\n      name: item.name,\n      hasImage: !!item.image,\n      imageLength: item.image ? item.image.length : 0,\n      imageStart: item.image ? item.image.substring(0, 50) : 'Ð½ÐµÑ‚'\n    });\n\n    // Ð¤Ð¾Ñ€Ð¼Ð°Ñ‚Ð¸Ñ€ÑƒÐµÐ¼ Ñ†ÐµÐ½Ñƒ (ÑƒÐ±Ð¸Ñ€Ð°ÐµÐ¼ \"â‚½\" ÐµÑÐ»Ð¸ ÐµÑÑ‚ÑŒ Ð¸ Ð¿Ñ€ÐµÐ¾Ð±Ñ€Ð°Ð·ÑƒÐµÐ¼ Ð² Ñ‡Ð¸ÑÐ»Ð¾)\n    const formattedItem = {\n      ...item,\n      price: item.price.toString().replace(' â‚½', '')\n    };\n\n    // Ð’ÐÐ–ÐÐž: ÑƒÐ±ÐµÐ¶Ð´Ð°ÐµÐ¼ÑÑ, Ñ‡Ñ‚Ð¾ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ Ð¿ÐµÑ€ÐµÐ´Ð°ÐµÑ‚ÑÑ Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¾\n    if (item.image) {\n      formattedItem.image = item.image;\n    }\n    console.log('ðŸ’¾ saveMenuItem: ÐžÑ‚Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ:', {\n      id: formattedItem.id,\n      name: formattedItem.name,\n      hasImage: !!formattedItem.image,\n      imageLength: formattedItem.image ? formattedItem.image.length : 0,\n      imageStart: formattedItem.image ? formattedItem.image.substring(0, 50) : 'Ð½ÐµÑ‚'\n    });\n    let updatedItems;\n    if (editingItem && editingItem.id) {\n      // Ð ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÑŽÑ‰ÐµÐ³Ð¾ Ð±Ð»ÑŽÐ´Ð° (Ð»ÑŽÐ±Ð¾Ð³Ð¾, Ð²ÐºÐ»ÑŽÑ‡Ð°Ñ Ð±Ð°Ð·Ð¾Ð²Ñ‹Ðµ)\n      const oldItem = menuItems.find(mi => mi.id === editingItem.id);\n      const imageChanged = (oldItem === null || oldItem === void 0 ? void 0 : oldItem.image) !== formattedItem.image;\n      console.log('ðŸ’¾ saveMenuItem: Ð ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÑŽÑ‰ÐµÐ³Ð¾ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð°:', {\n        id: editingItem.id,\n        name: formattedItem.name,\n        oldImageSize: oldItem !== null && oldItem !== void 0 && oldItem.image ? oldItem.image.length : 0,\n        newImageSize: formattedItem.image ? formattedItem.image.length : 0,\n        imageChanged: imageChanged\n      });\n\n      // Ð—Ð°Ð¼ÐµÐ½ÑÐµÐ¼ ÑÑ‚Ð°Ñ€Ñ‹Ð¹ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚ Ð½Ð¾Ð²Ñ‹Ð¼ (ÑÑ‚Ð°Ñ€Ð¾Ðµ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ ÑƒÐ´Ð°Ð»ÑÐµÑ‚ÑÑ Ð²Ð¼ÐµÑÑ‚Ðµ ÑÐ¾ ÑÑ‚Ð°Ñ€Ñ‹Ð¼ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð¾Ð¼)\n      updatedItems = menuItems.map(menuItem => menuItem.id === editingItem.id ? {\n        ...formattedItem,\n        id: editingItem.id\n      } : menuItem);\n      if (imageChanged) {\n        console.log('ðŸ”„ saveMenuItem: Ð˜Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ Ð·Ð°Ð¼ÐµÐ½ÐµÐ½Ð¾, ÑÑ‚Ð°Ñ€Ð¾Ðµ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ Ð±ÑƒÐ´ÐµÑ‚ ÑƒÐ´Ð°Ð»ÐµÐ½Ð¾ Ð¿Ñ€Ð¸ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ð¸');\n      }\n      showAlert('Ð‘Ð»ÑŽÐ´Ð¾ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¾', 'success');\n    } else {\n      // Ð”Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð½Ð¾Ð²Ð¾Ð³Ð¾ Ð±Ð»ÑŽÐ´Ð°\n      // Ð“ÐµÐ½ÐµÑ€Ð¸Ñ€ÑƒÐµÐ¼ ÑƒÐ½Ð¸ÐºÐ°Ð»ÑŒÐ½Ñ‹Ð¹ ID, Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑÑ ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÑŽÑ‰Ð¸Ðµ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ñ‹\n      const newId = generateUniqueId(menuItems);\n      const newItem = {\n        ...formattedItem,\n        id: newId\n      };\n      updatedItems = [...menuItems, newItem];\n      showAlert('Ð‘Ð»ÑŽÐ´Ð¾ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¾', 'success');\n    }\n    setMenuItems(updatedItems);\n\n    // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ð²ÑÐµ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ñ‹ Ð² Ñ„Ð°Ð¹Ð» (Ð²ÐºÐ»ÑŽÑ‡Ð°Ñ Ð¾Ñ‚Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ðµ Ð±Ð°Ð·Ð¾Ð²Ñ‹Ðµ)\n    const saveResult = await autoSaveMenu(updatedItems);\n    if (!saveResult.success) {\n      showAlert(`ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐºÐ°Ñ‡Ð¸Ð²Ð°Ð½Ð¸Ñ Ñ„Ð°Ð¹Ð»Ð° Ð¼ÐµÐ½ÑŽ: ${saveResult.message}`, 'error');\n    } else {\n      showAlert('Ð¤Ð°Ð¹Ð» menu.json ÑÐºÐ°Ñ‡Ð°Ð½', 'success');\n    }\n\n    // ÐžÑ‡Ð¸Ñ‰Ð°ÐµÐ¼ Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ðµ Ð´Ð»Ñ ÑÑ‚Ð¾Ð¹ Ñ„Ð¾Ñ€Ð¼Ñ‹ Ð¿Ð¾ÑÐ»Ðµ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ\n    const formKey = (editingItem === null || editingItem === void 0 ? void 0 : editingItem.id) || newMenuItemKeyRef.current;\n    if (menuImagesStore.current.has(formKey)) {\n      menuImagesStore.current.delete(formKey);\n    }\n    setEditingItem(null);\n  };\n  const startEditing = item => {\n    setEditingItem(item);\n  };\n  const cancelEditing = useCallback(() => {\n    // ÐžÑ‡Ð¸Ñ‰Ð°ÐµÐ¼ Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ðµ Ð´Ð»Ñ Ð½Ð¾Ð²Ð¾Ð¹ Ñ„Ð¾Ñ€Ð¼Ñ‹ Ð¿Ñ€Ð¸ Ð¾Ñ‚Ð¼ÐµÐ½Ðµ\n    const formKey = (editingItem === null || editingItem === void 0 ? void 0 : editingItem.id) || newMenuItemKeyRef.current;\n    if (menuImagesStore.current.has(formKey)) {\n      menuImagesStore.current.delete(formKey);\n    }\n    // ÐžÑ‡Ð¸Ñ‰Ð°ÐµÐ¼ localStorage Ñ Ð´Ð°Ð½Ð½Ñ‹Ð¼Ð¸ Ñ„Ð¾Ñ€Ð¼Ñ‹ Ð¿Ñ€Ð¸ Ð¾Ñ‚Ð¼ÐµÐ½Ðµ (Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð´Ð»Ñ Ð½Ð¾Ð²Ñ‹Ñ… ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð¾Ð²)\n    if (!(editingItem !== null && editingItem !== void 0 && editingItem.id)) {\n      try {\n        const formDataStorageKey = `menu-item-form-${formKey}`;\n        localStorage.removeItem(formDataStorageKey);\n        console.log('ðŸ—‘ï¸ cancelEditing: Ð”Ð°Ð½Ð½Ñ‹Ðµ Ñ„Ð¾Ñ€Ð¼Ñ‹ ÑƒÐ´Ð°Ð»ÐµÐ½Ñ‹ Ð¸Ð· localStorage Ð¿Ñ€Ð¸ Ð¾Ñ‚Ð¼ÐµÐ½Ðµ');\n      } catch (e) {\n        console.error('ÐžÑˆÐ¸Ð±ÐºÐ° ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ñ Ð´Ð°Ð½Ð½Ñ‹Ñ… Ñ„Ð¾Ñ€Ð¼Ñ‹ Ð¸Ð· localStorage:', e);\n      }\n    }\n    setEditingItem(null);\n  }, [editingItem]);\n\n  // ÐšÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚ Ñ„Ð¾Ñ€Ð¼Ñ‹ Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ Ñ‚ÐµÐ¼Ñ‹\n  const ThemeEditForm = ({\n    theme,\n    onSave,\n    onCancel\n  }) => {\n    _s();\n    const [formData, setFormData] = useState(theme);\n\n    // Ð¤ÑƒÐ½ÐºÑ†Ð¸Ð¸ Ð´Ð»Ñ Ð²Ñ‹Ñ‡Ð¸ÑÐ»ÐµÐ½Ð¸Ñ Ð²Ð°Ñ€Ð¸Ð°Ð½Ñ‚Ð¾Ð² Ñ†Ð²ÐµÑ‚Ð° (Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ñ‹Ðµ ÐºÐ¾Ð¿Ð¸Ð¸)\n    const hexToRgbLocal = hex => {\n      const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n      return result ? {\n        r: parseInt(result[1], 16),\n        g: parseInt(result[2], 16),\n        b: parseInt(result[3], 16)\n      } : null;\n    };\n    const rgbToHexLocal = (r, g, b) => {\n      return \"#\" + [r, g, b].map(x => {\n        const hex = x.toString(16);\n        return hex.length === 1 ? \"0\" + hex : hex;\n      }).join(\"\");\n    };\n    const lightenColorLocal = (hex, percent = 20) => {\n      const rgb = hexToRgbLocal(hex);\n      if (!rgb) return hex;\n      const r = Math.min(255, Math.round(rgb.r + (255 - rgb.r) * (percent / 100)));\n      const g = Math.min(255, Math.round(rgb.g + (255 - rgb.g) * (percent / 100)));\n      const b = Math.min(255, Math.round(rgb.b + (255 - rgb.b) * (percent / 100)));\n      return rgbToHexLocal(r, g, b);\n    };\n    const darkenColorLocal = (hex, percent = 20) => {\n      const rgb = hexToRgbLocal(hex);\n      if (!rgb) return hex;\n      const r = Math.max(0, Math.round(rgb.r * (1 - percent / 100)));\n      const g = Math.max(0, Math.round(rgb.g * (1 - percent / 100)));\n      const b = Math.max(0, Math.round(rgb.b * (1 - percent / 100)));\n      return rgbToHexLocal(r, g, b);\n    };\n    const handleChange = (field, value) => {\n      const updated = {\n        ...formData,\n        [field]: value\n      };\n\n      // Ð•ÑÐ»Ð¸ Ð¸Ð·Ð¼ÐµÐ½ÑÐµÑ‚ÑÑ Ð¾ÑÐ½Ð¾Ð²Ð½Ð¾Ð¹ Ñ†Ð²ÐµÑ‚, Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ Ð²Ñ‹Ñ‡Ð¸ÑÐ»ÑÐµÐ¼ ÑÐ²ÐµÑ‚Ð»Ñ‹Ð¹ Ð¸ Ñ‚ÐµÐ¼Ð½Ñ‹Ð¹ Ð²Ð°Ñ€Ð¸Ð°Ð½Ñ‚Ñ‹\n      if (field === 'primaryColor') {\n        updated.primaryLight = lightenColorLocal(value, 20);\n        updated.primaryDark = darkenColorLocal(value, 20);\n      }\n      setFormData(updated);\n    };\n    const handleSubmit = e => {\n      e.preventDefault();\n      onSave(formData);\n    };\n    const colorFields = [{\n      key: 'primaryColor',\n      label: 'ÐžÑÐ½Ð¾Ð²Ð½Ð¾Ð¹ Ñ†Ð²ÐµÑ‚'\n    }, {\n      key: 'secondaryColor',\n      label: 'Ð¦Ð²ÐµÑ‚ ÐºÐ½Ð¾Ð¿Ð¾Ðº Ð¸ ÑÑÑ‹Ð»Ð¾Ðº'\n    }, {\n      key: 'secondaryLight',\n      label: 'Ð¦Ð²ÐµÑ‚ ÐºÐ½Ð¾Ð¿Ð¾Ðº Ð¿Ñ€Ð¸ Ð½Ð°Ð²ÐµÐ´ÐµÐ½Ð¸Ð¸'\n    }, {\n      key: 'secondaryDark',\n      label: 'Ð¦Ð²ÐµÑ‚ Ð°ÐºÑ‚Ð¸Ð²Ð½Ñ‹Ñ… ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð¾Ð²'\n    }, {\n      key: 'accentColor',\n      label: 'ÐÐºÑ†ÐµÐ½Ñ‚Ð½Ñ‹Ð¹ Ñ†Ð²ÐµÑ‚ (Ð²Ñ‹Ð´ÐµÐ»ÐµÐ½Ð¸Ñ)'\n    }, {\n      key: 'backgroundColor',\n      label: 'Ð¦Ð²ÐµÑ‚ Ñ„Ð¾Ð½Ð° ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ñ‹'\n    }, {\n      key: 'textColor',\n      label: 'Ð¦Ð²ÐµÑ‚ Ð¾ÑÐ½Ð¾Ð²Ð½Ð¾Ð³Ð¾ Ñ‚ÐµÐºÑÑ‚Ð°'\n    }, {\n      key: 'textLight',\n      label: 'Ð¦Ð²ÐµÑ‚ Ð²Ñ‚Ð¾Ñ€Ð¾ÑÑ‚ÐµÐ¿ÐµÐ½Ð½Ð¾Ð³Ð¾ Ñ‚ÐµÐºÑÑ‚Ð°'\n    }];\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"theme-edit-form\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 \\u0442\\u0435\\u043C\\u044B *\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1026,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: formData.name,\n            onChange: e => handleChange('name', e.target.value),\n            placeholder: \"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 \\u0442\\u0435\\u043C\\u044B\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1027,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1025,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"theme-colors-grid\",\n          children: colorFields.map(field => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"color-picker-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: field.label\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1039,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"color-picker-wrapper\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"color\",\n                value: formData[field.key],\n                onChange: e => handleChange(field.key, e.target.value),\n                className: \"color-picker\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1041,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: formData[field.key],\n                onChange: e => handleChange(field.key, e.target.value),\n                className: \"color-input\",\n                placeholder: \"#000000\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1047,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"color-preview\",\n                style: {\n                  background: formData[field.key]\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1054,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1040,\n              columnNumber: 17\n            }, this)]\n          }, field.key, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1038,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1036,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-actions\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"save-btn\",\n            children: \"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1064,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"cancel-btn\",\n            onClick: onCancel,\n            children: \"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1067,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1063,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1024,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1023,\n      columnNumber: 7\n    }, this);\n  };\n\n  // Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ Ð´Ð»Ñ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸, ÑÐ²Ð»ÑÐµÑ‚ÑÑ Ð»Ð¸ Ñ„Ð°Ð¹Ð» Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸ÐµÐ¼\n  // ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÑ‚ Ð¸ MIME-Ñ‚Ð¸Ð¿, Ð¸ Ñ€Ð°ÑÑˆÐ¸Ñ€ÐµÐ½Ð¸Ðµ Ñ„Ð°Ð¹Ð»Ð° Ð´Ð»Ñ Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ¸ Ð²ÑÐµÑ… Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ð¾Ð²\n  _s(ThemeEditForm, \"WFTeQC0sT/LLP0p6euw+bmsjeeE=\");\n  const isImageFile = file => {\n    // ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ MIME-Ñ‚Ð¸Ð¿ (Ð¾ÑÐ½Ð¾Ð²Ð½Ð°Ñ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ°)\n    if (file.type && file.type.startsWith('image/')) {\n      return true;\n    }\n\n    // Fallback: Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ Ñ€Ð°ÑÑˆÐ¸Ñ€ÐµÐ½Ð¸Ðµ Ñ„Ð°Ð¹Ð»Ð°\n    // ÐŸÐ¾Ð´Ð´ÐµÑ€Ð¶Ð¸Ð²Ð°ÐµÐ¼ Ð²ÑÐµ Ð¿Ð¾Ð¿ÑƒÐ»ÑÑ€Ð½Ñ‹Ðµ Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ñ‹ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ð¹\n    const imageExtensions = ['jpg', 'jpeg', 'png', 'gif', 'webp', 'bmp', 'svg', 'ico', 'tiff', 'tif', 'heic', 'heif', 'avif', 'apng'];\n    const fileName = file.name.toLowerCase();\n    const extension = fileName.split('.').pop();\n    return imageExtensions.includes(extension);\n  };\n  const convertFileToBase64 = file => {\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.onload = () => resolve(reader.result);\n      reader.onerror = reject;\n      reader.readAsDataURL(file);\n    });\n  };\n\n  // ÐšÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚ Ñ„Ð¾Ñ€Ð¼Ñ‹ Ð°Ð²Ñ‚Ð¾Ñ€Ð¸Ð·Ð°Ñ†Ð¸Ð¸\n  const LoginForm = ({\n    onLogin\n  }) => {\n    _s2();\n    const [username, setUsername] = useState('');\n    const [password, setPassword] = useState('');\n    const [error, setError] = useState('');\n    const handleSubmit = e => {\n      e.preventDefault();\n      setError('');\n      if (!username.trim() || !password.trim()) {\n        setError('Ð—Ð°Ð¿Ð¾Ð»Ð½Ð¸Ñ‚Ðµ Ð²ÑÐµ Ð¿Ð¾Ð»Ñ');\n        return;\n      }\n      const success = onLogin(username, password);\n      if (!success) {\n        setError('ÐÐµÐ²ÐµÑ€Ð½Ñ‹Ð¹ Ð»Ð¾Ð³Ð¸Ð½ Ð¸Ð»Ð¸ Ð¿Ð°Ñ€Ð¾Ð»ÑŒ');\n        setPassword('');\n      }\n    };\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-login-container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"admin-login-form\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"admin-login-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            children: \"\\u0410\\u0434\\u043C\\u0438\\u043D-\\u043F\\u0430\\u043D\\u0435\\u043B\\u044C\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1132,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"\\u0412\\u043E\\u0439\\u0434\\u0438\\u0442\\u0435 \\u0434\\u043B\\u044F \\u0443\\u043F\\u0440\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u044F \\u0441\\u0430\\u0439\\u0442\\u043E\\u043C\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1133,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1131,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleSubmit,\n          className: \"login-form\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"username\",\n              children: \"\\u041B\\u043E\\u0433\\u0438\\u043D\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1137,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              id: \"username\",\n              type: \"text\",\n              value: username,\n              onChange: e => setUsername(e.target.value),\n              placeholder: \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043B\\u043E\\u0433\\u0438\\u043D\",\n              autoFocus: true,\n              className: error ? 'error' : ''\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1138,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1136,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"password\",\n              children: \"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1149,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              id: \"password\",\n              type: \"password\",\n              value: password,\n              onChange: e => setPassword(e.target.value),\n              placeholder: \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\",\n              className: error ? 'error' : ''\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1150,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1148,\n            columnNumber: 13\n          }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"login-error\",\n            children: error\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1159,\n            columnNumber: 23\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"login-submit-btn\",\n            children: \"\\u0412\\u043E\\u0439\\u0442\\u0438\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1160,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1135,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1130,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1129,\n      columnNumber: 7\n    }, this);\n  };\n\n  // ÐšÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚ Ñ„Ð¾Ñ€Ð¼Ñ‹ Ð´Ð»Ñ Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¸Ñ/Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ð¹\n  _s2(LoginForm, \"lABZ+K3zbnEaFQvlduiFXLNOf5A=\");\n  const PhotoForm = ({\n    photo,\n    onSave,\n    onCancel,\n    onAlert,\n    uploadedImagesStore,\n    formKey\n  }) => {\n    _s3();\n    // Ð˜Ð·Ð²Ð»ÐµÐºÐ°ÐµÐ¼ ID Ñ„Ð¾Ñ‚Ð¾ Ð´Ð»Ñ Ð¾Ñ‚ÑÐ»ÐµÐ¶Ð¸Ð²Ð°Ð½Ð¸Ñ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ð¹\n    // Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ useMemo Ð´Ð»Ñ ÑÑ‚Ð°Ð±Ð¸Ð»Ð¸Ð·Ð°Ñ†Ð¸Ð¸, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð¸Ð·Ð±ÐµÐ¶Ð°Ñ‚ÑŒ Ð»Ð¸ÑˆÐ½Ð¸Ñ… Ð²Ñ‹Ñ‡Ð¸ÑÐ»ÐµÐ½Ð¸Ð¹\n    const photoId = useMemo(() => photo === null || photo === void 0 ? void 0 : photo.id, [photo === null || photo === void 0 ? void 0 : photo.id]);\n\n    // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ ID Ñ„Ð¾Ñ‚Ð¾ Ð´Ð»Ñ Ð¾Ñ‚ÑÐ»ÐµÐ¶Ð¸Ð²Ð°Ð½Ð¸Ñ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ð¹\n    // Ð˜Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð¸Ñ€ÑƒÐµÐ¼ ref Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð¾Ð´Ð¸Ð½ Ñ€Ð°Ð· Ð¿Ñ€Ð¸ Ð¼Ð¾Ð½Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ð¸\n    const photoIdRef = useRef(photoId);\n    const isInitialMountRef = useRef(true);\n\n    // Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð¾Ñ‚Ð´ÐµÐ»ÑŒÐ½Ð¾Ðµ ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ðµ Ð´Ð»Ñ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ\n    // Ð˜Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð¸Ñ€ÑƒÐµÐ¼ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð¾Ð´Ð¸Ð½ Ñ€Ð°Ð· Ð¿Ñ€Ð¸ Ð¼Ð¾Ð½Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ð¸\n    // Ð’Ð¾ÑÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼ Ð¸Ð· Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ð°, ÐµÑÐ»Ð¸ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ Ð±Ñ‹Ð»Ð¾ Ð·Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½Ð¾ Ñ€Ð°Ð½ÐµÐµ\n    const [image, setImage] = useState(() => {\n      // Ð¡Ð½Ð°Ñ‡Ð°Ð»Ð° Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ðµ\n      if (uploadedImagesStore && uploadedImagesStore.has(formKey)) {\n        return uploadedImagesStore.get(formKey);\n      }\n      return (photo === null || photo === void 0 ? void 0 : photo.image) || '';\n    });\n    const [caption, setCaption] = useState((photo === null || photo === void 0 ? void 0 : photo.caption) || '');\n    const [isUploading, setIsUploading] = useState(false);\n    const [isDragging, setIsDragging] = useState(false);\n    const fileInputRef = useRef(null);\n    const userHasUploadedRef = useRef(false); // Ð¤Ð»Ð°Ð³: Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ Ð·Ð°Ð³Ñ€ÑƒÐ·Ð¸Ð» Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ\n    const uploadedImageRef = useRef(null); // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ð·Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½Ð½Ð¾Ðµ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ\n    const isProcessingFileRef = useRef(false); // Ð¤Ð»Ð°Ð³: Ñ„Ð°Ð¹Ð» Ð¾Ð±Ñ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°ÐµÑ‚ÑÑ\n\n    // Ð˜Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð¿Ñ€Ð¸ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ð¸ ID Ñ„Ð¾Ñ‚Ð¾ (Ð½Ðµ Ð¿Ñ€Ð¸ ÐºÐ°Ð¶Ð´Ð¾Ð¼ Ñ€ÐµÐ½Ð´ÐµÑ€Ðµ)\n    useEffect(() => {\n      const isInitialMount = isInitialMountRef.current;\n      isInitialMountRef.current = false;\n\n      // Ð•ÑÐ»Ð¸ ID Ð¸Ð·Ð¼ÐµÐ½Ð¸Ð»ÑÑ (Ð¿ÐµÑ€ÐµÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ Ð¼ÐµÐ¶Ð´Ñƒ Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸ÐµÐ¼ Ð¸ ÑÐ¾Ð·Ð´Ð°Ð½Ð¸ÐµÐ¼ Ð½Ð¾Ð²Ð¾Ð³Ð¾)\n      if (photoIdRef.current !== photoId) {\n        photoIdRef.current = photoId;\n\n        // Ð•ÑÐ»Ð¸ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ ÑƒÐ¶Ðµ Ð·Ð°Ð³Ñ€ÑƒÐ·Ð¸Ð» Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ Ð´Ð»Ñ Ð½Ð¾Ð²Ð¾Ð¹ Ñ„Ð¾Ñ€Ð¼Ñ‹, ÐÐ• ÑÐ±Ñ€Ð°ÑÑ‹Ð²Ð°ÐµÐ¼ ÐµÐ³Ð¾\n        if (userHasUploadedRef.current && !photoId && uploadedImageRef.current) {\n          // Ð’Ð¾ÑÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼ Ð·Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½Ð½Ð¾Ðµ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ\n          setImage(uploadedImageRef.current);\n          return; // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ð·Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½Ð½Ð¾Ðµ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¼ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ\n        }\n\n        // Ð•ÑÐ»Ð¸ Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€ÑƒÐµÐ¼ ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÑŽÑ‰ÐµÐµ Ñ„Ð¾Ñ‚Ð¾ - Ð·Ð°Ð³Ñ€ÑƒÐ¶Ð°ÐµÐ¼ ÐµÐ³Ð¾ Ð´Ð°Ð½Ð½Ñ‹Ðµ\n        if (photoId && photo) {\n          userHasUploadedRef.current = false;\n          uploadedImageRef.current = null;\n          setImage(photo.image || '');\n          setCaption(photo.caption || '');\n        } else {\n          // ÐÐ¾Ð²Ð°Ñ Ñ„Ð¾Ñ€Ð¼Ð° - ÑÐ±Ñ€Ð°ÑÑ‹Ð²Ð°ÐµÐ¼ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ ÐµÑÐ»Ð¸ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ ÐµÑ‰Ðµ Ð½Ð¸Ñ‡ÐµÐ³Ð¾ Ð½Ðµ Ð·Ð°Ð³Ñ€ÑƒÐ·Ð¸Ð»\n          if (!userHasUploadedRef.current && !uploadedImageRef.current) {\n            setImage('');\n            setCaption('');\n          } else if (uploadedImageRef.current) {\n            // Ð’Ð¾ÑÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼ Ð·Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½Ð½Ð¾Ðµ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ\n            setImage(uploadedImageRef.current);\n          }\n        }\n      }\n      // ÐÐ• Ð¾Ð±Ñ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°ÐµÐ¼ isInitialMount Ð·Ð´ÐµÑÑŒ - ÑÑ‚Ð¾ Ð¼Ð¾Ð¶ÐµÑ‚ Ð²Ñ‹Ð·Ð²Ð°Ñ‚ÑŒ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ñ‹ Ð¿Ñ€Ð¸ Ð¿ÐµÑ€ÐµÑ€ÐµÐ½Ð´ÐµÑ€Ðµ\n    }, [photoId]); // Ð—Ð°Ð²Ð¸ÑÐ¸Ð¼ Ð¢ÐžÐ›Ð¬ÐšÐž Ð¾Ñ‚ photoId - ÑÑ‚Ð¾ ÑÑ‚Ð°Ð±Ð¸Ð»ÑŒÐ½Ð¾Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ\n\n    // ÐžÑ‚Ð´ÐµÐ»ÑŒÐ½Ñ‹Ð¹ ÑÑ„Ñ„ÐµÐºÑ‚ Ð´Ð»Ñ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ Ð¿Ñ€Ð¸ Ð¿ÐµÑ€Ð²Ð¾Ð¼ Ð¼Ð¾Ð½Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ð¸\n    useEffect(() => {\n      if (isInitialMountRef.current && !photoId && image && image.startsWith('data:image')) {\n        uploadedImageRef.current = image;\n      }\n    }, []); // Ð¢Ð¾Ð»ÑŒÐºÐ¾ Ð¿Ñ€Ð¸ Ð¼Ð¾Ð½Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ð¸\n\n    // ÐŸÐ¾ÑÑ‚Ð¾ÑÐ½Ð½Ð°Ñ Ð·Ð°Ñ‰Ð¸Ñ‚Ð° Ð¾Ñ‚ ÑÐ±Ñ€Ð¾ÑÐ° Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ Ð¿Ñ€Ð¸ Ð¿ÐµÑ€ÐµÑ€ÐµÐ½Ð´ÐµÑ€Ðµ\n    // Ð­Ñ‚Ð¾Ñ‚ ÑÑ„Ñ„ÐµÐºÑ‚ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑÐµÑ‚ Ð¸ Ð²Ð¾ÑÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÑ‚ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ Ð¸Ð· Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ð°, ÐµÑÐ»Ð¸ Ð¾Ð½Ð¾ Ð±Ñ‹Ð»Ð¾ ÑÐ±Ñ€Ð¾ÑˆÐµÐ½Ð¾\n    useEffect(() => {\n      // Ð¢Ð¾Ð»ÑŒÐºÐ¾ Ð´Ð»Ñ Ð½Ð¾Ð²Ð¾Ð¹ Ñ„Ð¾Ñ€Ð¼Ñ‹ (Ð±ÐµÐ· ID) Ð¸ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ ÐµÑÐ»Ð¸ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ Ð·Ð°Ð³Ñ€ÑƒÐ·Ð¸Ð» Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ\n      // Ð˜ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ Ð½Ðµ Ð±Ñ‹Ð»Ð¾ ÑÐ²Ð½Ð¾ ÑƒÐ´Ð°Ð»ÐµÐ½Ð¾ (ref Ð½Ðµ null)\n      if (!photoId && userHasUploadedRef.current && uploadedImageRef.current) {\n        // Ð•ÑÐ»Ð¸ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ Ð¿ÑƒÑÑ‚Ð¾Ðµ, Ð½Ð¾ Ð² ref Ð¸Ð»Ð¸ Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ðµ ÐµÑÑ‚ÑŒ - Ð²Ð¾ÑÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼\n        if (!image) {\n          // Ð¡Ð½Ð°Ñ‡Ð°Ð»Ð° Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ðµ\n          const storedImage = uploadedImagesStore && uploadedImagesStore.has(formKey) ? uploadedImagesStore.get(formKey) : null;\n          if (storedImage) {\n            // Ð’Ð¾ÑÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼ Ð¸Ð· Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ð°\n            uploadedImageRef.current = storedImage;\n            setImage(storedImage);\n            return;\n          }\n\n          // Ð•ÑÐ»Ð¸ Ð² Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ðµ Ð½ÐµÑ‚, Ð½Ð¾ Ð² ref ÐµÑÑ‚ÑŒ - Ð²Ð¾ÑÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼ Ð¸Ð· ref\n          if (uploadedImageRef.current) {\n            // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ð² Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ðµ Ð´Ð»Ñ Ð±ÑƒÐ´ÑƒÑ‰Ð¸Ñ… Ð¿ÐµÑ€ÐµÑ€ÐµÐ½Ð´ÐµÑ€Ð¾Ð²\n            if (uploadedImagesStore && formKey) {\n              uploadedImagesStore.set(formKey, uploadedImageRef.current);\n            }\n            setImage(uploadedImageRef.current);\n          }\n        }\n      }\n    }); // Ð‘ÐµÐ· Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚ÐµÐ¹ - ÑÑ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°ÐµÑ‚ Ð¿Ñ€Ð¸ ÐºÐ°Ð¶Ð´Ð¾Ð¼ Ñ€ÐµÐ½Ð´ÐµÑ€Ðµ Ð´Ð»Ñ Ð·Ð°Ñ‰Ð¸Ñ‚Ñ‹\n\n    const handleChange = e => {\n      if (e.target.name === 'caption') {\n        setCaption(e.target.value);\n      }\n    };\n    const processFile = async file => {\n      if (!file) {\n        return;\n      }\n\n      // ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ Ñ‚Ð¸Ð¿ Ñ„Ð°Ð¹Ð»Ð° (MIME-Ñ‚Ð¸Ð¿ Ð¸ Ñ€Ð°ÑÑˆÐ¸Ñ€ÐµÐ½Ð¸Ðµ)\n      if (!isImageFile(file)) {\n        onAlert('Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ñ„Ð°Ð¹Ð» Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ (JPG, PNG, GIF, WEBP, BMP, SVG, HEIC Ð¸ Ð´Ñ€ÑƒÐ³Ð¸Ðµ Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ñ‹)', 'error');\n        return;\n      }\n\n      // ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ Ñ€Ð°Ð·Ð¼ÐµÑ€ Ñ„Ð°Ð¹Ð»Ð° (Ð¼Ð°ÐºÑÐ¸Ð¼ÑƒÐ¼ 5MB)\n      if (file.size > 5 * 1024 * 1024) {\n        onAlert('Ð Ð°Ð·Ð¼ÐµÑ€ Ñ„Ð°Ð¹Ð»Ð° Ð½Ðµ Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð¿Ñ€ÐµÐ²Ñ‹ÑˆÐ°Ñ‚ÑŒ 5MB', 'error');\n        return;\n      }\n      setIsUploading(true);\n      try {\n        const base64 = await convertFileToBase64(file);\n\n        // Ð£ÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼ Ñ„Ð»Ð°Ð³, Ñ‡Ñ‚Ð¾ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ Ð·Ð°Ð³Ñ€ÑƒÐ·Ð¸Ð» Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ\n        userHasUploadedRef.current = true;\n        uploadedImageRef.current = base64; // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ð² ref Ð´Ð»Ñ Ð·Ð°Ñ‰Ð¸Ñ‚Ñ‹ Ð¾Ñ‚ ÑÐ±Ñ€Ð¾ÑÐ°\n\n        // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ð² Ð³Ð»Ð¾Ð±Ð°Ð»ÑŒÐ½Ð¾Ðµ Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ðµ, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð½Ðµ Ð¿Ð¾Ñ‚ÐµÑ€ÑÑ‚ÑŒ Ð¿Ñ€Ð¸ Ð¿ÐµÑ€ÐµÑ€ÐµÐ½Ð´ÐµÑ€Ðµ\n        if (uploadedImagesStore && formKey) {\n          uploadedImagesStore.set(formKey, base64);\n        }\n\n        // ÐžÐ±Ð½Ð¾Ð²Ð»ÑÐµÐ¼ ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ðµ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ Ñ‡ÐµÑ€ÐµÐ· Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾Ðµ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ\n        // Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð³Ð°Ñ€Ð°Ð½Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ, Ñ‡Ñ‚Ð¾ Ð¼Ñ‹ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð°ÐºÑ‚ÑƒÐ°Ð»ÑŒÐ½Ð¾Ðµ ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ðµ\n        setImage(prevImage => {\n          // Ð•ÑÐ»Ð¸ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ ÑƒÐ¶Ðµ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ð¾ Ð¸ ÑÐ¾Ð²Ð¿Ð°Ð´Ð°ÐµÑ‚, Ð½Ðµ Ð¾Ð±Ð½Ð¾Ð²Ð»ÑÐµÐ¼\n          if (prevImage === base64) {\n            return prevImage;\n          }\n          return base64;\n        });\n\n        // ÐžÑ‚ÐºÐ»Ð°Ð´Ñ‹Ð²Ð°ÐµÐ¼ Ð²Ñ‹Ð·Ð¾Ð² onAlert, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð´Ð°Ñ‚ÑŒ React Ð²Ñ€ÐµÐ¼Ñ Ð¾Ð±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ðµ\n        // Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð·Ð°Ð´ÐµÑ€Ð¶ÐºÑƒ, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð³Ð°Ñ€Ð°Ð½Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ, Ñ‡Ñ‚Ð¾ ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ðµ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¾\n        // Ð¸ ÐºÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚ ÑƒÑÐ¿ÐµÐ» Ð¾Ñ‚Ñ€ÐµÐ½Ð´ÐµÑ€Ð¸Ñ‚ÑŒÑÑ Ñ Ð½Ð¾Ð²Ñ‹Ð¼ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸ÐµÐ¼\n        setTimeout(() => {\n          // Ð¤Ð¸Ð½Ð°Ð»ÑŒÐ½Ð°Ñ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð¿ÐµÑ€ÐµÐ´ Ð²Ñ‹Ð·Ð¾Ð²Ð¾Ð¼ onAlert\n          setImage(currentImage => {\n            // Ð•ÑÐ»Ð¸ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ Ð±Ñ‹Ð»Ð¾ ÑÐ±Ñ€Ð¾ÑˆÐµÐ½Ð¾, Ð½Ð¾ Ð² ref Ð¾Ð½Ð¾ ÐµÑÑ‚ÑŒ - Ð²Ð¾ÑÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼\n            if (!currentImage && uploadedImageRef.current) {\n              return uploadedImageRef.current;\n            }\n            return currentImage;\n          });\n\n          // Ð’Ñ‹Ð·Ñ‹Ð²Ð°ÐµÐ¼ onAlert Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð¿Ð¾ÑÐ»Ðµ Ð¿Ð¾Ð´Ñ‚Ð²ÐµÑ€Ð¶Ð´ÐµÐ½Ð¸Ñ, Ñ‡Ñ‚Ð¾ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ð¾\n          onAlert('Ð˜Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ Ð·Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½Ð¾', 'success');\n        }, 150);\n      } catch (error) {\n        console.error('ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ñ„Ð°Ð¹Ð»Ð°:', error);\n        onAlert('ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ñ„Ð°Ð¹Ð»Ð°', 'error');\n      } finally {\n        setIsUploading(false);\n      }\n    };\n    const handleFileChange = async e => {\n      var _e$target$files;\n      // Ð—Ð°Ñ‰Ð¸Ñ‚Ð° Ð¾Ñ‚ Ð¿Ð¾Ð²Ñ‚Ð¾Ñ€Ð½Ñ‹Ñ… Ð²Ñ‹Ð·Ð¾Ð²Ð¾Ð²\n      if (isProcessingFileRef.current) {\n        return;\n      }\n      const file = (_e$target$files = e.target.files) === null || _e$target$files === void 0 ? void 0 : _e$target$files[0];\n      if (!file) {\n        return;\n      }\n\n      // Ð£ÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼ Ñ„Ð»Ð°Ð³ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸\n      isProcessingFileRef.current = true;\n\n      // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ ÑÑÑ‹Ð»ÐºÑƒ Ð½Ð° input Ð´Ð»Ñ Ð¾Ñ‡Ð¸ÑÑ‚ÐºÐ¸ Ð¿Ð¾ÑÐ»Ðµ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸\n      const input = e.target;\n      try {\n        await processFile(file);\n      } finally {\n        // Ð¡Ð±Ñ€Ð°ÑÑ‹Ð²Ð°ÐµÐ¼ Ñ„Ð»Ð°Ð³ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸\n        isProcessingFileRef.current = false;\n\n        // ÐžÑ‡Ð¸Ñ‰Ð°ÐµÐ¼ input Ð¿Ð¾ÑÐ»Ðµ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð¼Ð¾Ð¶Ð½Ð¾ Ð±Ñ‹Ð»Ð¾ Ð²Ñ‹Ð±Ñ€Ð°Ñ‚ÑŒ Ñ‚Ð¾Ñ‚ Ð¶Ðµ Ñ„Ð°Ð¹Ð» ÑÐ½Ð¾Ð²Ð°\n        // Ð”ÐµÐ»Ð°ÐµÐ¼ ÑÑ‚Ð¾ Ñ Ð½ÐµÐ±Ð¾Ð»ÑŒÑˆÐ¾Ð¹ Ð·Ð°Ð´ÐµÑ€Ð¶ÐºÐ¾Ð¹, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð½Ðµ Ð¼ÐµÑˆÐ°Ñ‚ÑŒ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐµ\n        setTimeout(() => {\n          if (input) {\n            input.value = '';\n          }\n        }, 100);\n      }\n    };\n    const handleDragOver = e => {\n      e.preventDefault();\n      e.stopPropagation();\n      setIsDragging(true);\n    };\n    const handleDragLeave = e => {\n      e.preventDefault();\n      e.stopPropagation();\n      setIsDragging(false);\n    };\n    const handleDrop = async e => {\n      var _e$dataTransfer$files;\n      e.preventDefault();\n      e.stopPropagation();\n      setIsDragging(false);\n      const file = (_e$dataTransfer$files = e.dataTransfer.files) === null || _e$dataTransfer$files === void 0 ? void 0 : _e$dataTransfer$files[0];\n      if (file) {\n        console.log('Ð¤Ð°Ð¹Ð» Ð¿ÐµÑ€ÐµÑ‚Ð°Ñ‰ÐµÐ½ (PhotoForm):', file.name, file.type, file.size);\n        await processFile(file);\n      }\n    };\n    const handleSubmit = e => {\n      e.preventDefault();\n      e.stopPropagation();\n      if (!image || !image.trim()) {\n        onAlert('Ð—Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚Ðµ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ', 'error');\n        return;\n      }\n      if (!image.startsWith('data:image')) {\n        onAlert('ÐžÑˆÐ¸Ð±ÐºÐ°: Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ Ð½Ðµ Ð·Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½Ð¾ Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¾', 'error');\n        return;\n      }\n      const photoData = {\n        ...((photo === null || photo === void 0 ? void 0 : photo.id) && {\n          id: photo.id\n        }),\n        image: image.trim(),\n        caption: caption.trim() || undefined\n      };\n      onSave(photoData);\n    };\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-overlay\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: photo ? 'Ð ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ñ„Ð¾Ñ‚Ð¾' : 'Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ñ„Ð¾Ñ‚Ð¾'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1426,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleSubmit,\n          noValidate: true,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u044C \\u0444\\u0430\\u0439\\u043B *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1429,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `file-upload-dropzone ${isDragging ? 'dragging' : ''} ${image ? 'has-image' : ''}`,\n              onDragOver: handleDragOver,\n              onDragLeave: handleDragLeave,\n              onDrop: handleDrop,\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"file-upload-wrapper\",\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  ref: fileInputRef,\n                  type: \"file\",\n                  accept: \"image/*\",\n                  onChange: handleFileChange,\n                  className: \"file-input-hidden\",\n                  disabled: isUploading\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1437,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  className: \"file-upload-button\",\n                  onClick: e => {\n                    e.preventDefault();\n                    if (fileInputRef.current) {\n                      fileInputRef.current.click();\n                    }\n                  },\n                  disabled: isUploading,\n                  children: isUploading ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"upload-icon\",\n                      children: \"\\u23F3\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1458,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430...\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1459,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"upload-icon\",\n                      children: \"\\uD83D\\uDCF7\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1463,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: \"\\u0412\\u044B\\u0431\\u0440\\u0430\\u0442\\u044C \\u0438\\u0437\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u0435\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1464,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1445,\n                  columnNumber: 19\n                }, this), image && !isUploading && /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  className: \"file-remove-button\",\n                  onClick: () => {\n                    userHasUploadedRef.current = false; // Ð¡Ð±Ñ€Ð°ÑÑ‹Ð²Ð°ÐµÐ¼ Ñ„Ð»Ð°Ð³ Ð¿Ñ€Ð¸ ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ð¸\n                    uploadedImageRef.current = null; // ÐžÑ‡Ð¸Ñ‰Ð°ÐµÐ¼ ref\n                    // ÐžÑ‡Ð¸Ñ‰Ð°ÐµÐ¼ Ð¸Ð· Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ð°\n                    if (uploadedImagesStore && formKey) {\n                      uploadedImagesStore.delete(formKey);\n                    }\n                    setImage('');\n                    if (fileInputRef.current) {\n                      fileInputRef.current.value = '';\n                    }\n                  },\n                  children: \"\\u2715\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1469,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1436,\n                columnNumber: 17\n              }, this), !image && /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"drag-drop-hint\",\n                children: \"\\u0438\\u043B\\u0438 \\u043F\\u0435\\u0440\\u0435\\u0442\\u0430\\u0449\\u0438\\u0442\\u0435 \\u0438\\u0437\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u0435 \\u0441\\u044E\\u0434\\u0430\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1490,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1430,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1428,\n            columnNumber: 13\n          }, this), image && image.trim() ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"\\u041F\\u0440\\u0435\\u0434\\u043F\\u0440\\u043E\\u0441\\u043C\\u043E\\u0442\\u0440:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1499,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"photo-preview-modern\",\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: image,\n                alt: \"\\u041F\\u0440\\u0435\\u0434\\u043F\\u0440\\u043E\\u0441\\u043C\\u043E\\u0442\\u0440\",\n                onError: e => {\n                  e.target.src = 'https://via.placeholder.com/300x200/8B7355/FFFFFF?text=Ð¢Ð±Ð¸Ð»Ð¸ÑÐ¸';\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1501,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"photo-preview-overlay\",\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"preview-badge\",\n                  children: \"\\u041F\\u0440\\u0435\\u0434\\u043F\\u0440\\u043E\\u0441\\u043C\\u043E\\u0442\\u0440\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1509,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1508,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1500,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1498,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                color: '#999',\n                fontStyle: 'italic',\n                fontSize: '0.9rem'\n              },\n              children: \"\\u041F\\u0440\\u0435\\u0434\\u043F\\u0440\\u043E\\u0441\\u043C\\u043E\\u0442\\u0440 \\u043F\\u043E\\u044F\\u0432\\u0438\\u0442\\u0441\\u044F \\u043F\\u043E\\u0441\\u043B\\u0435 \\u0432\\u044B\\u0431\\u043E\\u0440\\u0430 \\u0444\\u0430\\u0439\\u043B\\u0430\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1515,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1514,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"\\u041F\\u043E\\u0434\\u043F\\u0438\\u0441\\u044C (\\u043D\\u0435\\u043E\\u0431\\u044F\\u0437\\u0430\\u0442\\u0435\\u043B\\u044C\\u043D\\u043E)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1522,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              name: \"caption\",\n              value: caption,\n              onChange: handleChange,\n              placeholder: \"\\u041F\\u043E\\u0434\\u043F\\u0438\\u0441\\u044C \\u043A \\u0444\\u043E\\u0442\\u043E\\u0433\\u0440\\u0430\\u0444\\u0438\\u0438\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1523,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1521,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-actions\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              className: \"save-btn\",\n              children: photo ? 'ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ' : 'Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1533,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"cancel-btn\",\n              onClick: onCancel,\n              children: \"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1536,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1532,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1427,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1425,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1424,\n      columnNumber: 7\n    }, this);\n  };\n  _s3(PhotoForm, \"EHjmfwt2fgchKZvvwfFR2dBNgzU=\");\n  const MenuItemForm = ({\n    item,\n    onSave,\n    onCancel,\n    onAlert,\n    menuImagesStore,\n    formKey\n  }) => {\n    _s4();\n    const defaultCategory = categories.length > 0 ? categories[0].key : 'cold';\n\n    // Ð˜Ð·Ð²Ð»ÐµÐºÐ°ÐµÐ¼ ID ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð° Ð´Ð»Ñ Ð¾Ñ‚ÑÐ»ÐµÐ¶Ð¸Ð²Ð°Ð½Ð¸Ñ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ð¹\n    const itemId = useMemo(() => item === null || item === void 0 ? void 0 : item.id, [item === null || item === void 0 ? void 0 : item.id]);\n\n    // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ ID ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð° Ð´Ð»Ñ Ð¾Ñ‚ÑÐ»ÐµÐ¶Ð¸Ð²Ð°Ð½Ð¸Ñ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ð¹\n    const itemIdRef = useRef(itemId);\n    const isInitialMountRef = useRef(true);\n\n    // Ð˜Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð¸Ñ€ÑƒÐµÐ¼ refs Ð”Ðž useState, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð¼Ð¾Ð¶Ð½Ð¾ Ð±Ñ‹Ð»Ð¾ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ Ð¸Ñ… Ð² Ð¸Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ‚Ð¾Ñ€Ðµ\n    const fileInputRef = useRef(null);\n    const isProcessingFileRef = useRef(false); // Ð¤Ð»Ð°Ð³: Ñ„Ð°Ð¹Ð» Ð¾Ð±Ñ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°ÐµÑ‚ÑÑ\n    const uploadedImageRef = useRef(null); // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ð·Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½Ð½Ð¾Ðµ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ\n    const userHasUploadedRef = useRef(false); // Ð¤Ð»Ð°Ð³: Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ Ð·Ð°Ð³Ñ€ÑƒÐ·Ð¸Ð» Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ\n\n    // ÐšÐ»ÑŽÑ‡ Ð´Ð»Ñ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ Ð´Ð°Ð½Ð½Ñ‹Ñ… Ñ„Ð¾Ñ€Ð¼Ñ‹ Ð² localStorage\n    const formDataStorageKey = `menu-item-form-${formKey}`;\n\n    // Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð¾Ñ‚Ð´ÐµÐ»ÑŒÐ½Ð¾Ðµ ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ðµ Ð´Ð»Ñ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ (ÐºÐ°Ðº Ð² PhotoForm)\n    const [image, setImage] = useState(() => {\n      // Ð¡Ð½Ð°Ñ‡Ð°Ð»Ð° Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ðµ\n      if (menuImagesStore && menuImagesStore.has(formKey)) {\n        const storedImage = menuImagesStore.get(formKey);\n        // Ð•ÑÐ»Ð¸ Ð² Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ðµ ÐµÑÑ‚ÑŒ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ, ÑƒÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼ Ñ„Ð»Ð°Ð³Ð¸\n        if (storedImage && storedImage.startsWith('data:image')) {\n          userHasUploadedRef.current = true;\n          uploadedImageRef.current = storedImage;\n        }\n        return storedImage;\n      }\n      return (item === null || item === void 0 ? void 0 : item.image) || '';\n    });\n    const [formData, setFormData] = useState(() => {\n      // Ð•ÑÐ»Ð¸ Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€ÑƒÐµÐ¼ ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÑŽÑ‰Ð¸Ð¹ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚ - Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ ÐµÐ³Ð¾ Ð´Ð°Ð½Ð½Ñ‹Ðµ\n      if (item) {\n        return {\n          name: item.name || '',\n          price: item.price.toString().replace(' â‚½', ''),\n          weight: item.weight || '',\n          description: item.description || '',\n          category: item.category || defaultCategory\n        };\n      }\n\n      // Ð”Ð»Ñ Ð½Ð¾Ð²Ð¾Ð¹ Ñ„Ð¾Ñ€Ð¼Ñ‹ - Ð¿Ñ‹Ñ‚Ð°ÐµÐ¼ÑÑ Ð²Ð¾ÑÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Ð¸Ð· localStorage\n      const savedFormData = localStorage.getItem(formDataStorageKey);\n      if (savedFormData) {\n        try {\n          const parsed = JSON.parse(savedFormData);\n          return {\n            name: parsed.name || '',\n            price: parsed.price || '',\n            weight: parsed.weight || '',\n            description: parsed.description || '',\n            category: parsed.category || defaultCategory\n          };\n        } catch (e) {\n          console.error('ÐžÑˆÐ¸Ð±ÐºÐ° Ð²Ð¾ÑÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ñ Ð´Ð°Ð½Ð½Ñ‹Ñ… Ñ„Ð¾Ñ€Ð¼Ñ‹ Ð¸Ð· localStorage:', e);\n        }\n      }\n\n      // Ð•ÑÐ»Ð¸ Ð½ÐµÑ‚ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð½Ñ‹Ñ… Ð´Ð°Ð½Ð½Ñ‹Ñ… - ÑÐ¾Ð·Ð´Ð°ÐµÐ¼ Ð¿ÑƒÑÑ‚ÑƒÑŽ Ñ„Ð¾Ñ€Ð¼Ñƒ\n      return {\n        name: '',\n        price: '',\n        weight: '',\n        description: '',\n        category: defaultCategory\n      };\n    });\n    const [errors, setErrors] = useState({});\n    const [isUploading, setIsUploading] = useState(false);\n\n    // Ð˜Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð¿Ñ€Ð¸ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ð¸ ID ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð° (Ð½Ðµ Ð¿Ñ€Ð¸ ÐºÐ°Ð¶Ð´Ð¾Ð¼ Ñ€ÐµÐ½Ð´ÐµÑ€Ðµ)\n    useEffect(() => {\n      const isInitialMount = isInitialMountRef.current;\n      isInitialMountRef.current = false;\n\n      // Ð•ÑÐ»Ð¸ ID Ð¸Ð·Ð¼ÐµÐ½Ð¸Ð»ÑÑ (Ð¿ÐµÑ€ÐµÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ Ð¼ÐµÐ¶Ð´Ñƒ Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸ÐµÐ¼ Ð¸ ÑÐ¾Ð·Ð´Ð°Ð½Ð¸ÐµÐ¼ Ð½Ð¾Ð²Ð¾Ð³Ð¾)\n      if (itemIdRef.current !== itemId) {\n        itemIdRef.current = itemId;\n\n        // Ð•ÑÐ»Ð¸ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ ÑƒÐ¶Ðµ Ð·Ð°Ð³Ñ€ÑƒÐ·Ð¸Ð» Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ Ð´Ð»Ñ Ð½Ð¾Ð²Ð¾Ð¹ Ñ„Ð¾Ñ€Ð¼Ñ‹, ÐÐ• ÑÐ±Ñ€Ð°ÑÑ‹Ð²Ð°ÐµÐ¼ ÐµÐ³Ð¾\n        if (userHasUploadedRef.current && !itemId && uploadedImageRef.current) {\n          // Ð’Ð¾ÑÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼ Ð·Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½Ð½Ð¾Ðµ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ\n          setImage(uploadedImageRef.current);\n          return; // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ð·Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½Ð½Ð¾Ðµ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¼ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ\n        }\n\n        // Ð•ÑÐ»Ð¸ Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€ÑƒÐµÐ¼ ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÑŽÑ‰Ð¸Ð¹ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚ - Ð·Ð°Ð³Ñ€ÑƒÐ¶Ð°ÐµÐ¼ ÐµÐ³Ð¾ Ð´Ð°Ð½Ð½Ñ‹Ðµ\n        if (itemId && item) {\n          // Ð•ÑÐ»Ð¸ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ ÑƒÐ¶Ðµ Ð·Ð°Ð³Ñ€ÑƒÐ·Ð¸Ð» Ð½Ð¾Ð²Ð¾Ðµ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¸ Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ð¸, ÐÐ• ÑÐ±Ñ€Ð°ÑÑ‹Ð²Ð°ÐµÐ¼ ÐµÐ³Ð¾\n          if (userHasUploadedRef.current && uploadedImageRef.current) {\n            // ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ðµ\n            const storedImage = menuImagesStore && menuImagesStore.has(formKey) ? menuImagesStore.get(formKey) : uploadedImageRef.current;\n\n            // Ð’Ð¾ÑÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼ Ð·Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½Ð½Ð¾Ðµ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¼ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ\n            setImage(storedImage);\n            uploadedImageRef.current = storedImage;\n\n            // ÐžÐ±Ð½Ð¾Ð²Ð»ÑÐµÐ¼ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ñ„Ð¾Ñ€Ð¼Ñƒ, Ð½Ð¾ Ð½Ðµ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ\n            setFormData({\n              name: item.name || '',\n              price: item.price.toString().replace(' â‚½', ''),\n              weight: item.weight || '',\n              description: item.description || '',\n              category: item.category || defaultCategory\n            });\n          } else {\n            // ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ ÐµÑ‰Ðµ Ð½Ðµ Ð·Ð°Ð³Ñ€ÑƒÐ·Ð¸Ð» Ð½Ð¾Ð²Ð¾Ðµ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ - Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÑŽÑ‰ÐµÐµ\n            userHasUploadedRef.current = false;\n            uploadedImageRef.current = null;\n            setImage(item.image || '');\n            setFormData({\n              name: item.name || '',\n              price: item.price.toString().replace(' â‚½', ''),\n              weight: item.weight || '',\n              description: item.description || '',\n              category: item.category || defaultCategory\n            });\n          }\n        } else {\n          // ÐÐ¾Ð²Ð°Ñ Ñ„Ð¾Ñ€Ð¼Ð° - ÑÐ±Ñ€Ð°ÑÑ‹Ð²Ð°ÐµÐ¼ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ ÐµÑÐ»Ð¸ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ ÐµÑ‰Ðµ Ð½Ð¸Ñ‡ÐµÐ³Ð¾ Ð½Ðµ Ð·Ð°Ð³Ñ€ÑƒÐ·Ð¸Ð»\n          if (!userHasUploadedRef.current && !uploadedImageRef.current) {\n            setImage('');\n            setFormData({\n              name: '',\n              price: '',\n              weight: '',\n              description: '',\n              category: defaultCategory\n            });\n          } else if (uploadedImageRef.current) {\n            // Ð’Ð¾ÑÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼ Ð·Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½Ð½Ð¾Ðµ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ\n            setImage(uploadedImageRef.current);\n          }\n        }\n      }\n    }, [itemId, item, defaultCategory]);\n\n    // ÐžÑ‚Ð´ÐµÐ»ÑŒÐ½Ñ‹Ð¹ ÑÑ„Ñ„ÐµÐºÑ‚ Ð´Ð»Ñ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ Ð¿Ñ€Ð¸ Ð¿ÐµÑ€Ð²Ð¾Ð¼ Ð¼Ð¾Ð½Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ð¸\n    useEffect(() => {\n      if (isInitialMountRef.current && !itemId && image && image.startsWith('data:image')) {\n        uploadedImageRef.current = image;\n      }\n    }, []); // Ð¢Ð¾Ð»ÑŒÐºÐ¾ Ð¿Ñ€Ð¸ Ð¼Ð¾Ð½Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ð¸\n\n    // ÐŸÐ¾ÑÑ‚Ð¾ÑÐ½Ð½Ð°Ñ Ð·Ð°Ñ‰Ð¸Ñ‚Ð° Ð¾Ñ‚ ÑÐ±Ñ€Ð¾ÑÐ° Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ Ð¿Ñ€Ð¸ Ð¿ÐµÑ€ÐµÑ€ÐµÐ½Ð´ÐµÑ€Ðµ\n    // Ð­Ñ‚Ð¾Ñ‚ ÑÑ„Ñ„ÐµÐºÑ‚ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑÐµÑ‚ Ð¸ Ð²Ð¾ÑÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÑ‚ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ Ð¸Ð· Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ð°, ÐµÑÐ»Ð¸ Ð¾Ð½Ð¾ Ð±Ñ‹Ð»Ð¾ ÑÐ±Ñ€Ð¾ÑˆÐµÐ½Ð¾\n    // Ð Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ Ð´Ð»Ñ Ð½Ð¾Ð²Ñ‹Ñ… Ñ„Ð¾Ñ€Ð¼ (Ð±ÐµÐ· itemId) Ð¸ Ð¿Ñ€Ð¸ Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ð¸ (Ñ itemId), ÐµÑÐ»Ð¸ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ Ð·Ð°Ð³Ñ€ÑƒÐ·Ð¸Ð» Ð½Ð¾Ð²Ð¾Ðµ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ\n    useEffect(() => {\n      // Ð•ÑÐ»Ð¸ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ Ð·Ð°Ð³Ñ€ÑƒÐ·Ð¸Ð» Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ (Ð´Ð»Ñ Ð½Ð¾Ð²Ð¾Ð¹ Ñ„Ð¾Ñ€Ð¼Ñ‹ Ð¸Ð»Ð¸ Ð¿Ñ€Ð¸ Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ð¸)\n      if (userHasUploadedRef.current) {\n        // Ð¡Ð½Ð°Ñ‡Ð°Ð»Ð° Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ðµ\n        const storedImage = menuImagesStore && menuImagesStore.has(formKey) ? menuImagesStore.get(formKey) : null;\n        if (storedImage) {\n          // Ð’Ð¾ÑÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼ Ð¸Ð· Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ð°\n          uploadedImageRef.current = storedImage;\n          // ÐžÐ±Ð½Ð¾Ð²Ð»ÑÐµÐ¼ ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ðµ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ ÐµÑÐ»Ð¸ Ñ‚ÐµÐºÑƒÑ‰ÐµÐµ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ Ð¾Ñ‚Ð»Ð¸Ñ‡Ð°ÐµÑ‚ÑÑ\n          setImage(prevImage => {\n            if (prevImage !== storedImage) {\n              return storedImage;\n            }\n            return prevImage;\n          });\n          return;\n        }\n\n        // Ð•ÑÐ»Ð¸ Ð² Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ðµ Ð½ÐµÑ‚, Ð½Ð¾ Ð² ref ÐµÑÑ‚ÑŒ - Ð²Ð¾ÑÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼ Ð¸Ð· ref\n        if (uploadedImageRef.current) {\n          // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ð² Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ðµ Ð´Ð»Ñ Ð±ÑƒÐ´ÑƒÑ‰Ð¸Ñ… Ð¿ÐµÑ€ÐµÑ€ÐµÐ½Ð´ÐµÑ€Ð¾Ð²\n          if (menuImagesStore && formKey) {\n            menuImagesStore.set(formKey, uploadedImageRef.current);\n          }\n          // ÐžÐ±Ð½Ð¾Ð²Ð»ÑÐµÐ¼ ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ðµ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ ÐµÑÐ»Ð¸ Ñ‚ÐµÐºÑƒÑ‰ÐµÐµ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ Ð¾Ñ‚Ð»Ð¸Ñ‡Ð°ÐµÑ‚ÑÑ\n          setImage(prevImage => {\n            if (prevImage !== uploadedImageRef.current) {\n              return uploadedImageRef.current;\n            }\n            return prevImage;\n          });\n        }\n      }\n    }); // Ð‘ÐµÐ· Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚ÐµÐ¹ - ÑÑ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°ÐµÑ‚ Ð¿Ñ€Ð¸ ÐºÐ°Ð¶Ð´Ð¾Ð¼ Ñ€ÐµÐ½Ð´ÐµÑ€Ðµ Ð´Ð»Ñ Ð·Ð°Ñ‰Ð¸Ñ‚Ñ‹\n\n    const validateField = (name, value) => {\n      const newErrors = {\n        ...errors\n      };\n      switch (name) {\n        case 'name':\n          if (!value.trim()) newErrors.name = 'ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ Ð¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾';else delete newErrors.name;\n          break;\n        case 'price':\n          if (!value || isNaN(parseFloat(value)) || parseFloat(value) <= 0) newErrors.price = 'Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½ÑƒÑŽ Ñ†ÐµÐ½Ñƒ';else delete newErrors.price;\n          break;\n        case 'weight':\n          if (!value.trim()) newErrors.weight = 'Ð’ÐµÑ/Ð¾Ð±ÑŠÐµÐ¼ Ð¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÐµÐ½';else delete newErrors.weight;\n          break;\n        case 'description':\n          if (!value.trim()) newErrors.description = 'ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ Ð¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾';else delete newErrors.description;\n          break;\n        case 'image':\n          if (!value.trim()) newErrors.image = 'Ð—Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚Ðµ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ';else if (!value.startsWith('data:image')) {\n            newErrors.image = 'Ð—Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚Ðµ Ñ„Ð°Ð¹Ð» Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ';\n          } else delete newErrors.image;\n          break;\n        default:\n          break;\n      }\n      setErrors(newErrors);\n    };\n    const handleChange = e => {\n      const {\n        name,\n        value\n      } = e.target;\n      setFormData(prev => {\n        const updated = {\n          ...prev,\n          [name]: value\n        };\n\n        // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ñ„Ð¾Ñ€Ð¼Ñ‹ Ð² localStorage Ð¿Ñ€Ð¸ ÐºÐ°Ð¶Ð´Ð¾Ð¼ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ð¸\n        // Ð¢Ð¾Ð»ÑŒÐºÐ¾ Ð´Ð»Ñ Ð½Ð¾Ð²Ñ‹Ñ… ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð¾Ð² (Ð½Ðµ Ð¿Ñ€Ð¸ Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ð¸)\n        if (!item) {\n          try {\n            const dataToSave = {\n              ...updated,\n              image: image // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ Ð¸Ð· Ð¾Ñ‚Ð´ÐµÐ»ÑŒÐ½Ð¾Ð³Ð¾ ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ñ\n            };\n            localStorage.setItem(formDataStorageKey, JSON.stringify(dataToSave));\n            console.log('ðŸ’¾ MenuItemForm: Ð”Ð°Ð½Ð½Ñ‹Ðµ Ñ„Ð¾Ñ€Ð¼Ñ‹ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ñ‹ Ð² localStorage');\n          } catch (e) {\n            console.error('ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ Ð´Ð°Ð½Ð½Ñ‹Ñ… Ñ„Ð¾Ñ€Ð¼Ñ‹ Ð² localStorage:', e);\n          }\n        }\n        validateField(name, value);\n        return updated;\n      });\n    };\n    const handleFileChange = async e => {\n      var _e$target$files2;\n      // Ð—Ð°Ñ‰Ð¸Ñ‚Ð° Ð¾Ñ‚ Ð¿Ð¾Ð²Ñ‚Ð¾Ñ€Ð½Ñ‹Ñ… Ð²Ñ‹Ð·Ð¾Ð²Ð¾Ð²\n      if (isProcessingFileRef.current) {\n        return;\n      }\n      const file = (_e$target$files2 = e.target.files) === null || _e$target$files2 === void 0 ? void 0 : _e$target$files2[0];\n      if (!file) {\n        return;\n      }\n\n      // Ð£ÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼ Ñ„Ð»Ð°Ð³ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸\n      isProcessingFileRef.current = true;\n\n      // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ ÑÑÑ‹Ð»ÐºÑƒ Ð½Ð° input Ð´Ð»Ñ Ð¾Ñ‡Ð¸ÑÑ‚ÐºÐ¸ Ð¿Ð¾ÑÐ»Ðµ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸\n      const input = e.target;\n\n      // ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ Ñ‚Ð¸Ð¿ Ñ„Ð°Ð¹Ð»Ð° (MIME-Ñ‚Ð¸Ð¿ Ð¸ Ñ€Ð°ÑÑˆÐ¸Ñ€ÐµÐ½Ð¸Ðµ)\n      if (!isImageFile(file)) {\n        onAlert('Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ñ„Ð°Ð¹Ð» Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ (JPG, PNG, GIF, WEBP, BMP, SVG, HEIC Ð¸ Ð´Ñ€ÑƒÐ³Ð¸Ðµ Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ñ‹)', 'error');\n        isProcessingFileRef.current = false;\n        return;\n      }\n\n      // ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ Ñ€Ð°Ð·Ð¼ÐµÑ€ Ñ„Ð°Ð¹Ð»Ð° (Ð¼Ð°ÐºÑÐ¸Ð¼ÑƒÐ¼ 5MB)\n      if (file.size > 5 * 1024 * 1024) {\n        onAlert('Ð Ð°Ð·Ð¼ÐµÑ€ Ñ„Ð°Ð¹Ð»Ð° Ð½Ðµ Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð¿Ñ€ÐµÐ²Ñ‹ÑˆÐ°Ñ‚ÑŒ 5MB', 'error');\n        isProcessingFileRef.current = false;\n        return;\n      }\n      setIsUploading(true);\n      try {\n        const base64 = await convertFileToBase64(file);\n\n        // Ð£ÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼ Ñ„Ð»Ð°Ð³, Ñ‡Ñ‚Ð¾ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ Ð·Ð°Ð³Ñ€ÑƒÐ·Ð¸Ð» Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ\n        userHasUploadedRef.current = true;\n        uploadedImageRef.current = base64; // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ð² ref Ð´Ð»Ñ Ð·Ð°Ñ‰Ð¸Ñ‚Ñ‹ Ð¾Ñ‚ ÑÐ±Ñ€Ð¾ÑÐ°\n\n        // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ð² Ð³Ð»Ð¾Ð±Ð°Ð»ÑŒÐ½Ð¾Ðµ Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ðµ, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð½Ðµ Ð¿Ð¾Ñ‚ÐµÑ€ÑÑ‚ÑŒ Ð¿Ñ€Ð¸ Ð¿ÐµÑ€ÐµÑ€ÐµÐ½Ð´ÐµÑ€Ðµ\n        if (menuImagesStore && formKey) {\n          menuImagesStore.set(formKey, base64);\n        }\n\n        // ÐžÐ±Ð½Ð¾Ð²Ð»ÑÐµÐ¼ ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ðµ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ Ñ‡ÐµÑ€ÐµÐ· Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾Ðµ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ\n        // Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð³Ð°Ñ€Ð°Ð½Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ, Ñ‡Ñ‚Ð¾ Ð¼Ñ‹ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð°ÐºÑ‚ÑƒÐ°Ð»ÑŒÐ½Ð¾Ðµ ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ðµ\n        setImage(prevImage => {\n          // Ð•ÑÐ»Ð¸ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ ÑƒÐ¶Ðµ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ð¾ Ð¸ ÑÐ¾Ð²Ð¿Ð°Ð´Ð°ÐµÑ‚, Ð½Ðµ Ð¾Ð±Ð½Ð¾Ð²Ð»ÑÐµÐ¼\n          if (prevImage === base64) {\n            return prevImage;\n          }\n          return base64;\n        });\n\n        // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ñ„Ð¾Ñ€Ð¼Ñ‹ Ð² localStorage Ð¿Ñ€Ð¸ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐµ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ\n        // Ð¢Ð¾Ð»ÑŒÐºÐ¾ Ð´Ð»Ñ Ð½Ð¾Ð²Ñ‹Ñ… ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð¾Ð² (Ð½Ðµ Ð¿Ñ€Ð¸ Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ð¸)\n        if (!item) {\n          try {\n            const dataToSave = {\n              ...formData,\n              image: base64\n            };\n            localStorage.setItem(formDataStorageKey, JSON.stringify(dataToSave));\n            console.log('ðŸ’¾ handleFileChange: Ð”Ð°Ð½Ð½Ñ‹Ðµ Ñ„Ð¾Ñ€Ð¼Ñ‹ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ñ‹ Ð² localStorage');\n          } catch (e) {\n            console.error('ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ Ð´Ð°Ð½Ð½Ñ‹Ñ… Ñ„Ð¾Ñ€Ð¼Ñ‹ Ð² localStorage:', e);\n          }\n        }\n\n        // Ð’Ð°Ð»Ð¸Ð´Ð°Ñ†Ð¸ÑŽ Ð²Ñ‹Ð·Ñ‹Ð²Ð°ÐµÐ¼ Ð¿Ð¾ÑÐ»Ðµ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ñ ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ñ\n        setTimeout(() => validateField('image', base64), 0);\n\n        // ÐžÑ‚ÐºÐ»Ð°Ð´Ñ‹Ð²Ð°ÐµÐ¼ Ð²Ñ‹Ð·Ð¾Ð² onAlert, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð´Ð°Ñ‚ÑŒ React Ð²Ñ€ÐµÐ¼Ñ Ð¾Ð±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ðµ\n        setTimeout(() => {\n          // Ð¤Ð¸Ð½Ð°Ð»ÑŒÐ½Ð°Ñ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð¿ÐµÑ€ÐµÐ´ Ð²Ñ‹Ð·Ð¾Ð²Ð¾Ð¼ onAlert\n          setImage(currentImage => {\n            // Ð•ÑÐ»Ð¸ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ Ð±Ñ‹Ð»Ð¾ ÑÐ±Ñ€Ð¾ÑˆÐµÐ½Ð¾, Ð½Ð¾ Ð² ref Ð¾Ð½Ð¾ ÐµÑÑ‚ÑŒ - Ð²Ð¾ÑÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼\n            if (!currentImage && uploadedImageRef.current) {\n              return uploadedImageRef.current;\n            }\n            return currentImage;\n          });\n\n          // Ð’Ñ‹Ð·Ñ‹Ð²Ð°ÐµÐ¼ onAlert Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð¿Ð¾ÑÐ»Ðµ Ð¿Ð¾Ð´Ñ‚Ð²ÐµÑ€Ð¶Ð´ÐµÐ½Ð¸Ñ, Ñ‡Ñ‚Ð¾ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ð¾\n          onAlert('Ð˜Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ Ð·Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½Ð¾', 'success');\n        }, 150);\n      } catch (error) {\n        console.error('ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ñ„Ð°Ð¹Ð»Ð° (MenuItemForm):', error);\n        onAlert('ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ñ„Ð°Ð¹Ð»Ð°', 'error');\n      } finally {\n        setIsUploading(false);\n        // Ð¡Ð±Ñ€Ð°ÑÑ‹Ð²Ð°ÐµÐ¼ Ñ„Ð»Ð°Ð³ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸\n        isProcessingFileRef.current = false;\n\n        // ÐžÑ‡Ð¸Ñ‰Ð°ÐµÐ¼ input Ð¿Ð¾ÑÐ»Ðµ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð¼Ð¾Ð¶Ð½Ð¾ Ð±Ñ‹Ð»Ð¾ Ð²Ñ‹Ð±Ñ€Ð°Ñ‚ÑŒ Ñ‚Ð¾Ñ‚ Ð¶Ðµ Ñ„Ð°Ð¹Ð» ÑÐ½Ð¾Ð²Ð°\n        setTimeout(() => {\n          if (input) {\n            input.value = '';\n          }\n        }, 100);\n      }\n    };\n    const handleSubmit = e => {\n      var _formData$name, _formData$weight, _formData$description;\n      e.preventDefault();\n      e.stopPropagation();\n\n      // Ð’Ð°Ð»Ð¸Ð´Ð°Ñ†Ð¸Ñ Ð²ÑÐµÑ… Ð¿Ð¾Ð»ÐµÐ¹ Ð¿ÐµÑ€ÐµÐ´ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÐºÐ¾Ð¹\n      const newErrors = {};\n\n      // Ð’Ð°Ð»Ð¸Ð´Ð°Ñ†Ð¸Ñ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ\n      if (!image || !image.trim()) {\n        newErrors.image = 'Ð—Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚Ðµ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ';\n      } else if (!image.startsWith('data:image')) {\n        newErrors.image = 'Ð—Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚Ðµ Ñ„Ð°Ð¹Ð» Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ';\n      }\n\n      // Ð’Ð°Ð»Ð¸Ð´Ð°Ñ†Ð¸Ñ Ð¾ÑÑ‚Ð°Ð»ÑŒÐ½Ñ‹Ñ… Ð¿Ð¾Ð»ÐµÐ¹\n      if (!((_formData$name = formData.name) !== null && _formData$name !== void 0 && _formData$name.trim())) {\n        newErrors.name = 'ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ Ð¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾';\n      }\n      if (!formData.price || isNaN(parseFloat(formData.price)) || parseFloat(formData.price) <= 0) {\n        newErrors.price = 'Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½ÑƒÑŽ Ñ†ÐµÐ½Ñƒ';\n      }\n      if (!((_formData$weight = formData.weight) !== null && _formData$weight !== void 0 && _formData$weight.trim())) {\n        newErrors.weight = 'Ð’ÐµÑ/Ð¾Ð±ÑŠÐµÐ¼ Ð¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÐµÐ½';\n      }\n      if (!((_formData$description = formData.description) !== null && _formData$description !== void 0 && _formData$description.trim())) {\n        newErrors.description = 'ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ Ð¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾';\n      }\n      setErrors(newErrors);\n      if (Object.keys(newErrors).length === 0 && image && image.startsWith('data:image')) {\n        // ÐžÑ‡Ð¸Ñ‰Ð°ÐµÐ¼ localStorage Ð¿Ñ€Ð¸ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾Ð¼ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ð¸\n        if (!item) {\n          try {\n            localStorage.removeItem(formDataStorageKey);\n            console.log('ðŸ—‘ï¸ MenuItemForm: Ð”Ð°Ð½Ð½Ñ‹Ðµ Ñ„Ð¾Ñ€Ð¼Ñ‹ ÑƒÐ´Ð°Ð»ÐµÐ½Ñ‹ Ð¸Ð· localStorage Ð¿Ð¾ÑÐ»Ðµ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ');\n          } catch (e) {\n            console.error('ÐžÑˆÐ¸Ð±ÐºÐ° ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ñ Ð´Ð°Ð½Ð½Ñ‹Ñ… Ñ„Ð¾Ñ€Ð¼Ñ‹ Ð¸Ð· localStorage:', e);\n          }\n        }\n\n        // ÐŸÐµÑ€ÐµÐ´Ð°ÐµÐ¼ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ñ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸ÐµÐ¼\n        onSave({\n          ...formData,\n          image: image.trim()\n        });\n      } else {\n        if (!image || !image.startsWith('data:image')) {\n          onAlert('Ð—Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚Ðµ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ', 'error');\n        } else {\n          onAlert('Ð˜ÑÐ¿Ñ€Ð°Ð²ÑŒÑ‚Ðµ Ð¾ÑˆÐ¸Ð±ÐºÐ¸ Ð² Ñ„Ð¾Ñ€Ð¼Ðµ', 'error');\n        }\n      }\n    };\n    const isFormValid = () => {\n      return formData.name && formData.price && formData.weight && formData.description && image && Object.keys(errors).length === 0;\n    };\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-modal\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: item ? 'Ð ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð±Ð»ÑŽÐ´Ð¾' : 'Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð½Ð¾Ð²Ð¾Ðµ Ð±Ð»ÑŽÐ´Ð¾'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1972,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleSubmit,\n          noValidate: true,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1975,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              name: \"name\",\n              value: formData.name,\n              onChange: handleChange,\n              className: errors.name ? 'error' : '',\n              placeholder: \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 \\u0431\\u043B\\u044E\\u0434\\u0430\",\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1976,\n              columnNumber: 15\n            }, this), errors.name && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"error-text\",\n              children: errors.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1985,\n              columnNumber: 31\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1974,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-row\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"\\u0426\\u0435\\u043D\\u0430 (\\u20BD) *\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1990,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                name: \"price\",\n                value: formData.price,\n                onChange: handleChange,\n                className: errors.price ? 'error' : '',\n                placeholder: \"0\",\n                min: \"1\",\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1991,\n                columnNumber: 17\n              }, this), errors.price && /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"error-text\",\n                children: errors.price\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2001,\n                columnNumber: 34\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1989,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"\\u0412\\u0435\\u0441/\\u041E\\u0431\\u044A\\u0435\\u043C *\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2005,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                name: \"weight\",\n                value: formData.weight,\n                onChange: handleChange,\n                className: errors.weight ? 'error' : '',\n                placeholder: \"150 \\u0433 \\u0438\\u043B\\u0438 500 \\u043C\\u043B\",\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2006,\n                columnNumber: 17\n              }, this), errors.weight && /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"error-text\",\n                children: errors.weight\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2015,\n                columnNumber: 35\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2004,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"\\u041A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044F *\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2019,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                name: \"category\",\n                value: formData.category,\n                onChange: handleChange,\n                children: categories.map(cat => /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: cat.key,\n                  children: cat.name\n                }, cat.id, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2026,\n                  columnNumber: 21\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2020,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2018,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1988,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"\\u041E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435 *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2033,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n              name: \"description\",\n              value: formData.description,\n              onChange: handleChange,\n              className: errors.description ? 'error' : '',\n              rows: \"3\",\n              placeholder: \"\\u041E\\u043F\\u0438\\u0448\\u0438\\u0442\\u0435 \\u0431\\u043B\\u044E\\u0434\\u043E\",\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2034,\n              columnNumber: 15\n            }, this), errors.description && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"error-text\",\n              children: errors.description\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2043,\n              columnNumber: 38\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2032,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u044C \\u0444\\u0430\\u0439\\u043B *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2047,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"file-upload-wrapper\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                ref: fileInputRef,\n                type: \"file\",\n                accept: \"image/*\",\n                onChange: handleFileChange,\n                className: \"file-input-hidden\",\n                disabled: isUploading\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2049,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: \"file-upload-button\",\n                onClick: e => {\n                  e.preventDefault();\n                  if (fileInputRef.current) {\n                    console.log('ÐšÐ»Ð¸Ðº Ð¿Ð¾ ÐºÐ½Ð¾Ð¿ÐºÐµ (MenuItemForm), Ð¾Ñ‚ÐºÑ€Ñ‹Ð²Ð°ÐµÐ¼ Ñ„Ð°Ð¹Ð»Ð¾Ð²Ñ‹Ð¹ Ð´Ð¸Ð°Ð»Ð¾Ð³');\n                    fileInputRef.current.click();\n                  } else {\n                    console.error('fileInputRef.current is null (MenuItemForm)');\n                  }\n                },\n                disabled: isUploading,\n                children: isUploading ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"upload-icon\",\n                    children: \"\\u23F3\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2073,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430...\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2074,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"upload-icon\",\n                    children: \"\\uD83D\\uDCF7\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2078,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: \"\\u0412\\u044B\\u0431\\u0440\\u0430\\u0442\\u044C \\u0438\\u0437\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u0435\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2079,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2057,\n                columnNumber: 17\n              }, this), image && !isUploading && /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: \"file-remove-button\",\n                onClick: () => {\n                  userHasUploadedRef.current = false;\n                  uploadedImageRef.current = null;\n                  // ÐžÑ‡Ð¸Ñ‰Ð°ÐµÐ¼ Ð¸Ð· Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ð°\n                  if (menuImagesStore && formKey) {\n                    menuImagesStore.delete(formKey);\n                  }\n                  setImage('');\n                  if (fileInputRef.current) {\n                    fileInputRef.current.value = '';\n                  }\n                  validateField('image', '');\n                },\n                children: \"\\u2715\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2084,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2048,\n              columnNumber: 15\n            }, this), errors.image && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"error-text\",\n              children: errors.image\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2105,\n              columnNumber: 32\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2046,\n            columnNumber: 13\n          }, this), image && image.trim() && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"\\u041F\\u0440\\u0435\\u0434\\u043F\\u0440\\u043E\\u0441\\u043C\\u043E\\u0442\\u0440:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2110,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"photo-preview-modern\",\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: image,\n                alt: \"\\u041F\\u0440\\u0435\\u0434\\u043F\\u0440\\u043E\\u0441\\u043C\\u043E\\u0442\\u0440\",\n                onLoad: () => console.log('Ð˜Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ Ð·Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½Ð¾ Ð² Ð¿Ñ€ÐµÐ´Ð¿Ñ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€ (MenuItemForm)'),\n                onError: e => {\n                  console.error('ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ Ð² Ð¿Ñ€ÐµÐ´Ð¿Ñ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€ (MenuItemForm)');\n                  e.target.src = 'https://via.placeholder.com/300x200/8B7355/FFFFFF?text=Ð¢Ð±Ð¸Ð»Ð¸ÑÐ¸';\n                }\n              }, image.substring(0, 50), false, {\n                fileName: _jsxFileName,\n                lineNumber: 2112,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"photo-preview-overlay\",\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"preview-badge\",\n                  children: \"\\u041F\\u0440\\u0435\\u0434\\u043F\\u0440\\u043E\\u0441\\u043C\\u043E\\u0442\\u0440\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2123,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2122,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2111,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2109,\n            columnNumber: 15\n          }, this), !image && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                color: '#999',\n                fontStyle: 'italic',\n                fontSize: '0.9rem'\n              },\n              children: \"\\u041F\\u0440\\u0435\\u0434\\u043F\\u0440\\u043E\\u0441\\u043C\\u043E\\u0442\\u0440 \\u043F\\u043E\\u044F\\u0432\\u0438\\u0442\\u0441\\u044F \\u043F\\u043E\\u0441\\u043B\\u0435 \\u0432\\u044B\\u0431\\u043E\\u0440\\u0430 \\u0444\\u0430\\u0439\\u043B\\u0430\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2130,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2129,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-actions\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              className: \"save-btn\",\n              disabled: !isFormValid(),\n              children: item ? 'ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ' : 'Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2137,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"cancel-btn\",\n              onClick: onCancel,\n              children: \"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2144,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2136,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1973,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1971,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1970,\n      columnNumber: 7\n    }, this);\n  };\n  _s4(MenuItemForm, \"JcUrGUPUmONIokiaoyrSgHJjT1E=\");\n  const formatPrice = price => {\n    if (typeof price === 'string' && price.includes('â‚½')) {\n      return price;\n    }\n    const priceNum = parseInt(price);\n    return isNaN(priceNum) ? '0 â‚½' : `${priceNum} â‚½`;\n  };\n  const handleImageError = e => {\n    e.target.src = 'https://via.placeholder.com/300x200/8B7355/FFFFFF?text=Ð¢Ð±Ð¸Ð»Ð¸ÑÐ¸';\n  };\n\n  // Ð¡Ñ‚Ð°Ð±Ð¸Ð»Ð¸Ð·Ð¸Ñ€ÑƒÐµÐ¼ photo prop Ð´Ð»Ñ PhotoForm, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð¸Ð·Ð±ÐµÐ¶Ð°Ñ‚ÑŒ Ð¿ÐµÑ€ÐµÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ñ ÐºÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚Ð°\n  const stablePhotoForForm = useMemo(() => {\n    if (editingPhoto === null) return null;\n    return editingPhoto.id ? editingPhoto : null;\n  }, [editingPhoto === null || editingPhoto === void 0 ? void 0 : editingPhoto.id]);\n\n  // Ð•ÑÐ»Ð¸ Ð½Ðµ Ð°Ð²Ñ‚Ð¾Ñ€Ð¸Ð·Ð¾Ð²Ð°Ð½, Ð¿Ð¾ÐºÐ°Ð·Ñ‹Ð²Ð°ÐµÐ¼ Ñ„Ð¾Ñ€Ð¼Ñƒ Ð²Ñ…Ð¾Ð´Ð°\n  if (!isAuthenticated) {\n    return /*#__PURE__*/_jsxDEV(LoginForm, {\n      onLogin: handleLogin\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 2174,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"admin-page\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"admin-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"\\u0410\\u0434\\u043C\\u0438\\u043D-\\u043F\\u0430\\u043D\\u0435\\u043B\\u044C \\\"\\u0422\\u0431\\u0438\\u043B\\u0438\\u0441\\u0438\\\"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2182,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleLogout,\n          className: \"logout-btn\",\n          children: \"\\u0412\\u044B\\u0439\\u0442\\u0438\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2183,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2181,\n        columnNumber: 9\n      }, this), showNotification && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `admin-notification ${notificationType}`,\n        children: [notificationMessage, /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setShowNotification(false),\n          children: \"\\xD7\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2192,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2190,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"admin-tabs\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: `tab-button ${activeTab === 'reservations' ? 'active' : ''}`,\n          onClick: () => handleTabChange('reservations'),\n          children: [\"\\u0417\\u0430\\u044F\\u0432\\u043A\\u0438 (\", reservations.length, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2198,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `tab-button ${activeTab === 'menu' ? 'active' : ''}`,\n          onClick: () => handleTabChange('menu'),\n          children: [\"\\u041C\\u0435\\u043D\\u044E (\", menuItems.length, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2204,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `tab-button ${activeTab === 'categories' ? 'active' : ''}`,\n          onClick: () => handleTabChange('categories'),\n          children: [\"\\u041A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u0438 (\", categories.length, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2210,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `tab-button ${activeTab === 'themes' ? 'active' : ''}`,\n          onClick: () => handleTabChange('themes'),\n          children: [\"\\u0422\\u0435\\u043C\\u044B (\", Object.keys(themes).length + 1, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2216,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `tab-button ${activeTab === 'photos' ? 'active' : ''}`,\n          onClick: () => handleTabChange('photos'),\n          children: [\"\\u0424\\u043E\\u0442\\u043E (\", photos.length, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2222,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2197,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"tab-content\",\n        children: [activeTab === 'reservations' && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"reservations-tab\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"\\u0417\\u0430\\u044F\\u0432\\u043A\\u0438 \\u043D\\u0430 \\u0431\\u0440\\u043E\\u043D\\u0438\\u0440\\u043E\\u0432\\u0430\\u043D\\u0438\\u0435\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2234,\n            columnNumber: 15\n          }, this), reservations.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"no-data\",\n            children: \"\\u041D\\u0435\\u0442 \\u0437\\u0430\\u044F\\u0432\\u043E\\u043A \\u043D\\u0430 \\u0431\\u0440\\u043E\\u043D\\u044C\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2237,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"reservations-list\",\n            children: reservations.map(reservation => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"reservation-card\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"reservation-header\",\n                children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                  children: reservation.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2243,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"reservation-date\",\n                  children: new Date(reservation.createdAt).toLocaleDateString('ru-RU')\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2244,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2242,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"reservation-details\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"\\u0422\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2249,\n                    columnNumber: 28\n                  }, this), \" \", reservation.phone]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2249,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"\\u0414\\u0430\\u0442\\u0430:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2250,\n                    columnNumber: 28\n                  }, this), \" \", reservation.date, \" \\u0432 \", reservation.time]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2250,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"\\u0413\\u043E\\u0441\\u0442\\u0435\\u0439:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2251,\n                    columnNumber: 28\n                  }, this), \" \", reservation.guests]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2251,\n                  columnNumber: 25\n                }, this), reservation.comments && /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"\\u041A\\u043E\\u043C\\u043C\\u0435\\u043D\\u0442\\u0430\\u0440\\u0438\\u0439:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2253,\n                    columnNumber: 30\n                  }, this), \" \", reservation.comments]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2253,\n                  columnNumber: 27\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2248,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => {\n                  if (window.confirm('Ð’Ñ‹ ÑƒÐ²ÐµÑ€ÐµÐ½Ñ‹, Ñ‡Ñ‚Ð¾ Ñ…Ð¾Ñ‚Ð¸Ñ‚Ðµ ÑƒÐ´Ð°Ð»Ð¸Ñ‚ÑŒ ÑÑ‚Ñƒ Ð·Ð°ÑÐ²ÐºÑƒ?')) {\n                    deleteReservation(reservation.id);\n                  }\n                },\n                className: \"delete-btn\",\n                children: \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2256,\n                columnNumber: 23\n              }, this)]\n            }, reservation.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2241,\n              columnNumber: 21\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2239,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2233,\n          columnNumber: 13\n        }, this), activeTab === 'menu' && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"menu-tab\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"menu-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              children: \"\\u0423\\u043F\\u0440\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435 \\u043C\\u0435\\u043D\\u044E\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2276,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setEditingItem({}),\n              className: \"add-btn\",\n              children: \"+ \\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0431\\u043B\\u044E\\u0434\\u043E\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2277,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2275,\n            columnNumber: 15\n          }, this), menuItems.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"no-data\",\n            children: \"\\u041C\\u0435\\u043D\\u044E \\u043F\\u0443\\u0441\\u0442\\u043E. \\u0414\\u043E\\u0431\\u0430\\u0432\\u044C\\u0442\\u0435 \\u043D\\u043E\\u0432\\u044B\\u0435 \\u0431\\u043B\\u044E\\u0434\\u0430 \\u0447\\u0435\\u0440\\u0435\\u0437 \\u0444\\u043E\\u0440\\u043C\\u0443 \\u0432\\u044B\\u0448\\u0435.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2286,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"menu-items-grid\",\n            children: menuItems.map(item => {\n              var _categories$find;\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"menu-item-card\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"item-image\",\n                  children: /*#__PURE__*/_jsxDEV(\"img\", {\n                    src: item.image,\n                    alt: item.name,\n                    onError: handleImageError\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2292,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2291,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"item-content\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                    children: item.name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2299,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"item-price\",\n                    children: [formatPrice(item.price), \" \\xB7 \", item.weight]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2300,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"item-description\",\n                    children: item.description\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2301,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"item-category\",\n                    children: ((_categories$find = categories.find(cat => cat.key === item.category)) === null || _categories$find === void 0 ? void 0 : _categories$find.name) || item.category\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2302,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2298,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"item-actions\",\n                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => startEditing(item),\n                    className: \"edit-btn\",\n                    children: \"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2307,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => {\n                      if (window.confirm('Ð’Ñ‹ ÑƒÐ²ÐµÑ€ÐµÐ½Ñ‹, Ñ‡Ñ‚Ð¾ Ñ…Ð¾Ñ‚Ð¸Ñ‚Ðµ ÑƒÐ´Ð°Ð»Ð¸Ñ‚ÑŒ ÑÑ‚Ð¾ Ð±Ð»ÑŽÐ´Ð¾?')) {\n                        deleteMenuItem(item.id);\n                      }\n                    },\n                    className: \"delete-btn\",\n                    children: \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2313,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2306,\n                  columnNumber: 23\n                }, this)]\n              }, item.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2290,\n                columnNumber: 21\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2288,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2274,\n          columnNumber: 13\n        }, this), activeTab === 'categories' && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"categories-tab\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"categories-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              children: \"\\u0423\\u043F\\u0440\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435 \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044F\\u043C\\u0438\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2334,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: addCategory,\n              className: \"add-btn\",\n              children: \"+ \\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044E\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2335,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2333,\n            columnNumber: 15\n          }, this), categories.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"no-data\",\n            children: \"\\u041A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u0439 \\u043D\\u0435\\u0442. \\u0414\\u043E\\u0431\\u0430\\u0432\\u044C\\u0442\\u0435 \\u043D\\u043E\\u0432\\u0443\\u044E \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044E.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2344,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"categories-list\",\n            children: categories.map((category, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"category-card\",\n              children: editingCategory && editingCategory.id === category.id ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"category-edit-form\",\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  value: editingCategory.name,\n                  onChange: e => setEditingCategory({\n                    ...editingCategory,\n                    name: e.target.value\n                  }),\n                  className: \"category-name-input\",\n                  placeholder: \"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u0438\",\n                  autoFocus: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2351,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"category-edit-actions\",\n                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => updateCategory(editingCategory),\n                    className: \"save-btn\",\n                    children: \"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2360,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => setEditingCategory(null),\n                    className: \"cancel-btn\",\n                    children: \"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2366,\n                    columnNumber: 29\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2359,\n                  columnNumber: 27\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2350,\n                columnNumber: 25\n              }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"category-info\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                    children: category.name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2377,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"category-key\",\n                    children: [\"\\u041A\\u043B\\u044E\\u0447: \", category.key]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2378,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"category-order\",\n                    children: [\"\\u041F\\u043E\\u0440\\u044F\\u0434\\u043E\\u043A: \", category.order]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2379,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"category-items-count\",\n                    children: [\"\\u0411\\u043B\\u044E\\u0434 \\u0432 \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u0438: \", menuItems.filter(item => item.category === category.key).length]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2380,\n                    columnNumber: 29\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2376,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"category-actions\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"category-order-controls\",\n                    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: () => moveCategory(category.id, 'up'),\n                      className: \"move-btn\",\n                      disabled: index === 0,\n                      title: \"\\u041F\\u0435\\u0440\\u0435\\u043C\\u0435\\u0441\\u0442\\u0438\\u0442\\u044C \\u0432\\u0432\\u0435\\u0440\\u0445\",\n                      children: \"\\u2191\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2386,\n                      columnNumber: 31\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: () => moveCategory(category.id, 'down'),\n                      className: \"move-btn\",\n                      disabled: index === categories.length - 1,\n                      title: \"\\u041F\\u0435\\u0440\\u0435\\u043C\\u0435\\u0441\\u0442\\u0438\\u0442\\u044C \\u0432\\u043D\\u0438\\u0437\",\n                      children: \"\\u2193\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2394,\n                      columnNumber: 31\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2385,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => setEditingCategory({\n                      ...category\n                    }),\n                    className: \"edit-btn\",\n                    children: \"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2403,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => {\n                      if (window.confirm('Ð’Ñ‹ ÑƒÐ²ÐµÑ€ÐµÐ½Ñ‹, Ñ‡Ñ‚Ð¾ Ñ…Ð¾Ñ‚Ð¸Ñ‚Ðµ ÑƒÐ´Ð°Ð»Ð¸Ñ‚ÑŒ ÑÑ‚Ñƒ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸ÑŽ?')) {\n                        deleteCategory(category.id);\n                      }\n                    },\n                    className: \"delete-btn\",\n                    children: \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2409,\n                    columnNumber: 29\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2384,\n                  columnNumber: 27\n                }, this)]\n              }, void 0, true)\n            }, category.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2348,\n              columnNumber: 21\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2346,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2332,\n          columnNumber: 13\n        }, this), activeTab === 'themes' && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"themes-tab\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"themes-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              children: \"\\u0423\\u043F\\u0440\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435 \\u0442\\u0435\\u043C\\u0430\\u043C\\u0438\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2432,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: addTheme,\n              className: \"add-btn\",\n              children: \"+ \\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0442\\u0435\\u043C\\u0443\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2433,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2431,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"themes-list\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: `theme-card ${currentTheme === 'default' ? 'active' : ''}`,\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"theme-preview\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"theme-preview-colors\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"preview-color\",\n                    style: {\n                      background: '#8B7355'\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2446,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"preview-color\",\n                    style: {\n                      background: '#A8D8EA'\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2447,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"preview-color\",\n                    style: {\n                      background: '#D4B896'\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2448,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2445,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2444,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"theme-info\",\n                children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                  children: \"\\u041F\\u043E \\u0443\\u043C\\u043E\\u043B\\u0447\\u0430\\u043D\\u0438\\u044E\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2452,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"theme-description\",\n                  children: \"\\u0411\\u0430\\u0437\\u043E\\u0432\\u0430\\u044F \\u0437\\u0435\\u043C\\u043B\\u044F\\u043D\\u0430\\u044F \\u0442\\u0435\\u043C\\u0430\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2453,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2451,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"theme-actions\",\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => applyTheme('default'),\n                  className: `apply-btn ${currentTheme === 'default' ? 'active' : ''}`,\n                  children: currentTheme === 'default' ? 'âœ“ ÐŸÑ€Ð¸Ð¼ÐµÐ½ÐµÐ½Ð°' : 'ÐŸÑ€Ð¸Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2456,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2455,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2443,\n              columnNumber: 17\n            }, this), Object.values(defaultThemes).map(theme => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `theme-card ${currentTheme === theme.id ? 'active' : ''}`,\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"theme-preview\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"theme-preview-colors\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"preview-color\",\n                    style: {\n                      background: theme.primaryColor\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2470,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"preview-color\",\n                    style: {\n                      background: theme.secondaryColor\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2471,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"preview-color\",\n                    style: {\n                      background: theme.accentColor\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2472,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2469,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2468,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"theme-info\",\n                children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                  children: theme.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2476,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"theme-description\",\n                  children: \"\\u0411\\u0430\\u0437\\u043E\\u0432\\u0430\\u044F \\u0442\\u0435\\u043C\\u0430\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2477,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2475,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"theme-actions\",\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => applyTheme(theme.id),\n                  className: `apply-btn ${currentTheme === theme.id ? 'active' : ''}`,\n                  children: currentTheme === theme.id ? 'âœ“ ÐŸÑ€Ð¸Ð¼ÐµÐ½ÐµÐ½Ð°' : 'ÐŸÑ€Ð¸Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2480,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2479,\n                columnNumber: 21\n              }, this)]\n            }, theme.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2467,\n              columnNumber: 19\n            }, this)), Object.values(themes).filter(theme => !defaultThemes[theme.id]).map(theme => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `theme-card ${currentTheme === theme.id ? 'active' : ''}`,\n              children: editingTheme && editingTheme.id === theme.id ? /*#__PURE__*/_jsxDEV(ThemeEditForm, {\n                theme: editingTheme,\n                onSave: updateTheme,\n                onCancel: () => setEditingTheme(null)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2494,\n                columnNumber: 23\n              }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"theme-preview\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"theme-preview-colors\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"preview-color\",\n                      style: {\n                        background: theme.primaryColor\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2503,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"preview-color\",\n                      style: {\n                        background: theme.secondaryColor\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2504,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"preview-color\",\n                      style: {\n                        background: theme.accentColor\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2505,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2502,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2501,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"theme-info\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                    children: theme.name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2509,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"theme-description\",\n                    children: \"\\u041F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044C\\u0441\\u043A\\u0430\\u044F \\u0442\\u0435\\u043C\\u0430\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2510,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2508,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"theme-actions\",\n                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => applyTheme(theme.id),\n                    className: `apply-btn ${currentTheme === theme.id ? 'active' : ''}`,\n                    children: currentTheme === theme.id ? 'âœ“ ÐŸÑ€Ð¸Ð¼ÐµÐ½ÐµÐ½Ð°' : 'ÐŸÑ€Ð¸Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2513,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => setEditingTheme({\n                      ...theme\n                    }),\n                    className: \"edit-btn\",\n                    children: \"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2519,\n                    columnNumber: 27\n                  }, this), !defaultThemes[theme.id] && /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => {\n                      if (window.confirm('Ð’Ñ‹ ÑƒÐ²ÐµÑ€ÐµÐ½Ñ‹, Ñ‡Ñ‚Ð¾ Ñ…Ð¾Ñ‚Ð¸Ñ‚Ðµ ÑƒÐ´Ð°Ð»Ð¸Ñ‚ÑŒ ÑÑ‚Ñƒ Ñ‚ÐµÐ¼Ñƒ?')) {\n                        deleteTheme(theme.id);\n                      }\n                    },\n                    className: \"delete-btn\",\n                    children: \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2526,\n                    columnNumber: 29\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2512,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true)\n            }, theme.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2492,\n              columnNumber: 19\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2441,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2430,\n          columnNumber: 13\n        }, this), activeTab === 'photos' && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"photos-tab\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"photos-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              children: \"\\u0423\\u043F\\u0440\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435 \\u0444\\u043E\\u0442\\u043E\\u0433\\u0440\\u0430\\u0444\\u0438\\u044F\\u043C\\u0438\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2549,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                // Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ ÑÑ‚Ð°Ð±Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ Ð¾Ð±ÑŠÐµÐºÑ‚ Ð´Ð»Ñ Ð½Ð¾Ð²Ð¾Ð¹ Ñ„Ð¾Ñ€Ð¼Ñ‹\n                setEditingPhoto(newPhotoObjectRef.current);\n              },\n              className: \"add-btn\",\n              children: \"+ \\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0444\\u043E\\u0442\\u043E\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2550,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2548,\n            columnNumber: 15\n          }, this), photos.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"no-data\",\n            children: \"\\u0424\\u043E\\u0442\\u043E\\u0433\\u0440\\u0430\\u0444\\u0438\\u0439 \\u043D\\u0435\\u0442. \\u0414\\u043E\\u0431\\u0430\\u0432\\u044C\\u0442\\u0435 \\u043D\\u043E\\u0432\\u0443\\u044E \\u0444\\u043E\\u0442\\u043E\\u0433\\u0440\\u0430\\u0444\\u0438\\u044E.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2562,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"photos-grid\",\n            children: photos.map(photo => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"photo-card\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"photo-image\",\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: photo.image,\n                  alt: photo.caption || 'Ð¤Ð¾Ñ‚Ð¾',\n                  onError: e => {\n                    e.target.src = 'https://via.placeholder.com/300x200/8B7355/FFFFFF?text=Ð¢Ð±Ð¸Ð»Ð¸ÑÐ¸';\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2568,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2567,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"photo-info\",\n                children: [photo.caption && /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"photo-caption\",\n                  children: photo.caption\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2578,\n                  columnNumber: 27\n                }, this), !photo.caption && /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"photo-caption-empty\",\n                  children: \"\\u0411\\u0435\\u0437 \\u043F\\u043E\\u0434\\u043F\\u0438\\u0441\\u0438\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2581,\n                  columnNumber: 27\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2576,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"photo-actions\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => setEditingPhoto({\n                    ...photo\n                  }),\n                  className: \"edit-btn\",\n                  children: \"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2585,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => {\n                    if (window.confirm('Ð’Ñ‹ ÑƒÐ²ÐµÑ€ÐµÐ½Ñ‹, Ñ‡Ñ‚Ð¾ Ñ…Ð¾Ñ‚Ð¸Ñ‚Ðµ ÑƒÐ´Ð°Ð»Ð¸Ñ‚ÑŒ ÑÑ‚Ð¾ Ñ„Ð¾Ñ‚Ð¾?')) {\n                      deletePhoto(photo.id);\n                    }\n                  },\n                  className: \"delete-btn\",\n                  children: \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2591,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2584,\n                columnNumber: 23\n              }, this)]\n            }, photo.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2566,\n              columnNumber: 21\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2564,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2547,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2231,\n        columnNumber: 9\n      }, this), editingItem !== null && /*#__PURE__*/_jsxDEV(MenuItemForm, {\n        // Ð¡Ñ‚Ð°Ð±Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ key\n        item: editingItem.id ? editingItem : null,\n        onSave: saveMenuItem,\n        onCancel: cancelEditing,\n        onAlert: showAlert,\n        menuImagesStore: menuImagesStore.current // ÐŸÐµÑ€ÐµÐ´Ð°ÐµÐ¼ Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ðµ Ð´Ð»Ñ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ñ\n        ,\n        formKey: (editingItem === null || editingItem === void 0 ? void 0 : editingItem.id) || newMenuItemKeyRef.current // Ð£Ð½Ð¸ÐºÐ°Ð»ÑŒÐ½Ñ‹Ð¹ ÐºÐ»ÑŽÑ‡ Ñ„Ð¾Ñ€Ð¼Ñ‹\n      }, (editingItem === null || editingItem === void 0 ? void 0 : editingItem.id) || newMenuItemKeyRef.current, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2612,\n        columnNumber: 11\n      }, this), editingPhoto !== null && /*#__PURE__*/_jsxDEV(PhotoForm, {\n        // Ð¡Ñ‚Ð°Ð±Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ key\n        photo: stablePhotoForForm,\n        onSave: savePhoto,\n        onCancel: cancelPhotoEditing,\n        onAlert: showAlert,\n        uploadedImagesStore: uploadedImagesStore.current // ÐŸÐµÑ€ÐµÐ´Ð°ÐµÐ¼ Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ðµ Ð´Ð»Ñ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ñ\n        ,\n        formKey: (editingPhoto === null || editingPhoto === void 0 ? void 0 : editingPhoto.id) || newPhotoKeyRef.current // Ð£Ð½Ð¸ÐºÐ°Ð»ÑŒÐ½Ñ‹Ð¹ ÐºÐ»ÑŽÑ‡ Ñ„Ð¾Ñ€Ð¼Ñ‹\n      }, (editingPhoto === null || editingPhoto === void 0 ? void 0 : editingPhoto.id) || newPhotoKeyRef.current, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2625,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 2179,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 2178,\n    columnNumber: 5\n  }, this);\n};\n_s5(Admin, \"5m53iLuUvnp1lTH5eDM0IF0GrAU=\");\n_c = Admin;\nexport default Admin;\nvar _c;\n$RefreshReg$(_c, \"Admin\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useMemo","useCallback","autoSaveReservations","autoSaveMenu","autoSavePhotos","loadTheme","loadMenu","loadReservations","loadCategories","loadPhotos","saveTheme","saveCategories","defaultMenu","jsxDEV","_jsxDEV","Fragment","_Fragment","defaultCategories","id","key","name","order","defaultThemes","elegant","primaryColor","primaryLight","primaryDark","secondaryColor","secondaryLight","secondaryDark","accentColor","backgroundColor","textColor","textLight","Admin","_s5","_s","$RefreshSig$","_s2","_s3","_s4","generateUniqueId","existingItems","newId","attempts","maxAttempts","Date","now","Math","floor","random","exists","some","item","console","warn","isAuthenticated","setIsAuthenticated","localStorage","getItem","activeTab","setActiveTab","reservations","setReservations","menuItems","setMenuItems","categories","setCategories","themes","setThemes","currentTheme","setCurrentTheme","photos","setPhotos","editingItem","setEditingItem","editingCategory","setEditingCategory","editingTheme","setEditingTheme","editingPhoto","setEditingPhoto","newPhotoKeyRef","newPhotoObjectRef","uploadedImagesStore","Map","newMenuItemKeyRef","menuImagesStore","showNotification","setShowNotification","notificationMessage","setNotificationMessage","notificationType","setNotificationType","handleTabChange","tab","formKey","current","has","delete","loadCategoriesFromFile","loadedCategories","Array","isArray","sorted","sort","a","b","log","length","stored","parsed","JSON","parse","e","error","loadReservationsFromFile","loadedReservations","loadMenuItemsFromFile","loadedMenu","metadataStr","metadata","loadThemesFromFile","themeData","allThemes","currentThemeId","applyThemeOnLoad","themeId","themesToUse","document","documentElement","className","root","style","removeProperty","theme","setProperty","loadPhotosFromFile","loadedPhotos","saveCategoriesToFile","updatedCategories","saveResult","success","showAlert","message","addCategory","newCategory","updated","updateCategory","category","trim","map","cat","deleteCategory","categoryToDelete","find","itemsInCategory","filter","forEach","index","moveCategory","direction","findIndex","newIndex","type","setTimeout","handleLogin","username","password","setItem","handleLogout","removeItem","applyTheme","saveThemes","updatedThemes","hexToRgb","hex","result","exec","r","parseInt","g","rgbToHex","x","toString","join","lightenColor","percent","rgb","min","round","darkenColor","max","addTheme","basePrimaryColor","newTheme","updateTheme","updatedTheme","deleteTheme","deleteReservation","res","deleteMenuItem","itemToDelete","hasImage","image","startsWith","imageSize","cancelPhotoEditing","savePhoto","photo","hasValidImage","oldPhoto","p","imageChanged","caption","oldImageSize","newImageSize","newPhoto","validPhotos","deletePhoto","photoToDelete","validateMenuItem","price","isNaN","parseFloat","weight","description","saveMenuItem","imageLength","imageStart","substring","formattedItem","replace","updatedItems","oldItem","mi","menuItem","newItem","startEditing","cancelEditing","formDataStorageKey","ThemeEditForm","onSave","onCancel","formData","setFormData","hexToRgbLocal","rgbToHexLocal","lightenColorLocal","darkenColorLocal","handleChange","field","value","handleSubmit","preventDefault","colorFields","label","children","onSubmit","fileName","_jsxFileName","lineNumber","columnNumber","onChange","target","placeholder","required","background","onClick","isImageFile","file","imageExtensions","toLowerCase","extension","split","pop","includes","convertFileToBase64","Promise","resolve","reject","reader","FileReader","onload","onerror","readAsDataURL","LoginForm","onLogin","setUsername","setPassword","setError","htmlFor","autoFocus","PhotoForm","onAlert","photoId","photoIdRef","isInitialMountRef","setImage","get","setCaption","isUploading","setIsUploading","isDragging","setIsDragging","fileInputRef","userHasUploadedRef","uploadedImageRef","isProcessingFileRef","isInitialMount","storedImage","set","processFile","size","base64","prevImage","currentImage","handleFileChange","_e$target$files","files","input","handleDragOver","stopPropagation","handleDragLeave","handleDrop","_e$dataTransfer$files","dataTransfer","photoData","undefined","noValidate","onDragOver","onDragLeave","onDrop","ref","accept","disabled","click","src","alt","onError","color","fontStyle","fontSize","MenuItemForm","defaultCategory","itemId","itemIdRef","savedFormData","errors","setErrors","validateField","newErrors","prev","dataToSave","stringify","_e$target$files2","_formData$name","_formData$weight","_formData$description","Object","keys","isFormValid","rows","onLoad","formatPrice","priceNum","handleImageError","stablePhotoForForm","reservation","createdAt","toLocaleDateString","phone","date","time","guests","comments","window","confirm","_categories$find","title","values","_c","$RefreshReg$"],"sources":["C:/restaurant-website (2)/restaurant-website/Backend/ClientApp/src/pages/Admin.js"],"sourcesContent":["import React, { useState, useEffect, useRef, useMemo, useCallback } from 'react';\nimport './Admin.css';\nimport { \n  autoSaveReservations, \n  autoSaveMenu, \n  autoSavePhotos, \n  loadTheme, \n  loadMenu, \n  loadReservations, \n  loadCategories,\n  loadPhotos,\n  saveTheme,\n  saveCategories\n} from '../utils/fileStorage';\nimport { defaultMenu } from '../data/defaultMenu';\n\n// Ð‘Ð°Ð·Ð¾Ð²Ñ‹Ðµ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸ Ð¿Ð¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ\nconst defaultCategories = [\n  { id: 1, key: 'cold', name: 'Ð¥Ð¾Ð»Ð¾Ð´Ð½Ñ‹Ðµ Ð·Ð°ÐºÑƒÑÐºÐ¸', order: 1 },\n  { id: 2, key: 'salads', name: 'Ð¡Ð°Ð»Ð°Ñ‚Ñ‹', order: 2 },\n  { id: 3, key: 'hot', name: 'Ð“Ð¾Ñ€ÑÑ‡Ð¸Ðµ Ð±Ð»ÑŽÐ´Ð°', order: 3 },\n  { id: 4, key: 'drinks', name: 'ÐÐ°Ð¿Ð¸Ñ‚ÐºÐ¸', order: 4 }\n];\n\n// Ð‘Ð°Ð·Ð¾Ð²Ñ‹Ðµ Ñ‚ÐµÐ¼Ñ‹ Ð¿Ð¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ\nconst defaultThemes = {\n  elegant: {\n    id: 'elegant',\n    name: 'Ð­Ð»ÐµÐ³Ð°Ð½Ñ‚Ð½Ð°Ñ ÑÐ¸Ð½ÑÑ',\n    primaryColor: '#2C3E50',\n    primaryLight: '#34495E',\n    primaryDark: '#1C2833',\n    secondaryColor: '#3498DB',\n    secondaryLight: '#5DADE2',\n    secondaryDark: '#2980B9',\n    accentColor: '#E74C3C',\n    backgroundColor: '#ECF0F1',\n    textColor: '#2C3E50',\n    textLight: '#566573'\n  }\n};\n\nconst Admin = () => {\n  // Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ Ð´Ð»Ñ Ð³ÐµÐ½ÐµÑ€Ð°Ñ†Ð¸Ð¸ ÑƒÐ½Ð¸ÐºÐ°Ð»ÑŒÐ½Ð¾Ð³Ð¾ ID\n  const generateUniqueId = (existingItems) => {\n    let newId;\n    let attempts = 0;\n    const maxAttempts = 100;\n    \n    do {\n      // Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ timestamp + ÑÐ»ÑƒÑ‡Ð°Ð¹Ð½Ð¾Ðµ Ñ‡Ð¸ÑÐ»Ð¾ Ð´Ð»Ñ ÑƒÐ½Ð¸ÐºÐ°Ð»ÑŒÐ½Ð¾ÑÑ‚Ð¸\n      newId = Date.now() + Math.floor(Math.random() * 1000);\n      attempts++;\n      \n      // ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼, Ñ‡Ñ‚Ð¾ Ñ‚Ð°ÐºÐ¾Ð³Ð¾ ID Ð½ÐµÑ‚ Ð² ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÑŽÑ‰Ð¸Ñ… ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð°Ñ…\n      const exists = existingItems.some(item => item.id === newId);\n      if (!exists) {\n        return newId;\n      }\n    } while (attempts < maxAttempts);\n    \n    // Ð•ÑÐ»Ð¸ Ð½Ðµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ Ð½Ð°Ð¹Ñ‚Ð¸ ÑƒÐ½Ð¸ÐºÐ°Ð»ÑŒÐ½Ñ‹Ð¹ ID Ð·Ð° 100 Ð¿Ð¾Ð¿Ñ‹Ñ‚Ð¾Ðº, Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð¿Ñ€Ð¾ÑÑ‚Ð¾ timestamp\n    console.warn('âš ï¸ ÐÐµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ ÑÐ³ÐµÐ½ÐµÑ€Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ ÑƒÐ½Ð¸ÐºÐ°Ð»ÑŒÐ½Ñ‹Ð¹ ID Ð·Ð° 100 Ð¿Ð¾Ð¿Ñ‹Ñ‚Ð¾Ðº, Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ timestamp');\n    return Date.now();\n  };\n\n  // ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ Ð°Ð²Ñ‚Ð¾Ñ€Ð¸Ð·Ð°Ñ†Ð¸ÑŽ Ð¸Ð· localStorage Ð¿Ñ€Ð¸ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐµ\n  const [isAuthenticated, setIsAuthenticated] = useState(() => {\n    return localStorage.getItem('admin-authenticated') === 'true';\n  });\n  \n  const [activeTab, setActiveTab] = useState('reservations');\n  const [reservations, setReservations] = useState([]);\n  const [menuItems, setMenuItems] = useState([]);\n  const [categories, setCategories] = useState([]);\n  const [themes, setThemes] = useState({});\n  const [currentTheme, setCurrentTheme] = useState('default');\n  const [photos, setPhotos] = useState([]);\n  const [editingItem, setEditingItem] = useState(null);\n  const [editingCategory, setEditingCategory] = useState(null);\n  const [editingTheme, setEditingTheme] = useState(null);\n  const [editingPhoto, setEditingPhoto] = useState(null);\n  const newPhotoKeyRef = useRef(`new-photo-${Date.now()}`); // Ð¡Ñ‚Ð°Ð±Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ key Ð´Ð»Ñ Ð½Ð¾Ð²Ð¾Ð¹ Ñ„Ð¾Ñ€Ð¼Ñ‹\n  const newPhotoObjectRef = useRef({}); // Ð¡Ñ‚Ð°Ð±Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ Ð¾Ð±ÑŠÐµÐºÑ‚ Ð´Ð»Ñ Ð½Ð¾Ð²Ð¾Ð¹ Ñ„Ð¾Ñ€Ð¼Ñ‹\n  // Ð“Ð»Ð¾Ð±Ð°Ð»ÑŒÐ½Ð¾Ðµ Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ðµ Ð´Ð»Ñ Ð·Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½Ð½Ñ‹Ñ… Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ð¹ (Ð²Ð½Ðµ ÐºÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚Ð°, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð½Ðµ Ñ‚ÐµÑ€ÑÑ‚ÑŒ Ð¿Ñ€Ð¸ Ð¿ÐµÑ€ÐµÑ€ÐµÐ½Ð´ÐµÑ€Ðµ)\n  const uploadedImagesStore = useRef(new Map()); // key -> base64 image\n  const newMenuItemKeyRef = useRef(`new-menu-item-${Date.now()}`); // Ð¡Ñ‚Ð°Ð±Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ key Ð´Ð»Ñ Ð½Ð¾Ð²Ð¾Ð¹ Ñ„Ð¾Ñ€Ð¼Ñ‹ Ð¼ÐµÐ½ÑŽ\n  // Ð“Ð»Ð¾Ð±Ð°Ð»ÑŒÐ½Ð¾Ðµ Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ðµ Ð´Ð»Ñ Ð·Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½Ð½Ñ‹Ñ… Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ð¹ Ð¼ÐµÐ½ÑŽ\n  const menuImagesStore = useRef(new Map()); // key -> base64 image\n  const [showNotification, setShowNotification] = useState(false);\n  const [notificationMessage, setNotificationMessage] = useState('');\n  const [notificationType, setNotificationType] = useState('success');\n\n  // Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ Ð´Ð»Ñ Ð¿ÐµÑ€ÐµÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ñ Ð²ÐºÐ»Ð°Ð´Ð¾Ðº Ñ Ð·Ð°ÐºÑ€Ñ‹Ñ‚Ð¸ÐµÐ¼ Ð²ÑÐµÑ… Ð¼Ð¾Ð´Ð°Ð»ÑŒÐ½Ñ‹Ñ… Ð¾ÐºÐ¾Ð½\n  const handleTabChange = (tab) => {\n    // Ð—Ð°ÐºÑ€Ñ‹Ð²Ð°ÐµÐ¼ Ð²ÑÐµ Ð¾Ñ‚ÐºÑ€Ñ‹Ñ‚Ñ‹Ðµ Ð¼Ð¾Ð´Ð°Ð»ÑŒÐ½Ñ‹Ðµ Ð¾ÐºÐ½Ð°\n    // ÐžÑ‡Ð¸Ñ‰Ð°ÐµÐ¼ Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ðµ Ð¿Ñ€Ð¸ Ð¿ÐµÑ€ÐµÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ð¸ Ð²ÐºÐ»Ð°Ð´Ð¾Ðº\n    if (editingItem) {\n      const formKey = editingItem?.id || newMenuItemKeyRef.current;\n      if (menuImagesStore.current.has(formKey)) {\n        menuImagesStore.current.delete(formKey);\n      }\n    }\n    setEditingItem(null);\n    setEditingCategory(null);\n    setEditingTheme(null);\n    if (editingPhoto) {\n      const formKey = editingPhoto?.id || newPhotoKeyRef.current;\n      if (uploadedImagesStore.current.has(formKey)) {\n        uploadedImagesStore.current.delete(formKey);\n      }\n    }\n    setEditingPhoto(null);\n    // ÐŸÐµÑ€ÐµÐºÐ»ÑŽÑ‡Ð°ÐµÐ¼ Ð²ÐºÐ»Ð°Ð´ÐºÑƒ\n    setActiveTab(tab);\n  };\n\n  useEffect(() => {\n    const loadCategoriesFromFile = async () => {\n      try {\n        const loadedCategories = await loadCategories();\n        if (Array.isArray(loadedCategories)) {\n          // ÐŸÑƒÑÑ‚Ð¾Ð¹ Ð¼Ð°ÑÑÐ¸Ð² - ÑÑ‚Ð¾ Ð²Ð°Ð»Ð¸Ð´Ð½Ð¾Ðµ ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ðµ (Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ ÑƒÐ´Ð°Ð»Ð¸Ð» Ð²ÑÐµ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸)\n          // ÐÐµ Ð¿Ð¾Ð´ÑÑ‚Ð°Ð²Ð»ÑÐµÐ¼ Ð´ÐµÑ„Ð¾Ð»Ñ‚Ð½Ñ‹Ðµ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸, ÐµÑÐ»Ð¸ Ð¼Ð°ÑÑÐ¸Ð² Ð¿Ñ€Ð¾ÑÑ‚Ð¾ Ð¿ÑƒÑÑ‚Ð¾Ð¹\n          const sorted = [...loadedCategories].sort((a, b) => a.order - b.order);\n          setCategories(sorted);\n          console.log(`ðŸ“¥ loadCategoriesFromFile: Ð—Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½Ð¾ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¹: ${sorted.length}`);\n        } else {\n          // Ð•ÑÐ»Ð¸ Ð·Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½Ð½Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð½Ðµ Ð¼Ð°ÑÑÐ¸Ð², Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð´ÐµÑ„Ð¾Ð»Ñ‚Ð½Ñ‹Ðµ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð¿Ñ€Ð¸ Ð¿ÐµÑ€Ð²Ð¾Ð¹ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐµ\n          // ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼, ÐµÑÑ‚ÑŒ Ð»Ð¸ ÑƒÐ¶Ðµ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð½Ñ‹Ðµ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸ Ð² localStorage\n          const stored = localStorage.getItem('restaurant-categories');\n          if (stored) {\n            try {\n              const parsed = JSON.parse(stored);\n              if (Array.isArray(parsed)) {\n                // Ð•ÑÐ»Ð¸ ÐµÑÑ‚ÑŒ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð½Ñ‹Ðµ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸, Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð¸Ñ… (Ð´Ð°Ð¶Ðµ ÐµÑÐ»Ð¸ Ð¿ÑƒÑÑ‚Ð¾Ð¹ Ð¼Ð°ÑÑÐ¸Ð²)\n                console.warn('âš ï¸ loadCategoriesFromFile: Ð”Ð°Ð½Ð½Ñ‹Ðµ Ð½Ðµ ÑÐ²Ð»ÑÑŽÑ‚ÑÑ Ð¼Ð°ÑÑÐ¸Ð²Ð¾Ð¼, Ð½Ð¾ ÐµÑÑ‚ÑŒ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð½Ñ‹Ðµ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸. Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð¿ÑƒÑÑ‚Ð¾Ð¹ Ð¼Ð°ÑÑÐ¸Ð².');\n                setCategories([]);\n              } else {\n                // Ð•ÑÐ»Ð¸ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð½Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð½Ðµ Ð¼Ð°ÑÑÐ¸Ð², Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð´ÐµÑ„Ð¾Ð»Ñ‚Ð½Ñ‹Ðµ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸\n                console.log('ðŸ“¥ loadCategoriesFromFile: Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð½Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð½Ðµ Ð¼Ð°ÑÑÐ¸Ð², Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð´ÐµÑ„Ð¾Ð»Ñ‚Ð½Ñ‹Ðµ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸');\n                setCategories([...defaultCategories]);\n              }\n            } catch (e) {\n              // Ð•ÑÐ»Ð¸ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð¿Ð¾Ð²Ñ€ÐµÐ¶Ð´ÐµÐ½Ñ‹, Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð´ÐµÑ„Ð¾Ð»Ñ‚Ð½Ñ‹Ðµ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸\n              console.log('ðŸ“¥ loadCategoriesFromFile: Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð½Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð¿Ð¾Ð²Ñ€ÐµÐ¶Ð´ÐµÐ½Ñ‹, Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð´ÐµÑ„Ð¾Ð»Ñ‚Ð½Ñ‹Ðµ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸');\n              setCategories([...defaultCategories]);\n            }\n          } else {\n            // Ð¢Ð¾Ð»ÑŒÐºÐ¾ ÐµÑÐ»Ð¸ Ð½ÐµÑ‚ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð½Ñ‹Ñ… ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¹ (Ð¿ÐµÑ€Ð²Ð°Ñ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ°), Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð´ÐµÑ„Ð¾Ð»Ñ‚Ð½Ñ‹Ðµ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸\n            console.log('ðŸ“¥ loadCategoriesFromFile: ÐŸÐµÑ€Ð²Ð°Ñ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ°, Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð´ÐµÑ„Ð¾Ð»Ñ‚Ð½Ñ‹Ðµ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸');\n            setCategories([...defaultCategories]);\n          }\n        }\n      } catch (error) {\n        console.error('ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¹:', error);\n        // ÐŸÑ€Ð¸ Ð¾ÑˆÐ¸Ð±ÐºÐµ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼, ÐµÑÑ‚ÑŒ Ð»Ð¸ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð½Ñ‹Ðµ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸\n        const stored = localStorage.getItem('restaurant-categories');\n        if (stored) {\n          try {\n            const parsed = JSON.parse(stored);\n            if (Array.isArray(parsed)) {\n              // Ð•ÑÐ»Ð¸ ÐµÑÑ‚ÑŒ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð½Ñ‹Ðµ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸, Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð¸Ñ… (Ð´Ð°Ð¶Ðµ ÐµÑÐ»Ð¸ Ð¿ÑƒÑÑ‚Ð¾Ð¹ Ð¼Ð°ÑÑÐ¸Ð²)\n              console.warn('âš ï¸ loadCategoriesFromFile: ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸, Ð½Ð¾ ÐµÑÑ‚ÑŒ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð½Ñ‹Ðµ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸. Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð¿ÑƒÑÑ‚Ð¾Ð¹ Ð¼Ð°ÑÑÐ¸Ð².');\n              setCategories([]);\n            } else {\n              console.log('ðŸ“¥ loadCategoriesFromFile: ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ð¸ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð½Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð½Ðµ Ð¼Ð°ÑÑÐ¸Ð², Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð´ÐµÑ„Ð¾Ð»Ñ‚Ð½Ñ‹Ðµ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸');\n              setCategories([...defaultCategories]);\n            }\n          } catch (e) {\n            console.log('ðŸ“¥ loadCategoriesFromFile: ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ð¸ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð½Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð¿Ð¾Ð²Ñ€ÐµÐ¶Ð´ÐµÐ½Ñ‹, Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð´ÐµÑ„Ð¾Ð»Ñ‚Ð½Ñ‹Ðµ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸');\n            setCategories([...defaultCategories]);\n          }\n        } else {\n          // Ð¢Ð¾Ð»ÑŒÐºÐ¾ ÐµÑÐ»Ð¸ Ð½ÐµÑ‚ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð½Ñ‹Ñ… ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¹, Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð´ÐµÑ„Ð¾Ð»Ñ‚Ð½Ñ‹Ðµ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸\n          console.log('ðŸ“¥ loadCategoriesFromFile: ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ð¸ Ð½ÐµÑ‚ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð½Ñ‹Ñ… ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¹, Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð´ÐµÑ„Ð¾Ð»Ñ‚Ð½Ñ‹Ðµ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸');\n          setCategories([...defaultCategories]);\n        }\n      }\n    };\n\n    const loadReservationsFromFile = async () => {\n      try {\n        const loadedReservations = await loadReservations();\n        setReservations(loadedReservations);\n      } catch (error) {\n        console.error('ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ð·Ð°ÑÐ²Ð¾Ðº:', error);\n        setReservations([]);\n      }\n    };\n\n    const loadMenuItemsFromFile = async () => {\n      try {\n        const loadedMenu = await loadMenu();\n        if (Array.isArray(loadedMenu)) {\n          // ÐŸÑƒÑÑ‚Ð¾Ð¹ Ð¼Ð°ÑÑÐ¸Ð² - ÑÑ‚Ð¾ Ð²Ð°Ð»Ð¸Ð´Ð½Ð¾Ðµ ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ðµ (Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ ÑƒÐ´Ð°Ð»Ð¸Ð» Ð²ÑÐµ Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ð¸)\n          // ÐÐµ Ð¿Ð¾Ð´ÑÑ‚Ð°Ð²Ð»ÑÐµÐ¼ Ð´ÐµÑ„Ð¾Ð»Ñ‚Ð½Ð¾Ðµ Ð¼ÐµÐ½ÑŽ, ÐµÑÐ»Ð¸ Ð¼Ð°ÑÑÐ¸Ð² Ð¿Ñ€Ð¾ÑÑ‚Ð¾ Ð¿ÑƒÑÑ‚Ð¾Ð¹\n          setMenuItems(loadedMenu);\n          console.log(`ðŸ“¥ loadMenuItemsFromFile: Ð—Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½Ð¾ Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ð¹: ${loadedMenu.length}`);\n        } else {\n          // Ð•ÑÐ»Ð¸ Ð·Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½Ð½Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð½Ðµ Ð¼Ð°ÑÑÐ¸Ð², Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ Ð¼ÐµÑ‚Ð°Ð´Ð°Ð½Ð½Ñ‹Ðµ\n          // ÐœÐµÑ‚Ð°Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð¼Ð¾Ð³ÑƒÑ‚ Ð±Ñ‹Ñ‚ÑŒ Ð¿ÑƒÑÑ‚Ñ‹Ð¼ Ð¼Ð°ÑÑÐ¸Ð²Ð¾Ð¼ \"[]\", Ñ‡Ñ‚Ð¾ Ñ‚Ð¾Ð¶Ðµ Ð²Ð°Ð»Ð¸Ð´Ð½Ð¾\n          const metadataStr = localStorage.getItem('restaurant-menu-metadata');\n          if (metadataStr) {\n            try {\n              const metadata = JSON.parse(metadataStr);\n              // Ð•ÑÐ»Ð¸ Ð¼ÐµÑ‚Ð°Ð´Ð°Ð½Ð½Ñ‹Ðµ ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÑŽÑ‚ (Ð´Ð°Ð¶Ðµ ÐµÑÐ»Ð¸ ÑÑ‚Ð¾ Ð¿ÑƒÑÑ‚Ð¾Ð¹ Ð¼Ð°ÑÑÐ¸Ð²), Ð·Ð½Ð°Ñ‡Ð¸Ñ‚ Ð¼ÐµÐ½ÑŽ Ð±Ñ‹Ð»Ð¾ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¾\n              // Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð¿ÑƒÑÑ‚Ð¾Ð¹ Ð¼Ð°ÑÑÐ¸Ð², Ð° Ð½Ðµ Ð´ÐµÑ„Ð¾Ð»Ñ‚Ð½Ð¾Ðµ Ð¼ÐµÐ½ÑŽ\n              console.warn('âš ï¸ loadMenuItemsFromFile: Ð”Ð°Ð½Ð½Ñ‹Ðµ Ð½Ðµ ÑÐ²Ð»ÑÑŽÑ‚ÑÑ Ð¼Ð°ÑÑÐ¸Ð²Ð¾Ð¼, Ð½Ð¾ ÐµÑÑ‚ÑŒ Ð¼ÐµÑ‚Ð°Ð´Ð°Ð½Ð½Ñ‹Ðµ. Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð¿ÑƒÑÑ‚Ð¾Ð¹ Ð¼Ð°ÑÑÐ¸Ð².');\n              setMenuItems([]);\n            } catch (e) {\n              // Ð•ÑÐ»Ð¸ Ð¼ÐµÑ‚Ð°Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð¿Ð¾Ð²Ñ€ÐµÐ¶Ð´ÐµÐ½Ñ‹, Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð´ÐµÑ„Ð¾Ð»Ñ‚Ð½Ð¾Ðµ Ð¼ÐµÐ½ÑŽ\n              console.log('ðŸ“¥ loadMenuItemsFromFile: ÐœÐµÑ‚Ð°Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð¿Ð¾Ð²Ñ€ÐµÐ¶Ð´ÐµÐ½Ñ‹, Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð´ÐµÑ„Ð¾Ð»Ñ‚Ð½Ð¾Ðµ Ð¼ÐµÐ½ÑŽ');\n              setMenuItems([...defaultMenu]);\n            }\n          } else {\n            // Ð¢Ð¾Ð»ÑŒÐºÐ¾ ÐµÑÐ»Ð¸ Ð½ÐµÑ‚ Ð¼ÐµÑ‚Ð°Ð´Ð°Ð½Ð½Ñ‹Ñ… (Ð¿ÐµÑ€Ð²Ð°Ñ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ°), Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð´ÐµÑ„Ð¾Ð»Ñ‚Ð½Ð¾Ðµ Ð¼ÐµÐ½ÑŽ\n            console.log('ðŸ“¥ loadMenuItemsFromFile: ÐŸÐµÑ€Ð²Ð°Ñ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ°, Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð´ÐµÑ„Ð¾Ð»Ñ‚Ð½Ð¾Ðµ Ð¼ÐµÐ½ÑŽ');\n            setMenuItems([...defaultMenu]);\n          }\n        }\n      } catch (error) {\n        console.error('ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ð¼ÐµÐ½ÑŽ:', error);\n        // ÐŸÑ€Ð¸ Ð¾ÑˆÐ¸Ð±ÐºÐµ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼, ÐµÑÑ‚ÑŒ Ð»Ð¸ Ð¼ÐµÑ‚Ð°Ð´Ð°Ð½Ð½Ñ‹Ðµ\n        const metadataStr = localStorage.getItem('restaurant-menu-metadata');\n        if (metadataStr) {\n          try {\n            const metadata = JSON.parse(metadataStr);\n            // Ð•ÑÐ»Ð¸ Ð¼ÐµÑ‚Ð°Ð´Ð°Ð½Ð½Ñ‹Ðµ ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÑŽÑ‚, Ð·Ð½Ð°Ñ‡Ð¸Ñ‚ Ð¼ÐµÐ½ÑŽ Ð±Ñ‹Ð»Ð¾ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¾, Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð¿ÑƒÑÑ‚Ð¾Ð¹ Ð¼Ð°ÑÑÐ¸Ð²\n            console.warn('âš ï¸ loadMenuItemsFromFile: ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸, Ð½Ð¾ ÐµÑÑ‚ÑŒ Ð¼ÐµÑ‚Ð°Ð´Ð°Ð½Ð½Ñ‹Ðµ. Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð¿ÑƒÑÑ‚Ð¾Ð¹ Ð¼Ð°ÑÑÐ¸Ð².');\n            setMenuItems([]);\n          } catch (e) {\n            // Ð•ÑÐ»Ð¸ Ð¼ÐµÑ‚Ð°Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð¿Ð¾Ð²Ñ€ÐµÐ¶Ð´ÐµÐ½Ñ‹, Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð´ÐµÑ„Ð¾Ð»Ñ‚Ð½Ð¾Ðµ Ð¼ÐµÐ½ÑŽ\n            console.log('ðŸ“¥ loadMenuItemsFromFile: ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ð¸ Ð¼ÐµÑ‚Ð°Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð¿Ð¾Ð²Ñ€ÐµÐ¶Ð´ÐµÐ½Ñ‹, Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð´ÐµÑ„Ð¾Ð»Ñ‚Ð½Ð¾Ðµ Ð¼ÐµÐ½ÑŽ');\n            setMenuItems([...defaultMenu]);\n          }\n        } else {\n          // Ð¢Ð¾Ð»ÑŒÐºÐ¾ ÐµÑÐ»Ð¸ Ð½ÐµÑ‚ Ð¼ÐµÑ‚Ð°Ð´Ð°Ð½Ð½Ñ‹Ñ…, Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð´ÐµÑ„Ð¾Ð»Ñ‚Ð½Ð¾Ðµ Ð¼ÐµÐ½ÑŽ\n          console.log('ðŸ“¥ loadMenuItemsFromFile: ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ð¸ Ð½ÐµÑ‚ Ð¼ÐµÑ‚Ð°Ð´Ð°Ð½Ð½Ñ‹Ñ…, Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð´ÐµÑ„Ð¾Ð»Ñ‚Ð½Ð¾Ðµ Ð¼ÐµÐ½ÑŽ');\n          setMenuItems([...defaultMenu]);\n        }\n      }\n    };\n\n    const loadThemesFromFile = async () => {\n      try {\n        const themeData = await loadTheme();\n        // ÐžÐ±ÑŠÐµÐ´Ð¸Ð½ÑÐµÐ¼ Ð±Ð°Ð·Ð¾Ð²Ñ‹Ðµ Ñ‚ÐµÐ¼Ñ‹ Ñ Ð·Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½Ð½Ñ‹Ð¼Ð¸\n        const allThemes = { ...defaultThemes, ...themeData.themes };\n        setThemes(allThemes);\n        \n        // Ð£ÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼ Ñ‚ÐµÐºÑƒÑ‰ÑƒÑŽ Ñ‚ÐµÐ¼Ñƒ\n        const currentThemeId = themeData.currentTheme || 'default';\n        setCurrentTheme(currentThemeId);\n        // ÐŸÑ€Ð¸Ð¼ÐµÐ½ÑÐµÐ¼ Ñ‚ÐµÐ¼Ñƒ Ð¿Ñ€Ð¸ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐµ Ñ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸ÐµÐ¼ Ð·Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½Ð½Ñ‹Ñ… Ñ‚ÐµÐ¼\n        applyThemeOnLoad(currentThemeId, allThemes);\n      } catch (error) {\n        console.error('ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ñ‚ÐµÐ¼:', error);\n        setThemes(defaultThemes);\n        setCurrentTheme('default');\n        applyThemeOnLoad('default', defaultThemes);\n      }\n    };\n\n    const applyThemeOnLoad = (themeId, themesToUse = null) => {\n      // Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð¿ÐµÑ€ÐµÐ´Ð°Ð½Ð½Ñ‹Ðµ Ñ‚ÐµÐ¼Ñ‹ Ð¸Ð»Ð¸ Ð·Ð°Ð³Ñ€ÑƒÐ¶Ð°ÐµÐ¼ Ð¸Ð· ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ñ\n      const allThemes = themesToUse || { ...defaultThemes, ...themes };\n      \n      if (themeId === 'default') {\n        document.documentElement.className = '';\n        const root = document.documentElement;\n        root.style.removeProperty('--primary-color');\n        root.style.removeProperty('--primary-light');\n        root.style.removeProperty('--primary-dark');\n        root.style.removeProperty('--secondary-color');\n        root.style.removeProperty('--secondary-light');\n        root.style.removeProperty('--secondary-dark');\n        root.style.removeProperty('--accent-color');\n        root.style.removeProperty('--background-color');\n        root.style.removeProperty('--text-color');\n        root.style.removeProperty('--text-light');\n        // Ð£ÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼ Ñ„Ð¾Ð½ html Ð² Ñ†Ð²ÐµÑ‚ Ð¿Ð¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ\n        document.documentElement.style.backgroundColor = '#8B7355';\n        return;\n      }\n      \n      // ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ Ð±Ð°Ð·Ð¾Ð²Ñ‹Ðµ Ñ‚ÐµÐ¼Ñ‹\n      if (defaultThemes[themeId]) {\n        const theme = defaultThemes[themeId];\n        const root = document.documentElement;\n        root.style.setProperty('--primary-color', theme.primaryColor);\n        root.style.setProperty('--primary-light', theme.primaryLight);\n        root.style.setProperty('--primary-dark', theme.primaryDark);\n        root.style.setProperty('--secondary-color', theme.secondaryColor);\n        root.style.setProperty('--secondary-light', theme.secondaryLight);\n        root.style.setProperty('--secondary-dark', theme.secondaryDark);\n        root.style.setProperty('--accent-color', theme.accentColor);\n        root.style.setProperty('--background-color', theme.backgroundColor);\n        root.style.setProperty('--text-color', theme.textColor);\n        root.style.setProperty('--text-light', theme.textLight);\n        // Ð£ÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼ Ñ„Ð¾Ð½ html Ð´Ð»Ñ overscroll\n        document.documentElement.style.backgroundColor = theme.primaryColor;\n        return;\n      }\n      \n      // ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒÑÐºÐ¸Ðµ Ñ‚ÐµÐ¼Ñ‹\n      const theme = allThemes[themeId];\n      if (theme) {\n        const root = document.documentElement;\n        root.style.setProperty('--primary-color', theme.primaryColor);\n        root.style.setProperty('--primary-light', theme.primaryLight);\n        root.style.setProperty('--primary-dark', theme.primaryDark);\n        root.style.setProperty('--secondary-color', theme.secondaryColor);\n        root.style.setProperty('--secondary-light', theme.secondaryLight);\n        root.style.setProperty('--secondary-dark', theme.secondaryDark);\n        root.style.setProperty('--accent-color', theme.accentColor);\n        root.style.setProperty('--background-color', theme.backgroundColor);\n        root.style.setProperty('--text-color', theme.textColor);\n        root.style.setProperty('--text-light', theme.textLight);\n        // Ð£ÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼ Ñ„Ð¾Ð½ html Ð´Ð»Ñ overscroll\n        document.documentElement.style.backgroundColor = theme.primaryColor;\n      }\n    };\n\n    const loadPhotosFromFile = async () => {\n        try {\n        const loadedPhotos = await loadPhotos();\n        if (Array.isArray(loadedPhotos) && loadedPhotos.length > 0) {\n          setPhotos(loadedPhotos);\n        } else {\n          setPhotos([]);\n          }\n        } catch (error) {\n          console.error('ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ð¹:', error);\n      setPhotos([]);\n      }\n    };\n\n    loadCategoriesFromFile();\n    loadReservationsFromFile();\n    loadMenuItemsFromFile();\n    loadThemesFromFile();\n    loadPhotosFromFile();\n  }, []);\n\n  const saveCategoriesToFile = async (updatedCategories) => {\n    // Ð¡Ð¾Ñ€Ñ‚Ð¸Ñ€ÑƒÐµÐ¼ Ð¿Ð¾ Ð¿Ð¾Ñ€ÑÐ´ÐºÑƒ Ð¿ÐµÑ€ÐµÐ´ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸ÐµÐ¼\n    const sorted = [...updatedCategories].sort((a, b) => a.order - b.order);\n    setCategories(sorted);\n    const saveResult = await saveCategories(sorted);\n    if (!saveResult.success) {\n      showAlert(`ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐºÐ°Ñ‡Ð¸Ð²Ð°Ð½Ð¸Ñ Ñ„Ð°Ð¹Ð»Ð° ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¹: ${saveResult.message}`, 'error');\n    } else {\n      showAlert('Ð¤Ð°Ð¹Ð» categories.json ÑÐºÐ°Ñ‡Ð°Ð½', 'success');\n    }\n  };\n\n  const addCategory = async () => {\n    const newCategory = {\n      id: Date.now(),\n      key: `category_${Date.now()}`,\n      name: 'ÐÐ¾Ð²Ð°Ñ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ñ',\n      order: categories.length + 1\n    };\n    const updated = [...categories, newCategory];\n    await saveCategoriesToFile(updated);\n    setEditingCategory(newCategory);\n    showAlert('ÐšÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ñ Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð°', 'success');\n  };\n\n  const updateCategory = async (category) => {\n    if (!category.name || !category.name.trim()) {\n      showAlert('Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ðµ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸', 'error');\n      return;\n    }\n    const updated = categories.map(cat => \n      cat.id === category.id ? category : cat\n    );\n    await saveCategoriesToFile(updated);\n    setEditingCategory(null);\n    showAlert('ÐšÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ñ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð°', 'success');\n  };\n\n  const deleteCategory = async (id) => {\n    // ÐÐ°Ñ…Ð¾Ð´Ð¸Ð¼ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸ÑŽ Ð´Ð»Ñ ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ñ (Ð´Ð»Ñ Ð»Ð¾Ð³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ)\n    const categoryToDelete = categories.find(cat => cat.id === id);\n    if (categoryToDelete) {\n      console.log('ðŸ—‘ï¸ deleteCategory: Ð£Ð´Ð°Ð»ÐµÐ½Ð¸Ðµ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸:', {\n        id: categoryToDelete.id,\n        name: categoryToDelete.name,\n        key: categoryToDelete.key\n      });\n    }\n    \n    // ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼, Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ÑÑ Ð»Ð¸ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ñ Ð² Ð±Ð»ÑŽÐ´Ð°Ñ…\n    const category = categories.find(cat => cat.id === id);\n    if (category) {\n      const itemsInCategory = menuItems.filter(item => item.category === category.key);\n      if (itemsInCategory.length > 0) {\n        showAlert(`ÐÐµÐ»ÑŒÐ·Ñ ÑƒÐ´Ð°Ð»Ð¸Ñ‚ÑŒ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸ÑŽ: Ð² Ð½ÐµÐ¹ ÐµÑÑ‚ÑŒ ${itemsInCategory.length} Ð±Ð»ÑŽÐ´(Ð°)`, 'error');\n        return;\n      }\n    }\n    \n    // Ð£Ð´Ð°Ð»ÑÐµÐ¼ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸ÑŽ Ð¸Ð· Ð¼Ð°ÑÑÐ¸Ð²Ð°\n    const updated = categories.filter(cat => cat.id !== id);\n    console.log(`ðŸ—‘ï¸ deleteCategory: ÐžÑÑ‚Ð°Ð»Ð¾ÑÑŒ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¹: ${updated.length}`);\n    \n    // ÐžÐ±Ð½Ð¾Ð²Ð»ÑÐµÐ¼ Ð¿Ð¾Ñ€ÑÐ´Ð¾Ðº Ð¾ÑÑ‚Ð°Ð²ÑˆÐ¸Ñ…ÑÑ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¹\n    updated.forEach((cat, index) => {\n      cat.order = index + 1;\n    });\n    \n    // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð½Ñ‹Ð¹ Ð¼Ð°ÑÑÐ¸Ð² (Ð´Ð°Ð¶Ðµ ÐµÑÐ»Ð¸ Ð¾Ð½ Ð¿ÑƒÑÑ‚Ð¾Ð¹)\n    await saveCategoriesToFile(updated);\n    \n    if (updated.length === 0) {\n      console.log('âœ… deleteCategory: Ð’ÑÐµ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸ ÑƒÐ´Ð°Ð»ÐµÐ½Ñ‹, Ð¼Ð°ÑÑÐ¸Ð² Ð¿ÑƒÑÑ‚Ð¾Ð¹');\n    } else {\n      console.log('âœ… deleteCategory: ÐšÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ñ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ ÑƒÐ´Ð°Ð»ÐµÐ½Ð°');\n    }\n    \n    showAlert('ÐšÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ñ ÑƒÐ´Ð°Ð»ÐµÐ½Ð°', 'success');\n  };\n\n  const moveCategory = async (id, direction) => {\n    const index = categories.findIndex(cat => cat.id === id);\n    if (index === -1) return;\n    \n    const newIndex = direction === 'up' ? index - 1 : index + 1;\n    if (newIndex < 0 || newIndex >= categories.length) return;\n    \n    const updated = [...categories];\n    [updated[index].order, updated[newIndex].order] = [updated[newIndex].order, updated[index].order];\n    await saveCategoriesToFile(updated);\n  };\n\n  const showAlert = useCallback((message, type = 'success') => {\n    setNotificationMessage(message);\n    setNotificationType(type);\n    setShowNotification(true);\n    setTimeout(() => setShowNotification(false), 4000);\n  }, []);\n\n  // Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ Ð°Ð²Ñ‚Ð¾Ñ€Ð¸Ð·Ð°Ñ†Ð¸Ð¸\n  const handleLogin = (username, password) => {\n    if (username === 'admin' && password === 'Tbil4dSokol') {\n      setIsAuthenticated(true);\n      localStorage.setItem('admin-authenticated', 'true');\n      showAlert('Ð”Ð¾Ð±Ñ€Ð¾ Ð¿Ð¾Ð¶Ð°Ð»Ð¾Ð²Ð°Ñ‚ÑŒ Ð² Ð°Ð´Ð¼Ð¸Ð½-Ð¿Ð°Ð½ÐµÐ»ÑŒ!', 'success');\n      return true;\n    } else {\n      showAlert('ÐÐµÐ²ÐµÑ€Ð½Ñ‹Ð¹ Ð»Ð¾Ð³Ð¸Ð½ Ð¸Ð»Ð¸ Ð¿Ð°Ñ€Ð¾Ð»ÑŒ', 'error');\n      return false;\n    }\n  };\n\n  // Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ Ð²Ñ‹Ñ…Ð¾Ð´Ð°\n  const handleLogout = () => {\n    setIsAuthenticated(false);\n    localStorage.removeItem('admin-authenticated');\n    showAlert('Ð’Ñ‹ Ð²Ñ‹ÑˆÐ»Ð¸ Ð¸Ð· Ð°Ð´Ð¼Ð¸Ð½-Ð¿Ð°Ð½ÐµÐ»Ð¸', 'success');\n  };\n\n  // Ð¤ÑƒÐ½ÐºÑ†Ð¸Ð¸ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ Ñ‚ÐµÐ¼Ð°Ð¼Ð¸\n  const applyTheme = async (themeId) => {\n    setCurrentTheme(themeId);\n    \n    if (themeId === 'default') {\n      document.documentElement.className = '';\n      const root = document.documentElement;\n      root.style.removeProperty('--primary-color');\n      root.style.removeProperty('--primary-light');\n      root.style.removeProperty('--primary-dark');\n      root.style.removeProperty('--secondary-color');\n      root.style.removeProperty('--secondary-light');\n      root.style.removeProperty('--secondary-dark');\n      root.style.removeProperty('--accent-color');\n      root.style.removeProperty('--background-color');\n      root.style.removeProperty('--text-color');\n      root.style.removeProperty('--text-light');\n      // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ñ‚ÐµÐ¼Ñƒ Ð² Ñ„Ð°Ð¹Ð»\n      const saveResult = await saveTheme({ currentTheme: themeId, themes: themes });\n      if (saveResult.success) {\n        showAlert('Ð¢ÐµÐ¼Ð° \"ÐŸÐ¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ\" Ð¿Ñ€Ð¸Ð¼ÐµÐ½ÐµÐ½Ð°. Ð¤Ð°Ð¹Ð» theme.json ÑÐºÐ°Ñ‡Ð°Ð½.', 'success');\n      } else {\n        showAlert(`Ð¢ÐµÐ¼Ð° Ð¿Ñ€Ð¸Ð¼ÐµÐ½ÐµÐ½Ð°, Ð½Ð¾ Ñ„Ð°Ð¹Ð» Ð½Ðµ ÑÐºÐ°Ñ‡Ð°Ð½: ${saveResult.message}`, 'error');\n      }\n      return;\n    }\n    \n    // ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ Ð±Ð°Ð·Ð¾Ð²Ñ‹Ðµ Ñ‚ÐµÐ¼Ñ‹\n    if (defaultThemes[themeId]) {\n      const theme = defaultThemes[themeId];\n      const root = document.documentElement;\n      root.style.setProperty('--primary-color', theme.primaryColor);\n      root.style.setProperty('--primary-light', theme.primaryLight);\n      root.style.setProperty('--primary-dark', theme.primaryDark);\n      root.style.setProperty('--secondary-color', theme.secondaryColor);\n      root.style.setProperty('--secondary-light', theme.secondaryLight);\n      root.style.setProperty('--secondary-dark', theme.secondaryDark);\n      root.style.setProperty('--accent-color', theme.accentColor);\n      root.style.setProperty('--background-color', theme.backgroundColor);\n      root.style.setProperty('--text-color', theme.textColor);\n      root.style.setProperty('--text-light', theme.textLight);\n      // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ñ‚ÐµÐ¼Ñƒ Ð² Ñ„Ð°Ð¹Ð»\n      const saveResult = await saveTheme({ currentTheme: themeId, themes: themes });\n      if (saveResult.success) {\n        showAlert(`Ð¢ÐµÐ¼Ð° \"${theme.name}\" Ð¿Ñ€Ð¸Ð¼ÐµÐ½ÐµÐ½Ð°. Ð¤Ð°Ð¹Ð» theme.json ÑÐºÐ°Ñ‡Ð°Ð½.`, 'success');\n      } else {\n        showAlert(`Ð¢ÐµÐ¼Ð° Ð¿Ñ€Ð¸Ð¼ÐµÐ½ÐµÐ½Ð°, Ð½Ð¾ Ñ„Ð°Ð¹Ð» Ð½Ðµ ÑÐºÐ°Ñ‡Ð°Ð½: ${saveResult.message}`, 'error');\n      }\n      return;\n    }\n    \n    // ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒÑÐºÐ¸Ðµ Ñ‚ÐµÐ¼Ñ‹\n    const theme = themes[themeId];\n    if (theme) {\n      const root = document.documentElement;\n      root.style.setProperty('--primary-color', theme.primaryColor);\n      root.style.setProperty('--primary-light', theme.primaryLight);\n      root.style.setProperty('--primary-dark', theme.primaryDark);\n      root.style.setProperty('--secondary-color', theme.secondaryColor);\n      root.style.setProperty('--secondary-light', theme.secondaryLight);\n      root.style.setProperty('--secondary-dark', theme.secondaryDark);\n      root.style.setProperty('--accent-color', theme.accentColor);\n      root.style.setProperty('--background-color', theme.backgroundColor);\n      root.style.setProperty('--text-color', theme.textColor);\n      root.style.setProperty('--text-light', theme.textLight);\n      // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ñ‚ÐµÐ¼Ñƒ Ð² Ñ„Ð°Ð¹Ð»\n      const saveResult = await saveTheme({ currentTheme: themeId, themes: themes });\n      if (saveResult.success) {\n        showAlert(`Ð¢ÐµÐ¼Ð° \"${theme.name}\" Ð¿Ñ€Ð¸Ð¼ÐµÐ½ÐµÐ½Ð°. Ð¤Ð°Ð¹Ð» theme.json ÑÐºÐ°Ñ‡Ð°Ð½.`, 'success');\n      } else {\n        showAlert(`Ð¢ÐµÐ¼Ð° Ð¿Ñ€Ð¸Ð¼ÐµÐ½ÐµÐ½Ð°, Ð½Ð¾ Ñ„Ð°Ð¹Ð» Ð½Ðµ ÑÐºÐ°Ñ‡Ð°Ð½: ${saveResult.message}`, 'error');\n      }\n    }\n  };\n\n  const saveThemes = async (updatedThemes) => {\n    // ÐžÐ±ÑŠÐµÐ´Ð¸Ð½ÑÐµÐ¼ Ð±Ð°Ð·Ð¾Ð²Ñ‹Ðµ Ñ‚ÐµÐ¼Ñ‹ Ñ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒÑÐºÐ¸Ð¼Ð¸ Ð´Ð»Ñ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ\n    const allThemes = { ...defaultThemes, ...updatedThemes };\n    setThemes(allThemes);\n    // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ð² Ñ„Ð°Ð¹Ð»\n    const saveResult = await saveTheme({ currentTheme: currentTheme, themes: allThemes });\n    if (!saveResult.success) {\n      showAlert(`ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐºÐ°Ñ‡Ð¸Ð²Ð°Ð½Ð¸Ñ Ñ„Ð°Ð¹Ð»Ð° Ñ‚ÐµÐ¼: ${saveResult.message}`, 'error');\n    } else {\n      showAlert('Ð¤Ð°Ð¹Ð» theme.json ÑÐºÐ°Ñ‡Ð°Ð½', 'success');\n    }\n  };\n\n  // Ð¤ÑƒÐ½ÐºÑ†Ð¸Ð¸ Ð´Ð»Ñ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ð³Ð¾ Ð²Ñ‹Ñ‡Ð¸ÑÐ»ÐµÐ½Ð¸Ñ ÑÐ²ÐµÑ‚Ð»Ð¾Ð³Ð¾ Ð¸ Ñ‚ÐµÐ¼Ð½Ð¾Ð³Ð¾ Ð²Ð°Ñ€Ð¸Ð°Ð½Ñ‚Ð¾Ð² Ñ†Ð²ÐµÑ‚Ð°\n  const hexToRgb = (hex) => {\n    const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n    return result ? {\n      r: parseInt(result[1], 16),\n      g: parseInt(result[2], 16),\n      b: parseInt(result[3], 16)\n    } : null;\n  };\n\n  const rgbToHex = (r, g, b) => {\n    return \"#\" + [r, g, b].map(x => {\n      const hex = x.toString(16);\n      return hex.length === 1 ? \"0\" + hex : hex;\n    }).join(\"\");\n  };\n\n  const lightenColor = (hex, percent = 20) => {\n    const rgb = hexToRgb(hex);\n    if (!rgb) return hex;\n    \n    const r = Math.min(255, Math.round(rgb.r + (255 - rgb.r) * (percent / 100)));\n    const g = Math.min(255, Math.round(rgb.g + (255 - rgb.g) * (percent / 100)));\n    const b = Math.min(255, Math.round(rgb.b + (255 - rgb.b) * (percent / 100)));\n    \n    return rgbToHex(r, g, b);\n  };\n\n  const darkenColor = (hex, percent = 20) => {\n    const rgb = hexToRgb(hex);\n    if (!rgb) return hex;\n    \n    const r = Math.max(0, Math.round(rgb.r * (1 - percent / 100)));\n    const g = Math.max(0, Math.round(rgb.g * (1 - percent / 100)));\n    const b = Math.max(0, Math.round(rgb.b * (1 - percent / 100)));\n    \n    return rgbToHex(r, g, b);\n  };\n\n  const addTheme = () => {\n    const basePrimaryColor = '#8B7355';\n    const newTheme = {\n      id: `theme_${Date.now()}`,\n      name: 'ÐÐ¾Ð²Ð°Ñ Ñ‚ÐµÐ¼Ð°',\n      primaryColor: basePrimaryColor,\n      primaryLight: lightenColor(basePrimaryColor, 20),\n      primaryDark: darkenColor(basePrimaryColor, 20),\n      secondaryColor: '#A8D8EA',\n      secondaryLight: '#C5E7F5',\n      secondaryDark: '#7BB8D4',\n      accentColor: '#D4B896',\n      backgroundColor: '#FDF6E3',\n      textColor: '#333333',\n      textLight: '#666666'\n    };\n    const updated = { ...themes, [newTheme.id]: newTheme };\n    saveThemes(updated);\n    setEditingTheme(newTheme);\n    showAlert('Ð¢ÐµÐ¼Ð° Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð°', 'success');\n  };\n\n  const updateTheme = (theme) => {\n    if (!theme.name || !theme.name.trim()) {\n      showAlert('Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ðµ Ñ‚ÐµÐ¼Ñ‹', 'error');\n      return;\n    }\n    // ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ Ð²Ñ‹Ñ‡Ð¸ÑÐ»ÑÐµÐ¼ ÑÐ²ÐµÑ‚Ð»Ñ‹Ð¹ Ð¸ Ñ‚ÐµÐ¼Ð½Ñ‹Ð¹ Ð²Ð°Ñ€Ð¸Ð°Ð½Ñ‚Ñ‹ Ð¾ÑÐ½Ð¾Ð²Ð½Ð¾Ð³Ð¾ Ñ†Ð²ÐµÑ‚Ð°\n    const updatedTheme = {\n      ...theme,\n      primaryLight: lightenColor(theme.primaryColor, 20),\n      primaryDark: darkenColor(theme.primaryColor, 20)\n    };\n    const updated = { ...themes, [updatedTheme.id]: updatedTheme };\n    saveThemes(updated);\n    setEditingTheme(null);\n    showAlert('Ð¢ÐµÐ¼Ð° Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð°', 'success');\n  };\n\n  const deleteTheme = (id) => {\n    if (defaultThemes[id]) {\n      showAlert('Ð‘Ð°Ð·Ð¾Ð²Ñ‹Ðµ Ñ‚ÐµÐ¼Ñ‹ Ð½ÐµÐ»ÑŒÐ·Ñ ÑƒÐ´Ð°Ð»ÑÑ‚ÑŒ', 'error');\n      return;\n    }\n    const updated = { ...themes };\n    delete updated[id];\n    saveThemes(updated);\n    if (currentTheme === id) {\n      applyTheme('default');\n    }\n    showAlert('Ð¢ÐµÐ¼Ð° ÑƒÐ´Ð°Ð»ÐµÐ½Ð°', 'success');\n  };\n\n  const deleteReservation = async (id) => {\n    const updated = reservations.filter(res => res.id !== id);\n    setReservations(updated);\n    const saveResult = await autoSaveReservations(updated);\n    if (saveResult.success) {\n      showAlert('Ð—Ð°ÑÐ²ÐºÐ° ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ ÑƒÐ´Ð°Ð»ÐµÐ½Ð°', 'success');\n    } else {\n      showAlert(`Ð—Ð°ÑÐ²ÐºÐ° ÑƒÐ´Ð°Ð»ÐµÐ½Ð°, Ð½Ð¾ Ñ„Ð°Ð¹Ð» Ð½Ðµ ÑÐºÐ°Ñ‡Ð°Ð½: ${saveResult.message}`, 'error');\n    }\n  };\n\n  const deleteMenuItem = async (id) => {\n    // ÐÐ°Ñ…Ð¾Ð´Ð¸Ð¼ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚ Ð´Ð»Ñ ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ñ (Ð´Ð»Ñ Ð»Ð¾Ð³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ)\n    const itemToDelete = menuItems.find(item => item.id === id);\n    if (itemToDelete) {\n      const hasImage = itemToDelete.image && itemToDelete.image.startsWith('data:image');\n      console.log('ðŸ—‘ï¸ deleteMenuItem: Ð£Ð´Ð°Ð»ÐµÐ½Ð¸Ðµ Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ð¸ Ð¼ÐµÐ½ÑŽ:', {\n        id: itemToDelete.id,\n        name: itemToDelete.name,\n        hasImage: hasImage,\n        imageSize: hasImage ? itemToDelete.image.length : 0\n      });\n    }\n    \n    // Ð£Ð´Ð°Ð»ÑÐµÐ¼ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚ Ð¸Ð· Ð¼ÐµÐ½ÑŽ (Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ ÑƒÐ´Ð°Ð»ÑÐµÑ‚ÑÑ Ð²Ð¼ÐµÑÑ‚Ðµ Ñ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð¾Ð¼, Ñ‚Ð°Ðº ÐºÐ°Ðº Ð¾Ð½Ð¾ Ñ‡Ð°ÑÑ‚ÑŒ JSON)\n    const updated = menuItems.filter(item => item.id !== id);\n    setMenuItems(updated);\n    \n    // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ð²ÑÐµ Ð¾ÑÑ‚Ð°Ð²ÑˆÐ¸ÐµÑÑ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ñ‹ Ð² Ñ„Ð°Ð¹Ð»\n    // ÐŸÑ€Ð¸ ÑÑ‚Ð¾Ð¼ ÑÑ‚Ð°Ñ€Ð¾Ðµ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ (base64) Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ ÑƒÐ´Ð°Ð»ÑÐµÑ‚ÑÑ, Ñ‚Ð°Ðº ÐºÐ°Ðº ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚ ÑƒÐ´Ð°Ð»ÐµÐ½ Ð¸Ð· Ð¼Ð°ÑÑÐ¸Ð²Ð°\n    const saveResult = await autoSaveMenu(updated);\n    if (saveResult.success) {\n      console.log('âœ… deleteMenuItem: ÐŸÐ¾Ð·Ð¸Ñ†Ð¸Ñ Ð¼ÐµÐ½ÑŽ Ð¸ ÐµÑ‘ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ ÑƒÐ´Ð°Ð»ÐµÐ½Ñ‹');\n      showAlert('Ð‘Ð»ÑŽÐ´Ð¾ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ ÑƒÐ´Ð°Ð»ÐµÐ½Ð¾', 'success');\n    } else {\n      console.error('âŒ deleteMenuItem: ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ Ð¿Ð¾ÑÐ»Ðµ ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ñ:', saveResult.message);\n      showAlert(`Ð‘Ð»ÑŽÐ´Ð¾ ÑƒÐ´Ð°Ð»ÐµÐ½Ð¾, Ð½Ð¾ Ñ„Ð°Ð¹Ð» Ð½Ðµ ÑÐºÐ°Ñ‡Ð°Ð½: ${saveResult.message}`, 'error');\n    }\n  };\n\n  const cancelPhotoEditing = useCallback(() => {\n    // ÐžÑ‡Ð¸Ñ‰Ð°ÐµÐ¼ Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ðµ Ð´Ð»Ñ Ð½Ð¾Ð²Ð¾Ð¹ Ñ„Ð¾Ñ€Ð¼Ñ‹ Ð¿Ñ€Ð¸ Ð¾Ñ‚Ð¼ÐµÐ½Ðµ\n    const formKey = editingPhoto?.id || newPhotoKeyRef.current;\n    if (uploadedImagesStore.current.has(formKey)) {\n      uploadedImagesStore.current.delete(formKey);\n    }\n    setEditingPhoto(null);\n  }, [editingPhoto]);\n\n  const savePhoto = useCallback(async (photo) => {\n    try {\n    // Ð’Ð°Ð»Ð¸Ð´Ð°Ñ†Ð¸Ñ: Ð½Ðµ ÑÐ¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ð¸ Ð±ÐµÐ· Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ\n    if (!photo.image || !photo.image.trim()) {\n      showAlert('Ð—Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚Ðµ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ', 'error');\n      return;\n    }\n    \n    // Ð’Ð°Ð»Ð¸Ð´Ð°Ñ†Ð¸Ñ: Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ Ð´Ð¾Ð»Ð¶Ð½Ð¾ Ð±Ñ‹Ñ‚ÑŒ base64\n    if (!photo.image.startsWith('data:image')) {\n      showAlert('Ð—Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚Ðµ Ñ„Ð°Ð¹Ð» Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ', 'error');\n      return;\n    }\n    \n    // Ð’Ð°Ð»Ð¸Ð´Ð°Ñ†Ð¸Ñ: Ð½Ðµ ÑÐ¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ð¿ÑƒÑÑ‚Ñ‹Ðµ Ð¾Ð±ÑŠÐµÐºÑ‚Ñ‹ Ð¸Ð»Ð¸ Ð¾Ð±ÑŠÐµÐºÑ‚Ñ‹ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ñ Ñ‚ÐµÐºÑÑ‚Ð¾Ð¼ (Ð±ÐµÐ· Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ)\n    // Ð­Ñ‚Ð¾ ÑƒÐ¶Ðµ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐµÐ½Ð¾ Ð²Ñ‹ÑˆÐµ, Ð½Ð¾ Ð´Ð»Ñ Ð½Ð°Ð´ÐµÐ¶Ð½Ð¾ÑÑ‚Ð¸ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ ÐµÑ‰Ðµ Ñ€Ð°Ð·\n    const hasValidImage = photo.image && \n                          photo.image.trim() && \n                          photo.image.startsWith('data:image');\n    \n    if (!hasValidImage) {\n      showAlert('Ð¤Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ñ Ð´Ð¾Ð»Ð¶Ð½Ð° ÑÐ¾Ð´ÐµÑ€Ð¶Ð°Ñ‚ÑŒ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ', 'error');\n      return;\n    }\n\n    let updated;\n    if (photo.id) {\n      // Ð ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÑŽÑ‰ÐµÐ¹ Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ð¸\n      const oldPhoto = photos.find(p => p.id === photo.id);\n      const imageChanged = oldPhoto?.image !== photo.image;\n      \n      console.log('ðŸ’¾ savePhoto: Ð ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÑŽÑ‰ÐµÐ¹ Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ð¸:', {\n        id: photo.id,\n        caption: photo.caption,\n        oldImageSize: oldPhoto?.image ? oldPhoto.image.length : 0,\n        newImageSize: photo.image ? photo.image.length : 0,\n        imageChanged: imageChanged\n      });\n      \n      // Ð—Ð°Ð¼ÐµÐ½ÑÐµÐ¼ ÑÑ‚Ð°Ñ€ÑƒÑŽ Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸ÑŽ Ð½Ð¾Ð²Ð¾Ð¹ (ÑÑ‚Ð°Ñ€Ð¾Ðµ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ ÑƒÐ´Ð°Ð»ÑÐµÑ‚ÑÑ Ð²Ð¼ÐµÑÑ‚Ðµ ÑÐ¾ ÑÑ‚Ð°Ñ€Ñ‹Ð¼ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð¾Ð¼)\n      updated = photos.map(p => p.id === photo.id ? photo : p);\n      \n      if (imageChanged) {\n        console.log('ðŸ”„ savePhoto: Ð˜Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ Ð·Ð°Ð¼ÐµÐ½ÐµÐ½Ð¾, ÑÑ‚Ð°Ñ€Ð¾Ðµ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ Ð±ÑƒÐ´ÐµÑ‚ ÑƒÐ´Ð°Ð»ÐµÐ½Ð¾ Ð¿Ñ€Ð¸ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ð¸');\n      }\n    } else {\n      // Ð”Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð½Ð¾Ð²Ð¾Ð¹ Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ð¸\n      // Ð“ÐµÐ½ÐµÑ€Ð¸Ñ€ÑƒÐµÐ¼ ÑƒÐ½Ð¸ÐºÐ°Ð»ÑŒÐ½Ñ‹Ð¹ ID, Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑÑ ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÑŽÑ‰Ð¸Ðµ Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ð¸\n      const newId = generateUniqueId(photos);\n      const newPhoto = {\n        ...photo,\n        id: newId\n      };\n      updated = [...photos, newPhoto];\n    }\n    \n    // Ð¤Ð¸Ð»ÑŒÑ‚Ñ€ÑƒÐµÐ¼ Ð¿ÑƒÑÑ‚Ñ‹Ðµ Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ð¸ Ð¿ÐµÑ€ÐµÐ´ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸ÐµÐ¼\n    const validPhotos = updated.filter(p => {\n      return p && \n             p.image && \n             p.image.trim() && \n             p.image.startsWith('data:image');\n    });\n    \n    setPhotos(validPhotos);\n      \n      // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ð½Ð° ÑÐµÑ€Ð²ÐµÑ€\n      const saveResult = await autoSavePhotos(validPhotos);\n    \n      if (!saveResult.success) {\n        // Ð•ÑÐ»Ð¸ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ Ð½Ð° ÑÐµÑ€Ð²ÐµÑ€ Ð½Ðµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ, Ð¿Ð¾ÐºÐ°Ð·Ñ‹Ð²Ð°ÐµÐ¼ Ð¾ÑˆÐ¸Ð±ÐºÑƒ Ð¸ ÐÐ• Ð·Ð°ÐºÑ€Ñ‹Ð²Ð°ÐµÐ¼ Ð¼Ð¾Ð´Ð°Ð»ÑŒÐ½Ð¾Ðµ Ð¾ÐºÐ½Ð¾\n        showAlert(`ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ Ð½Ð° ÑÐµÑ€Ð²ÐµÑ€: ${saveResult.message}`, 'error');\n        console.error('ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ð¸:', saveResult);\n        return; // ÐÐµ Ð·Ð°ÐºÑ€Ñ‹Ð²Ð°ÐµÐ¼ Ð¼Ð¾Ð´Ð°Ð»ÑŒÐ½Ð¾Ðµ Ð¾ÐºÐ½Ð¾, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ Ð¼Ð¾Ð³ Ð¿Ð¾Ð¿Ñ€Ð¾Ð±Ð¾Ð²Ð°Ñ‚ÑŒ ÑÐ½Ð¾Ð²Ð°\n      }\n      \n      // ÐžÑ‡Ð¸Ñ‰Ð°ÐµÐ¼ Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ðµ Ð´Ð»Ñ ÑÑ‚Ð¾Ð¹ Ñ„Ð¾Ñ€Ð¼Ñ‹ Ð¿Ð¾ÑÐ»Ðµ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾Ð³Ð¾ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ\n    const formKey = photo.id || newPhotoKeyRef.current;\n    if (uploadedImagesStore.current.has(formKey)) {\n      uploadedImagesStore.current.delete(formKey);\n    }\n    \n    setEditingPhoto(null);\n    showAlert(photo.id ? 'Ð¤Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ñ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð°' : 'Ð¤Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ñ Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð°', 'success');\n    } catch (error) {\n      console.error('ÐÐµÐ¾Ð¶Ð¸Ð´Ð°Ð½Ð½Ð°Ñ Ð¾ÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¸ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ð¸ Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ð¸:', error);\n      showAlert(`ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¸ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ð¸ Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ð¸: ${error.message}`, 'error');\n    }\n  }, [photos]);\n\n  const deletePhoto = async (id) => {\n    // ÐÐ°Ñ…Ð¾Ð´Ð¸Ð¼ Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸ÑŽ Ð´Ð»Ñ ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ñ (Ð´Ð»Ñ Ð»Ð¾Ð³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ)\n    const photoToDelete = photos.find(p => p.id === id);\n    if (photoToDelete) {\n      const hasImage = photoToDelete.image && photoToDelete.image.startsWith('data:image');\n      console.log('ðŸ—‘ï¸ deletePhoto: Ð£Ð´Ð°Ð»ÐµÐ½Ð¸Ðµ Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ð¸:', {\n        id: photoToDelete.id,\n        caption: photoToDelete.caption,\n        hasImage: hasImage,\n        imageSize: hasImage ? photoToDelete.image.length : 0\n      });\n    }\n    \n    // Ð£Ð´Ð°Ð»ÑÐµÐ¼ Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸ÑŽ Ð¸Ð· Ð¼Ð°ÑÑÐ¸Ð²Ð° (Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ ÑƒÐ´Ð°Ð»ÑÐµÑ‚ÑÑ Ð²Ð¼ÐµÑÑ‚Ðµ Ñ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð¾Ð¼, Ñ‚Ð°Ðº ÐºÐ°Ðº Ð¾Ð½Ð¾ Ñ‡Ð°ÑÑ‚ÑŒ JSON)\n    const updated = photos.filter(p => p.id !== id);\n    setPhotos(updated);\n    \n    // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ð²ÑÐµ Ð¾ÑÑ‚Ð°Ð²ÑˆÐ¸ÐµÑÑ Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ð¸ Ð² Ñ„Ð°Ð¹Ð»\n    // ÐŸÑ€Ð¸ ÑÑ‚Ð¾Ð¼ ÑÑ‚Ð°Ñ€Ð¾Ðµ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ (base64) Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ ÑƒÐ´Ð°Ð»ÑÐµÑ‚ÑÑ, Ñ‚Ð°Ðº ÐºÐ°Ðº ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚ ÑƒÐ´Ð°Ð»ÐµÐ½ Ð¸Ð· Ð¼Ð°ÑÑÐ¸Ð²Ð°\n    const saveResult = await autoSavePhotos(updated);\n    if (saveResult.success) {\n      console.log('âœ… deletePhoto: Ð¤Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ñ Ð¸ ÐµÑ‘ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ ÑƒÐ´Ð°Ð»ÐµÐ½Ñ‹');\n    showAlert('Ð¤Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ñ ÑƒÐ´Ð°Ð»ÐµÐ½Ð°', 'success');\n    } else {\n      showAlert(`Ð¤Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ñ ÑƒÐ´Ð°Ð»ÐµÐ½Ð°, Ð½Ð¾ Ñ„Ð°Ð¹Ð» Ð½Ðµ ÑÐºÐ°Ñ‡Ð°Ð½: ${saveResult.message}`, 'error');\n    }\n  };\n\n  const validateMenuItem = (item) => {\n    if (!item.name || !item.name.trim()) {\n      showAlert('Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ðµ Ð±Ð»ÑŽÐ´Ð°', 'error');\n      return false;\n    }\n    if (!item.price || isNaN(parseFloat(item.price)) || parseFloat(item.price) <= 0) {\n      showAlert('Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½ÑƒÑŽ Ñ†ÐµÐ½Ñƒ (Ð±Ð¾Ð»ÑŒÑˆÐµ 0)', 'error');\n      return false;\n    }\n    if (!item.weight || !item.weight.trim()) {\n      showAlert('Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð²ÐµÑ/Ð¾Ð±ÑŠÐµÐ¼', 'error');\n      return false;\n    }\n    if (!item.description || !item.description.trim()) {\n      showAlert('Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð¾Ð¿Ð¸ÑÐ°Ð½Ð¸Ðµ Ð±Ð»ÑŽÐ´Ð°', 'error');\n      return false;\n    }\n    if (!item.image || !item.image.trim()) {\n      showAlert('Ð—Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚Ðµ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ', 'error');\n      return false;\n    }\n    if (!item.image.startsWith('data:image')) {\n      showAlert('Ð—Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚Ðµ Ñ„Ð°Ð¹Ð» Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ', 'error');\n      return false;\n    }\n    return true;\n  };\n\n  const saveMenuItem = async (item) => {\n    if (!validateMenuItem(item)) return;\n\n    console.log('ðŸ’¾ saveMenuItem: ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½Ñ‹ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð´Ð»Ñ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ:', {\n      id: item.id,\n      name: item.name,\n      hasImage: !!item.image,\n      imageLength: item.image ? item.image.length : 0,\n      imageStart: item.image ? item.image.substring(0, 50) : 'Ð½ÐµÑ‚'\n    });\n\n    // Ð¤Ð¾Ñ€Ð¼Ð°Ñ‚Ð¸Ñ€ÑƒÐµÐ¼ Ñ†ÐµÐ½Ñƒ (ÑƒÐ±Ð¸Ñ€Ð°ÐµÐ¼ \"â‚½\" ÐµÑÐ»Ð¸ ÐµÑÑ‚ÑŒ Ð¸ Ð¿Ñ€ÐµÐ¾Ð±Ñ€Ð°Ð·ÑƒÐµÐ¼ Ð² Ñ‡Ð¸ÑÐ»Ð¾)\n    const formattedItem = {\n      ...item,\n      price: item.price.toString().replace(' â‚½', '')\n    };\n\n    // Ð’ÐÐ–ÐÐž: ÑƒÐ±ÐµÐ¶Ð´Ð°ÐµÐ¼ÑÑ, Ñ‡Ñ‚Ð¾ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ Ð¿ÐµÑ€ÐµÐ´Ð°ÐµÑ‚ÑÑ Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¾\n    if (item.image) {\n      formattedItem.image = item.image;\n    }\n\n    console.log('ðŸ’¾ saveMenuItem: ÐžÑ‚Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ:', {\n      id: formattedItem.id,\n      name: formattedItem.name,\n      hasImage: !!formattedItem.image,\n      imageLength: formattedItem.image ? formattedItem.image.length : 0,\n      imageStart: formattedItem.image ? formattedItem.image.substring(0, 50) : 'Ð½ÐµÑ‚'\n    });\n\n    let updatedItems;\n    if (editingItem && editingItem.id) {\n      // Ð ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÑŽÑ‰ÐµÐ³Ð¾ Ð±Ð»ÑŽÐ´Ð° (Ð»ÑŽÐ±Ð¾Ð³Ð¾, Ð²ÐºÐ»ÑŽÑ‡Ð°Ñ Ð±Ð°Ð·Ð¾Ð²Ñ‹Ðµ)\n      const oldItem = menuItems.find(mi => mi.id === editingItem.id);\n      const imageChanged = oldItem?.image !== formattedItem.image;\n      \n      console.log('ðŸ’¾ saveMenuItem: Ð ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÑŽÑ‰ÐµÐ³Ð¾ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð°:', {\n        id: editingItem.id,\n        name: formattedItem.name,\n        oldImageSize: oldItem?.image ? oldItem.image.length : 0,\n        newImageSize: formattedItem.image ? formattedItem.image.length : 0,\n        imageChanged: imageChanged\n      });\n      \n      // Ð—Ð°Ð¼ÐµÐ½ÑÐµÐ¼ ÑÑ‚Ð°Ñ€Ñ‹Ð¹ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚ Ð½Ð¾Ð²Ñ‹Ð¼ (ÑÑ‚Ð°Ñ€Ð¾Ðµ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ ÑƒÐ´Ð°Ð»ÑÐµÑ‚ÑÑ Ð²Ð¼ÐµÑÑ‚Ðµ ÑÐ¾ ÑÑ‚Ð°Ñ€Ñ‹Ð¼ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð¾Ð¼)\n      updatedItems = menuItems.map(menuItem => \n        menuItem.id === editingItem.id ? { ...formattedItem, id: editingItem.id } : menuItem\n      );\n      \n      if (imageChanged) {\n        console.log('ðŸ”„ saveMenuItem: Ð˜Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ Ð·Ð°Ð¼ÐµÐ½ÐµÐ½Ð¾, ÑÑ‚Ð°Ñ€Ð¾Ðµ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ Ð±ÑƒÐ´ÐµÑ‚ ÑƒÐ´Ð°Ð»ÐµÐ½Ð¾ Ð¿Ñ€Ð¸ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ð¸');\n      }\n      \n      showAlert('Ð‘Ð»ÑŽÐ´Ð¾ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¾', 'success');\n    } else {\n      // Ð”Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð½Ð¾Ð²Ð¾Ð³Ð¾ Ð±Ð»ÑŽÐ´Ð°\n      // Ð“ÐµÐ½ÐµÑ€Ð¸Ñ€ÑƒÐµÐ¼ ÑƒÐ½Ð¸ÐºÐ°Ð»ÑŒÐ½Ñ‹Ð¹ ID, Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑÑ ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÑŽÑ‰Ð¸Ðµ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ñ‹\n      const newId = generateUniqueId(menuItems);\n      const newItem = {\n        ...formattedItem,\n        id: newId\n      };\n      updatedItems = [...menuItems, newItem];\n      showAlert('Ð‘Ð»ÑŽÐ´Ð¾ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¾', 'success');\n    }\n\n    setMenuItems(updatedItems);\n    \n    // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ð²ÑÐµ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ñ‹ Ð² Ñ„Ð°Ð¹Ð» (Ð²ÐºÐ»ÑŽÑ‡Ð°Ñ Ð¾Ñ‚Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ðµ Ð±Ð°Ð·Ð¾Ð²Ñ‹Ðµ)\n    const saveResult = await autoSaveMenu(updatedItems);\n    if (!saveResult.success) {\n      showAlert(`ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐºÐ°Ñ‡Ð¸Ð²Ð°Ð½Ð¸Ñ Ñ„Ð°Ð¹Ð»Ð° Ð¼ÐµÐ½ÑŽ: ${saveResult.message}`, 'error');\n    } else {\n      showAlert('Ð¤Ð°Ð¹Ð» menu.json ÑÐºÐ°Ñ‡Ð°Ð½', 'success');\n    }\n    \n    // ÐžÑ‡Ð¸Ñ‰Ð°ÐµÐ¼ Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ðµ Ð´Ð»Ñ ÑÑ‚Ð¾Ð¹ Ñ„Ð¾Ñ€Ð¼Ñ‹ Ð¿Ð¾ÑÐ»Ðµ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ\n    const formKey = editingItem?.id || newMenuItemKeyRef.current;\n    if (menuImagesStore.current.has(formKey)) {\n      menuImagesStore.current.delete(formKey);\n    }\n    \n    setEditingItem(null);\n  };\n\n  const startEditing = (item) => {\n    setEditingItem(item);\n  };\n\n  const cancelEditing = useCallback(() => {\n    // ÐžÑ‡Ð¸Ñ‰Ð°ÐµÐ¼ Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ðµ Ð´Ð»Ñ Ð½Ð¾Ð²Ð¾Ð¹ Ñ„Ð¾Ñ€Ð¼Ñ‹ Ð¿Ñ€Ð¸ Ð¾Ñ‚Ð¼ÐµÐ½Ðµ\n    const formKey = editingItem?.id || newMenuItemKeyRef.current;\n    if (menuImagesStore.current.has(formKey)) {\n      menuImagesStore.current.delete(formKey);\n    }\n    // ÐžÑ‡Ð¸Ñ‰Ð°ÐµÐ¼ localStorage Ñ Ð´Ð°Ð½Ð½Ñ‹Ð¼Ð¸ Ñ„Ð¾Ñ€Ð¼Ñ‹ Ð¿Ñ€Ð¸ Ð¾Ñ‚Ð¼ÐµÐ½Ðµ (Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð´Ð»Ñ Ð½Ð¾Ð²Ñ‹Ñ… ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð¾Ð²)\n    if (!editingItem?.id) {\n      try {\n        const formDataStorageKey = `menu-item-form-${formKey}`;\n        localStorage.removeItem(formDataStorageKey);\n        console.log('ðŸ—‘ï¸ cancelEditing: Ð”Ð°Ð½Ð½Ñ‹Ðµ Ñ„Ð¾Ñ€Ð¼Ñ‹ ÑƒÐ´Ð°Ð»ÐµÐ½Ñ‹ Ð¸Ð· localStorage Ð¿Ñ€Ð¸ Ð¾Ñ‚Ð¼ÐµÐ½Ðµ');\n      } catch (e) {\n        console.error('ÐžÑˆÐ¸Ð±ÐºÐ° ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ñ Ð´Ð°Ð½Ð½Ñ‹Ñ… Ñ„Ð¾Ñ€Ð¼Ñ‹ Ð¸Ð· localStorage:', e);\n      }\n    }\n    setEditingItem(null);\n  }, [editingItem]);\n\n  // ÐšÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚ Ñ„Ð¾Ñ€Ð¼Ñ‹ Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ Ñ‚ÐµÐ¼Ñ‹\n  const ThemeEditForm = ({ theme, onSave, onCancel }) => {\n    const [formData, setFormData] = useState(theme);\n\n    // Ð¤ÑƒÐ½ÐºÑ†Ð¸Ð¸ Ð´Ð»Ñ Ð²Ñ‹Ñ‡Ð¸ÑÐ»ÐµÐ½Ð¸Ñ Ð²Ð°Ñ€Ð¸Ð°Ð½Ñ‚Ð¾Ð² Ñ†Ð²ÐµÑ‚Ð° (Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ñ‹Ðµ ÐºÐ¾Ð¿Ð¸Ð¸)\n    const hexToRgbLocal = (hex) => {\n      const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n      return result ? {\n        r: parseInt(result[1], 16),\n        g: parseInt(result[2], 16),\n        b: parseInt(result[3], 16)\n      } : null;\n    };\n\n    const rgbToHexLocal = (r, g, b) => {\n      return \"#\" + [r, g, b].map(x => {\n        const hex = x.toString(16);\n        return hex.length === 1 ? \"0\" + hex : hex;\n      }).join(\"\");\n    };\n\n    const lightenColorLocal = (hex, percent = 20) => {\n      const rgb = hexToRgbLocal(hex);\n      if (!rgb) return hex;\n      \n      const r = Math.min(255, Math.round(rgb.r + (255 - rgb.r) * (percent / 100)));\n      const g = Math.min(255, Math.round(rgb.g + (255 - rgb.g) * (percent / 100)));\n      const b = Math.min(255, Math.round(rgb.b + (255 - rgb.b) * (percent / 100)));\n      \n      return rgbToHexLocal(r, g, b);\n    };\n\n    const darkenColorLocal = (hex, percent = 20) => {\n      const rgb = hexToRgbLocal(hex);\n      if (!rgb) return hex;\n      \n      const r = Math.max(0, Math.round(rgb.r * (1 - percent / 100)));\n      const g = Math.max(0, Math.round(rgb.g * (1 - percent / 100)));\n      const b = Math.max(0, Math.round(rgb.b * (1 - percent / 100)));\n      \n      return rgbToHexLocal(r, g, b);\n    };\n\n    const handleChange = (field, value) => {\n      const updated = {\n        ...formData,\n        [field]: value\n      };\n      \n      // Ð•ÑÐ»Ð¸ Ð¸Ð·Ð¼ÐµÐ½ÑÐµÑ‚ÑÑ Ð¾ÑÐ½Ð¾Ð²Ð½Ð¾Ð¹ Ñ†Ð²ÐµÑ‚, Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ Ð²Ñ‹Ñ‡Ð¸ÑÐ»ÑÐµÐ¼ ÑÐ²ÐµÑ‚Ð»Ñ‹Ð¹ Ð¸ Ñ‚ÐµÐ¼Ð½Ñ‹Ð¹ Ð²Ð°Ñ€Ð¸Ð°Ð½Ñ‚Ñ‹\n      if (field === 'primaryColor') {\n        updated.primaryLight = lightenColorLocal(value, 20);\n        updated.primaryDark = darkenColorLocal(value, 20);\n      }\n      \n      setFormData(updated);\n    };\n\n    const handleSubmit = (e) => {\n      e.preventDefault();\n      onSave(formData);\n    };\n\n    const colorFields = [\n      { key: 'primaryColor', label: 'ÐžÑÐ½Ð¾Ð²Ð½Ð¾Ð¹ Ñ†Ð²ÐµÑ‚' },\n      { key: 'secondaryColor', label: 'Ð¦Ð²ÐµÑ‚ ÐºÐ½Ð¾Ð¿Ð¾Ðº Ð¸ ÑÑÑ‹Ð»Ð¾Ðº' },\n      { key: 'secondaryLight', label: 'Ð¦Ð²ÐµÑ‚ ÐºÐ½Ð¾Ð¿Ð¾Ðº Ð¿Ñ€Ð¸ Ð½Ð°Ð²ÐµÐ´ÐµÐ½Ð¸Ð¸' },\n      { key: 'secondaryDark', label: 'Ð¦Ð²ÐµÑ‚ Ð°ÐºÑ‚Ð¸Ð²Ð½Ñ‹Ñ… ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð¾Ð²' },\n      { key: 'accentColor', label: 'ÐÐºÑ†ÐµÐ½Ñ‚Ð½Ñ‹Ð¹ Ñ†Ð²ÐµÑ‚ (Ð²Ñ‹Ð´ÐµÐ»ÐµÐ½Ð¸Ñ)' },\n      { key: 'backgroundColor', label: 'Ð¦Ð²ÐµÑ‚ Ñ„Ð¾Ð½Ð° ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ñ‹' },\n      { key: 'textColor', label: 'Ð¦Ð²ÐµÑ‚ Ð¾ÑÐ½Ð¾Ð²Ð½Ð¾Ð³Ð¾ Ñ‚ÐµÐºÑÑ‚Ð°' },\n      { key: 'textLight', label: 'Ð¦Ð²ÐµÑ‚ Ð²Ñ‚Ð¾Ñ€Ð¾ÑÑ‚ÐµÐ¿ÐµÐ½Ð½Ð¾Ð³Ð¾ Ñ‚ÐµÐºÑÑ‚Ð°' }\n    ];\n\n    return (\n      <div className=\"theme-edit-form\">\n        <form onSubmit={handleSubmit}>\n          <div className=\"form-group\">\n            <label>ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ Ñ‚ÐµÐ¼Ñ‹ *</label>\n            <input\n              type=\"text\"\n              value={formData.name}\n              onChange={(e) => handleChange('name', e.target.value)}\n              placeholder=\"ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ Ñ‚ÐµÐ¼Ñ‹\"\n              required\n            />\n          </div>\n\n          <div className=\"theme-colors-grid\">\n            {colorFields.map(field => (\n              <div key={field.key} className=\"color-picker-group\">\n                <label>{field.label}</label>\n                <div className=\"color-picker-wrapper\">\n                  <input\n                    type=\"color\"\n                    value={formData[field.key]}\n                    onChange={(e) => handleChange(field.key, e.target.value)}\n                    className=\"color-picker\"\n                  />\n                  <input\n                    type=\"text\"\n                    value={formData[field.key]}\n                    onChange={(e) => handleChange(field.key, e.target.value)}\n                    className=\"color-input\"\n                    placeholder=\"#000000\"\n                  />\n                  <div \n                    className=\"color-preview\"\n                    style={{ background: formData[field.key] }}\n                  ></div>\n                </div>\n              </div>\n            ))}\n          </div>\n\n          <div className=\"form-actions\">\n            <button type=\"submit\" className=\"save-btn\">\n              Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ\n            </button>\n            <button type=\"button\" className=\"cancel-btn\" onClick={onCancel}>\n              ÐžÑ‚Ð¼ÐµÐ½Ð°\n            </button>\n          </div>\n        </form>\n      </div>\n    );\n  };\n\n  // Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ Ð´Ð»Ñ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸, ÑÐ²Ð»ÑÐµÑ‚ÑÑ Ð»Ð¸ Ñ„Ð°Ð¹Ð» Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸ÐµÐ¼\n  // ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÑ‚ Ð¸ MIME-Ñ‚Ð¸Ð¿, Ð¸ Ñ€Ð°ÑÑˆÐ¸Ñ€ÐµÐ½Ð¸Ðµ Ñ„Ð°Ð¹Ð»Ð° Ð´Ð»Ñ Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ¸ Ð²ÑÐµÑ… Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ð¾Ð²\n  const isImageFile = (file) => {\n    // ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ MIME-Ñ‚Ð¸Ð¿ (Ð¾ÑÐ½Ð¾Ð²Ð½Ð°Ñ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ°)\n    if (file.type && file.type.startsWith('image/')) {\n      return true;\n    }\n    \n    // Fallback: Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ Ñ€Ð°ÑÑˆÐ¸Ñ€ÐµÐ½Ð¸Ðµ Ñ„Ð°Ð¹Ð»Ð°\n    // ÐŸÐ¾Ð´Ð´ÐµÑ€Ð¶Ð¸Ð²Ð°ÐµÐ¼ Ð²ÑÐµ Ð¿Ð¾Ð¿ÑƒÐ»ÑÑ€Ð½Ñ‹Ðµ Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ñ‹ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ð¹\n    const imageExtensions = [\n      'jpg', 'jpeg', 'png', 'gif', 'webp', 'bmp', 'svg', \n      'ico', 'tiff', 'tif', 'heic', 'heif', 'avif', 'apng'\n    ];\n    \n    const fileName = file.name.toLowerCase();\n    const extension = fileName.split('.').pop();\n    \n    return imageExtensions.includes(extension);\n  };\n\n  const convertFileToBase64 = (file) => {\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.onload = () => resolve(reader.result);\n      reader.onerror = reject;\n      reader.readAsDataURL(file);\n    });\n  };\n\n  // ÐšÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚ Ñ„Ð¾Ñ€Ð¼Ñ‹ Ð°Ð²Ñ‚Ð¾Ñ€Ð¸Ð·Ð°Ñ†Ð¸Ð¸\n  const LoginForm = ({ onLogin }) => {\n    const [username, setUsername] = useState('');\n    const [password, setPassword] = useState('');\n    const [error, setError] = useState('');\n\n    const handleSubmit = (e) => {\n      e.preventDefault();\n      setError('');\n      \n      if (!username.trim() || !password.trim()) {\n        setError('Ð—Ð°Ð¿Ð¾Ð»Ð½Ð¸Ñ‚Ðµ Ð²ÑÐµ Ð¿Ð¾Ð»Ñ');\n        return;\n      }\n\n      const success = onLogin(username, password);\n      if (!success) {\n        setError('ÐÐµÐ²ÐµÑ€Ð½Ñ‹Ð¹ Ð»Ð¾Ð³Ð¸Ð½ Ð¸Ð»Ð¸ Ð¿Ð°Ñ€Ð¾Ð»ÑŒ');\n        setPassword('');\n      }\n    };\n\n    return (\n      <div className=\"admin-login-container\">\n        <div className=\"admin-login-form\">\n          <div className=\"admin-login-header\">\n            <h1>ÐÐ´Ð¼Ð¸Ð½-Ð¿Ð°Ð½ÐµÐ»ÑŒ</h1>\n            <p>Ð’Ð¾Ð¹Ð´Ð¸Ñ‚Ðµ Ð´Ð»Ñ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ ÑÐ°Ð¹Ñ‚Ð¾Ð¼</p>\n          </div>\n          <form onSubmit={handleSubmit} className=\"login-form\">\n            <div className=\"form-group\">\n              <label htmlFor=\"username\">Ð›Ð¾Ð³Ð¸Ð½</label>\n              <input\n                id=\"username\"\n                type=\"text\"\n                value={username}\n                onChange={(e) => setUsername(e.target.value)}\n                placeholder=\"Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð»Ð¾Ð³Ð¸Ð½\"\n                autoFocus\n                className={error ? 'error' : ''}\n              />\n            </div>\n            <div className=\"form-group\">\n              <label htmlFor=\"password\">ÐŸÐ°Ñ€Ð¾Ð»ÑŒ</label>\n              <input\n                id=\"password\"\n                type=\"password\"\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n                placeholder=\"Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð¿Ð°Ñ€Ð¾Ð»ÑŒ\"\n                className={error ? 'error' : ''}\n              />\n            </div>\n            {error && <div className=\"login-error\">{error}</div>}\n            <button type=\"submit\" className=\"login-submit-btn\">\n              Ð’Ð¾Ð¹Ñ‚Ð¸\n            </button>\n          </form>\n        </div>\n      </div>\n    );\n  };\n\n  // ÐšÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚ Ñ„Ð¾Ñ€Ð¼Ñ‹ Ð´Ð»Ñ Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¸Ñ/Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ð¹\n  const PhotoForm = ({ photo, onSave, onCancel, onAlert, uploadedImagesStore, formKey }) => {\n    // Ð˜Ð·Ð²Ð»ÐµÐºÐ°ÐµÐ¼ ID Ñ„Ð¾Ñ‚Ð¾ Ð´Ð»Ñ Ð¾Ñ‚ÑÐ»ÐµÐ¶Ð¸Ð²Ð°Ð½Ð¸Ñ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ð¹\n    // Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ useMemo Ð´Ð»Ñ ÑÑ‚Ð°Ð±Ð¸Ð»Ð¸Ð·Ð°Ñ†Ð¸Ð¸, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð¸Ð·Ð±ÐµÐ¶Ð°Ñ‚ÑŒ Ð»Ð¸ÑˆÐ½Ð¸Ñ… Ð²Ñ‹Ñ‡Ð¸ÑÐ»ÐµÐ½Ð¸Ð¹\n    const photoId = useMemo(() => photo?.id, [photo?.id]);\n    \n    // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ ID Ñ„Ð¾Ñ‚Ð¾ Ð´Ð»Ñ Ð¾Ñ‚ÑÐ»ÐµÐ¶Ð¸Ð²Ð°Ð½Ð¸Ñ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ð¹\n    // Ð˜Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð¸Ñ€ÑƒÐµÐ¼ ref Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð¾Ð´Ð¸Ð½ Ñ€Ð°Ð· Ð¿Ñ€Ð¸ Ð¼Ð¾Ð½Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ð¸\n    const photoIdRef = useRef(photoId);\n    const isInitialMountRef = useRef(true);\n    \n    // Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð¾Ñ‚Ð´ÐµÐ»ÑŒÐ½Ð¾Ðµ ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ðµ Ð´Ð»Ñ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ\n    // Ð˜Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð¸Ñ€ÑƒÐµÐ¼ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð¾Ð´Ð¸Ð½ Ñ€Ð°Ð· Ð¿Ñ€Ð¸ Ð¼Ð¾Ð½Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ð¸\n    // Ð’Ð¾ÑÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼ Ð¸Ð· Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ð°, ÐµÑÐ»Ð¸ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ Ð±Ñ‹Ð»Ð¾ Ð·Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½Ð¾ Ñ€Ð°Ð½ÐµÐµ\n    const [image, setImage] = useState(() => {\n      // Ð¡Ð½Ð°Ñ‡Ð°Ð»Ð° Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ðµ\n      if (uploadedImagesStore && uploadedImagesStore.has(formKey)) {\n        return uploadedImagesStore.get(formKey);\n      }\n      return photo?.image || '';\n    });\n    const [caption, setCaption] = useState(photo?.caption || '');\n    const [isUploading, setIsUploading] = useState(false);\n    const [isDragging, setIsDragging] = useState(false);\n    const fileInputRef = useRef(null);\n    const userHasUploadedRef = useRef(false); // Ð¤Ð»Ð°Ð³: Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ Ð·Ð°Ð³Ñ€ÑƒÐ·Ð¸Ð» Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ\n    const uploadedImageRef = useRef(null); // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ð·Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½Ð½Ð¾Ðµ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ\n    const isProcessingFileRef = useRef(false); // Ð¤Ð»Ð°Ð³: Ñ„Ð°Ð¹Ð» Ð¾Ð±Ñ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°ÐµÑ‚ÑÑ\n\n    // Ð˜Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð¿Ñ€Ð¸ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ð¸ ID Ñ„Ð¾Ñ‚Ð¾ (Ð½Ðµ Ð¿Ñ€Ð¸ ÐºÐ°Ð¶Ð´Ð¾Ð¼ Ñ€ÐµÐ½Ð´ÐµÑ€Ðµ)\n    useEffect(() => {\n      const isInitialMount = isInitialMountRef.current;\n      isInitialMountRef.current = false;\n      \n      // Ð•ÑÐ»Ð¸ ID Ð¸Ð·Ð¼ÐµÐ½Ð¸Ð»ÑÑ (Ð¿ÐµÑ€ÐµÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ Ð¼ÐµÐ¶Ð´Ñƒ Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸ÐµÐ¼ Ð¸ ÑÐ¾Ð·Ð´Ð°Ð½Ð¸ÐµÐ¼ Ð½Ð¾Ð²Ð¾Ð³Ð¾)\n      if (photoIdRef.current !== photoId) {\n        photoIdRef.current = photoId;\n        \n        // Ð•ÑÐ»Ð¸ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ ÑƒÐ¶Ðµ Ð·Ð°Ð³Ñ€ÑƒÐ·Ð¸Ð» Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ Ð´Ð»Ñ Ð½Ð¾Ð²Ð¾Ð¹ Ñ„Ð¾Ñ€Ð¼Ñ‹, ÐÐ• ÑÐ±Ñ€Ð°ÑÑ‹Ð²Ð°ÐµÐ¼ ÐµÐ³Ð¾\n        if (userHasUploadedRef.current && !photoId && uploadedImageRef.current) {\n          // Ð’Ð¾ÑÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼ Ð·Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½Ð½Ð¾Ðµ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ\n          setImage(uploadedImageRef.current);\n          return; // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ð·Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½Ð½Ð¾Ðµ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¼ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ\n        }\n        \n        // Ð•ÑÐ»Ð¸ Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€ÑƒÐµÐ¼ ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÑŽÑ‰ÐµÐµ Ñ„Ð¾Ñ‚Ð¾ - Ð·Ð°Ð³Ñ€ÑƒÐ¶Ð°ÐµÐ¼ ÐµÐ³Ð¾ Ð´Ð°Ð½Ð½Ñ‹Ðµ\n        if (photoId && photo) {\n          userHasUploadedRef.current = false;\n          uploadedImageRef.current = null;\n          setImage(photo.image || '');\n          setCaption(photo.caption || '');\n        } else {\n          // ÐÐ¾Ð²Ð°Ñ Ñ„Ð¾Ñ€Ð¼Ð° - ÑÐ±Ñ€Ð°ÑÑ‹Ð²Ð°ÐµÐ¼ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ ÐµÑÐ»Ð¸ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ ÐµÑ‰Ðµ Ð½Ð¸Ñ‡ÐµÐ³Ð¾ Ð½Ðµ Ð·Ð°Ð³Ñ€ÑƒÐ·Ð¸Ð»\n          if (!userHasUploadedRef.current && !uploadedImageRef.current) {\n            setImage('');\n            setCaption('');\n          } else if (uploadedImageRef.current) {\n            // Ð’Ð¾ÑÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼ Ð·Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½Ð½Ð¾Ðµ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ\n            setImage(uploadedImageRef.current);\n          }\n        }\n      }\n      // ÐÐ• Ð¾Ð±Ñ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°ÐµÐ¼ isInitialMount Ð·Ð´ÐµÑÑŒ - ÑÑ‚Ð¾ Ð¼Ð¾Ð¶ÐµÑ‚ Ð²Ñ‹Ð·Ð²Ð°Ñ‚ÑŒ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ñ‹ Ð¿Ñ€Ð¸ Ð¿ÐµÑ€ÐµÑ€ÐµÐ½Ð´ÐµÑ€Ðµ\n    }, [photoId]); // Ð—Ð°Ð²Ð¸ÑÐ¸Ð¼ Ð¢ÐžÐ›Ð¬ÐšÐž Ð¾Ñ‚ photoId - ÑÑ‚Ð¾ ÑÑ‚Ð°Ð±Ð¸Ð»ÑŒÐ½Ð¾Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ\n    \n    // ÐžÑ‚Ð´ÐµÐ»ÑŒÐ½Ñ‹Ð¹ ÑÑ„Ñ„ÐµÐºÑ‚ Ð´Ð»Ñ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ Ð¿Ñ€Ð¸ Ð¿ÐµÑ€Ð²Ð¾Ð¼ Ð¼Ð¾Ð½Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ð¸\n    useEffect(() => {\n      if (isInitialMountRef.current && !photoId && image && image.startsWith('data:image')) {\n        uploadedImageRef.current = image;\n      }\n    }, []); // Ð¢Ð¾Ð»ÑŒÐºÐ¾ Ð¿Ñ€Ð¸ Ð¼Ð¾Ð½Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ð¸\n    \n    // ÐŸÐ¾ÑÑ‚Ð¾ÑÐ½Ð½Ð°Ñ Ð·Ð°Ñ‰Ð¸Ñ‚Ð° Ð¾Ñ‚ ÑÐ±Ñ€Ð¾ÑÐ° Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ Ð¿Ñ€Ð¸ Ð¿ÐµÑ€ÐµÑ€ÐµÐ½Ð´ÐµÑ€Ðµ\n    // Ð­Ñ‚Ð¾Ñ‚ ÑÑ„Ñ„ÐµÐºÑ‚ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑÐµÑ‚ Ð¸ Ð²Ð¾ÑÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÑ‚ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ Ð¸Ð· Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ð°, ÐµÑÐ»Ð¸ Ð¾Ð½Ð¾ Ð±Ñ‹Ð»Ð¾ ÑÐ±Ñ€Ð¾ÑˆÐµÐ½Ð¾\n    useEffect(() => {\n      // Ð¢Ð¾Ð»ÑŒÐºÐ¾ Ð´Ð»Ñ Ð½Ð¾Ð²Ð¾Ð¹ Ñ„Ð¾Ñ€Ð¼Ñ‹ (Ð±ÐµÐ· ID) Ð¸ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ ÐµÑÐ»Ð¸ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ Ð·Ð°Ð³Ñ€ÑƒÐ·Ð¸Ð» Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ\n      // Ð˜ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ Ð½Ðµ Ð±Ñ‹Ð»Ð¾ ÑÐ²Ð½Ð¾ ÑƒÐ´Ð°Ð»ÐµÐ½Ð¾ (ref Ð½Ðµ null)\n      if (!photoId && userHasUploadedRef.current && uploadedImageRef.current) {\n        // Ð•ÑÐ»Ð¸ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ Ð¿ÑƒÑÑ‚Ð¾Ðµ, Ð½Ð¾ Ð² ref Ð¸Ð»Ð¸ Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ðµ ÐµÑÑ‚ÑŒ - Ð²Ð¾ÑÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼\n        if (!image) {\n          // Ð¡Ð½Ð°Ñ‡Ð°Ð»Ð° Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ðµ\n          const storedImage = uploadedImagesStore && uploadedImagesStore.has(formKey) \n            ? uploadedImagesStore.get(formKey) \n            : null;\n          \n          if (storedImage) {\n            // Ð’Ð¾ÑÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼ Ð¸Ð· Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ð°\n            uploadedImageRef.current = storedImage;\n            setImage(storedImage);\n            return;\n          }\n          \n          // Ð•ÑÐ»Ð¸ Ð² Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ðµ Ð½ÐµÑ‚, Ð½Ð¾ Ð² ref ÐµÑÑ‚ÑŒ - Ð²Ð¾ÑÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼ Ð¸Ð· ref\n          if (uploadedImageRef.current) {\n            // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ð² Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ðµ Ð´Ð»Ñ Ð±ÑƒÐ´ÑƒÑ‰Ð¸Ñ… Ð¿ÐµÑ€ÐµÑ€ÐµÐ½Ð´ÐµÑ€Ð¾Ð²\n            if (uploadedImagesStore && formKey) {\n              uploadedImagesStore.set(formKey, uploadedImageRef.current);\n            }\n            setImage(uploadedImageRef.current);\n          }\n        }\n      }\n    }); // Ð‘ÐµÐ· Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚ÐµÐ¹ - ÑÑ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°ÐµÑ‚ Ð¿Ñ€Ð¸ ÐºÐ°Ð¶Ð´Ð¾Ð¼ Ñ€ÐµÐ½Ð´ÐµÑ€Ðµ Ð´Ð»Ñ Ð·Ð°Ñ‰Ð¸Ñ‚Ñ‹\n\n    const handleChange = (e) => {\n      if (e.target.name === 'caption') {\n        setCaption(e.target.value);\n      }\n    };\n\n    const processFile = async (file) => {\n      if (!file) {\n        return;\n      }\n\n      // ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ Ñ‚Ð¸Ð¿ Ñ„Ð°Ð¹Ð»Ð° (MIME-Ñ‚Ð¸Ð¿ Ð¸ Ñ€Ð°ÑÑˆÐ¸Ñ€ÐµÐ½Ð¸Ðµ)\n      if (!isImageFile(file)) {\n        onAlert('Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ñ„Ð°Ð¹Ð» Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ (JPG, PNG, GIF, WEBP, BMP, SVG, HEIC Ð¸ Ð´Ñ€ÑƒÐ³Ð¸Ðµ Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ñ‹)', 'error');\n        return;\n      }\n\n      // ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ Ñ€Ð°Ð·Ð¼ÐµÑ€ Ñ„Ð°Ð¹Ð»Ð° (Ð¼Ð°ÐºÑÐ¸Ð¼ÑƒÐ¼ 5MB)\n      if (file.size > 5 * 1024 * 1024) {\n        onAlert('Ð Ð°Ð·Ð¼ÐµÑ€ Ñ„Ð°Ð¹Ð»Ð° Ð½Ðµ Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð¿Ñ€ÐµÐ²Ñ‹ÑˆÐ°Ñ‚ÑŒ 5MB', 'error');\n        return;\n      }\n\n      setIsUploading(true);\n      try {\n        const base64 = await convertFileToBase64(file);\n        \n        // Ð£ÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼ Ñ„Ð»Ð°Ð³, Ñ‡Ñ‚Ð¾ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ Ð·Ð°Ð³Ñ€ÑƒÐ·Ð¸Ð» Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ\n        userHasUploadedRef.current = true;\n        uploadedImageRef.current = base64; // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ð² ref Ð´Ð»Ñ Ð·Ð°Ñ‰Ð¸Ñ‚Ñ‹ Ð¾Ñ‚ ÑÐ±Ñ€Ð¾ÑÐ°\n        \n        // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ð² Ð³Ð»Ð¾Ð±Ð°Ð»ÑŒÐ½Ð¾Ðµ Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ðµ, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð½Ðµ Ð¿Ð¾Ñ‚ÐµÑ€ÑÑ‚ÑŒ Ð¿Ñ€Ð¸ Ð¿ÐµÑ€ÐµÑ€ÐµÐ½Ð´ÐµÑ€Ðµ\n        if (uploadedImagesStore && formKey) {\n          uploadedImagesStore.set(formKey, base64);\n        }\n        \n        // ÐžÐ±Ð½Ð¾Ð²Ð»ÑÐµÐ¼ ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ðµ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ Ñ‡ÐµÑ€ÐµÐ· Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾Ðµ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ\n        // Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð³Ð°Ñ€Ð°Ð½Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ, Ñ‡Ñ‚Ð¾ Ð¼Ñ‹ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð°ÐºÑ‚ÑƒÐ°Ð»ÑŒÐ½Ð¾Ðµ ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ðµ\n        setImage(prevImage => {\n          // Ð•ÑÐ»Ð¸ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ ÑƒÐ¶Ðµ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ð¾ Ð¸ ÑÐ¾Ð²Ð¿Ð°Ð´Ð°ÐµÑ‚, Ð½Ðµ Ð¾Ð±Ð½Ð¾Ð²Ð»ÑÐµÐ¼\n          if (prevImage === base64) {\n            return prevImage;\n          }\n          return base64;\n        });\n        \n        // ÐžÑ‚ÐºÐ»Ð°Ð´Ñ‹Ð²Ð°ÐµÐ¼ Ð²Ñ‹Ð·Ð¾Ð² onAlert, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð´Ð°Ñ‚ÑŒ React Ð²Ñ€ÐµÐ¼Ñ Ð¾Ð±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ðµ\n        // Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð·Ð°Ð´ÐµÑ€Ð¶ÐºÑƒ, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð³Ð°Ñ€Ð°Ð½Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ, Ñ‡Ñ‚Ð¾ ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ðµ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¾\n        // Ð¸ ÐºÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚ ÑƒÑÐ¿ÐµÐ» Ð¾Ñ‚Ñ€ÐµÐ½Ð´ÐµÑ€Ð¸Ñ‚ÑŒÑÑ Ñ Ð½Ð¾Ð²Ñ‹Ð¼ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸ÐµÐ¼\n        setTimeout(() => {\n          // Ð¤Ð¸Ð½Ð°Ð»ÑŒÐ½Ð°Ñ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð¿ÐµÑ€ÐµÐ´ Ð²Ñ‹Ð·Ð¾Ð²Ð¾Ð¼ onAlert\n          setImage(currentImage => {\n            // Ð•ÑÐ»Ð¸ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ Ð±Ñ‹Ð»Ð¾ ÑÐ±Ñ€Ð¾ÑˆÐµÐ½Ð¾, Ð½Ð¾ Ð² ref Ð¾Ð½Ð¾ ÐµÑÑ‚ÑŒ - Ð²Ð¾ÑÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼\n            if (!currentImage && uploadedImageRef.current) {\n              return uploadedImageRef.current;\n            }\n            return currentImage;\n          });\n          \n          // Ð’Ñ‹Ð·Ñ‹Ð²Ð°ÐµÐ¼ onAlert Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð¿Ð¾ÑÐ»Ðµ Ð¿Ð¾Ð´Ñ‚Ð²ÐµÑ€Ð¶Ð´ÐµÐ½Ð¸Ñ, Ñ‡Ñ‚Ð¾ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ð¾\n          onAlert('Ð˜Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ Ð·Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½Ð¾', 'success');\n        }, 150);\n      } catch (error) {\n        console.error('ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ñ„Ð°Ð¹Ð»Ð°:', error);\n        onAlert('ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ñ„Ð°Ð¹Ð»Ð°', 'error');\n      } finally {\n        setIsUploading(false);\n      }\n    };\n\n    const handleFileChange = async (e) => {\n      // Ð—Ð°Ñ‰Ð¸Ñ‚Ð° Ð¾Ñ‚ Ð¿Ð¾Ð²Ñ‚Ð¾Ñ€Ð½Ñ‹Ñ… Ð²Ñ‹Ð·Ð¾Ð²Ð¾Ð²\n      if (isProcessingFileRef.current) {\n        return;\n      }\n      \n      const file = e.target.files?.[0];\n      if (!file) {\n        return;\n      }\n      \n      // Ð£ÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼ Ñ„Ð»Ð°Ð³ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸\n      isProcessingFileRef.current = true;\n      \n      // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ ÑÑÑ‹Ð»ÐºÑƒ Ð½Ð° input Ð´Ð»Ñ Ð¾Ñ‡Ð¸ÑÑ‚ÐºÐ¸ Ð¿Ð¾ÑÐ»Ðµ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸\n      const input = e.target;\n      \n      try {\n        await processFile(file);\n      } finally {\n        // Ð¡Ð±Ñ€Ð°ÑÑ‹Ð²Ð°ÐµÐ¼ Ñ„Ð»Ð°Ð³ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸\n        isProcessingFileRef.current = false;\n        \n        // ÐžÑ‡Ð¸Ñ‰Ð°ÐµÐ¼ input Ð¿Ð¾ÑÐ»Ðµ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð¼Ð¾Ð¶Ð½Ð¾ Ð±Ñ‹Ð»Ð¾ Ð²Ñ‹Ð±Ñ€Ð°Ñ‚ÑŒ Ñ‚Ð¾Ñ‚ Ð¶Ðµ Ñ„Ð°Ð¹Ð» ÑÐ½Ð¾Ð²Ð°\n        // Ð”ÐµÐ»Ð°ÐµÐ¼ ÑÑ‚Ð¾ Ñ Ð½ÐµÐ±Ð¾Ð»ÑŒÑˆÐ¾Ð¹ Ð·Ð°Ð´ÐµÑ€Ð¶ÐºÐ¾Ð¹, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð½Ðµ Ð¼ÐµÑˆÐ°Ñ‚ÑŒ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐµ\n        setTimeout(() => {\n          if (input) {\n            input.value = '';\n          }\n        }, 100);\n      }\n    };\n\n    const handleDragOver = (e) => {\n      e.preventDefault();\n      e.stopPropagation();\n      setIsDragging(true);\n    };\n\n    const handleDragLeave = (e) => {\n      e.preventDefault();\n      e.stopPropagation();\n      setIsDragging(false);\n    };\n\n    const handleDrop = async (e) => {\n      e.preventDefault();\n      e.stopPropagation();\n      setIsDragging(false);\n\n      const file = e.dataTransfer.files?.[0];\n      if (file) {\n        console.log('Ð¤Ð°Ð¹Ð» Ð¿ÐµÑ€ÐµÑ‚Ð°Ñ‰ÐµÐ½ (PhotoForm):', file.name, file.type, file.size);\n        await processFile(file);\n      }\n    };\n\n    const handleSubmit = (e) => {\n      e.preventDefault();\n      e.stopPropagation();\n      \n      if (!image || !image.trim()) {\n        onAlert('Ð—Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚Ðµ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ', 'error');\n        return;\n      }\n      \n      if (!image.startsWith('data:image')) {\n        onAlert('ÐžÑˆÐ¸Ð±ÐºÐ°: Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ Ð½Ðµ Ð·Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½Ð¾ Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¾', 'error');\n        return;\n      }\n      \n      const photoData = {\n        ...(photo?.id && { id: photo.id }),\n        image: image.trim(),\n        caption: caption.trim() || undefined\n      };\n      \n      onSave(photoData);\n    };\n\n    return (\n      <div className=\"modal-overlay\">\n        <div className=\"modal-content\">\n          <h2>{photo ? 'Ð ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ñ„Ð¾Ñ‚Ð¾' : 'Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ñ„Ð¾Ñ‚Ð¾'}</h2>\n          <form onSubmit={handleSubmit} noValidate>\n            <div className=\"form-group\">\n              <label>Ð—Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚ÑŒ Ñ„Ð°Ð¹Ð» *</label>\n              <div \n                className={`file-upload-dropzone ${isDragging ? 'dragging' : ''} ${image ? 'has-image' : ''}`}\n                onDragOver={handleDragOver}\n                onDragLeave={handleDragLeave}\n                onDrop={handleDrop}\n              >\n                <div className=\"file-upload-wrapper\">\n                  <input\n                    ref={fileInputRef}\n                    type=\"file\"\n                    accept=\"image/*\"\n                    onChange={handleFileChange}\n                    className=\"file-input-hidden\"\n                    disabled={isUploading}\n                  />\n                  <button\n                    type=\"button\"\n                    className=\"file-upload-button\"\n                    onClick={(e) => {\n                      e.preventDefault();\n                      if (fileInputRef.current) {\n                        fileInputRef.current.click();\n                      }\n                    }}\n                    disabled={isUploading}\n                  >\n                    {isUploading ? (\n                      <>\n                        <span className=\"upload-icon\">â³</span>\n                        <span>Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ°...</span>\n                      </>\n                    ) : (\n                      <>\n                        <span className=\"upload-icon\">ðŸ“·</span>\n                        <span>Ð’Ñ‹Ð±Ñ€Ð°Ñ‚ÑŒ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ</span>\n                      </>\n                    )}\n                  </button>\n                  {image && !isUploading && (\n                    <button\n                      type=\"button\"\n                      className=\"file-remove-button\"\n                      onClick={() => {\n                        userHasUploadedRef.current = false; // Ð¡Ð±Ñ€Ð°ÑÑ‹Ð²Ð°ÐµÐ¼ Ñ„Ð»Ð°Ð³ Ð¿Ñ€Ð¸ ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ð¸\n                        uploadedImageRef.current = null; // ÐžÑ‡Ð¸Ñ‰Ð°ÐµÐ¼ ref\n                        // ÐžÑ‡Ð¸Ñ‰Ð°ÐµÐ¼ Ð¸Ð· Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ð°\n                        if (uploadedImagesStore && formKey) {\n                          uploadedImagesStore.delete(formKey);\n                        }\n                        setImage('');\n                        if (fileInputRef.current) {\n                          fileInputRef.current.value = '';\n                        }\n                      }}\n                    >\n                      âœ•\n                    </button>\n                  )}\n                </div>\n                {!image && (\n                  <p className=\"drag-drop-hint\">\n                    Ð¸Ð»Ð¸ Ð¿ÐµÑ€ÐµÑ‚Ð°Ñ‰Ð¸Ñ‚Ðµ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ ÑÑŽÐ´Ð°\n                  </p>\n                )}\n              </div>\n            </div>\n\n            {image && image.trim() ? (\n              <div className=\"form-group\">\n                <label>ÐŸÑ€ÐµÐ´Ð¿Ñ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€:</label>\n                <div className=\"photo-preview-modern\">\n                  <img\n                    src={image}\n                    alt=\"ÐŸÑ€ÐµÐ´Ð¿Ñ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€\"\n                    onError={(e) => {\n                      e.target.src = 'https://via.placeholder.com/300x200/8B7355/FFFFFF?text=Ð¢Ð±Ð¸Ð»Ð¸ÑÐ¸';\n                    }}\n                  />\n                  <div className=\"photo-preview-overlay\">\n                    <span className=\"preview-badge\">ÐŸÑ€ÐµÐ´Ð¿Ñ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€</span>\n                  </div>\n                </div>\n              </div>\n            ) : (\n              <div className=\"form-group\">\n                <p style={{ color: '#999', fontStyle: 'italic', fontSize: '0.9rem' }}>\n                  ÐŸÑ€ÐµÐ´Ð¿Ñ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€ Ð¿Ð¾ÑÐ²Ð¸Ñ‚ÑÑ Ð¿Ð¾ÑÐ»Ðµ Ð²Ñ‹Ð±Ð¾Ñ€Ð° Ñ„Ð°Ð¹Ð»Ð°\n                </p>\n              </div>\n            )}\n\n            <div className=\"form-group\">\n              <label>ÐŸÐ¾Ð´Ð¿Ð¸ÑÑŒ (Ð½ÐµÐ¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾)</label>\n              <input\n                type=\"text\"\n                name=\"caption\"\n                value={caption}\n                onChange={handleChange}\n                placeholder=\"ÐŸÐ¾Ð´Ð¿Ð¸ÑÑŒ Ðº Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ð¸\"\n              />\n            </div>\n\n            <div className=\"form-actions\">\n              <button type=\"submit\" className=\"save-btn\">\n                {photo ? 'ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ' : 'Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ'}\n              </button>\n              <button type=\"button\" className=\"cancel-btn\" onClick={onCancel}>\n                ÐžÑ‚Ð¼ÐµÐ½Ð°\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    );\n  };\n\n  const MenuItemForm = ({ item, onSave, onCancel, onAlert, menuImagesStore, formKey }) => {\n    const defaultCategory = categories.length > 0 ? categories[0].key : 'cold';\n    \n    // Ð˜Ð·Ð²Ð»ÐµÐºÐ°ÐµÐ¼ ID ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð° Ð´Ð»Ñ Ð¾Ñ‚ÑÐ»ÐµÐ¶Ð¸Ð²Ð°Ð½Ð¸Ñ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ð¹\n    const itemId = useMemo(() => item?.id, [item?.id]);\n    \n    // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ ID ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð° Ð´Ð»Ñ Ð¾Ñ‚ÑÐ»ÐµÐ¶Ð¸Ð²Ð°Ð½Ð¸Ñ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ð¹\n    const itemIdRef = useRef(itemId);\n    const isInitialMountRef = useRef(true);\n    \n    // Ð˜Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð¸Ñ€ÑƒÐµÐ¼ refs Ð”Ðž useState, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð¼Ð¾Ð¶Ð½Ð¾ Ð±Ñ‹Ð»Ð¾ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ Ð¸Ñ… Ð² Ð¸Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ‚Ð¾Ñ€Ðµ\n    const fileInputRef = useRef(null);\n    const isProcessingFileRef = useRef(false); // Ð¤Ð»Ð°Ð³: Ñ„Ð°Ð¹Ð» Ð¾Ð±Ñ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°ÐµÑ‚ÑÑ\n    const uploadedImageRef = useRef(null); // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ð·Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½Ð½Ð¾Ðµ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ\n    const userHasUploadedRef = useRef(false); // Ð¤Ð»Ð°Ð³: Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ Ð·Ð°Ð³Ñ€ÑƒÐ·Ð¸Ð» Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ\n    \n    // ÐšÐ»ÑŽÑ‡ Ð´Ð»Ñ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ Ð´Ð°Ð½Ð½Ñ‹Ñ… Ñ„Ð¾Ñ€Ð¼Ñ‹ Ð² localStorage\n    const formDataStorageKey = `menu-item-form-${formKey}`;\n    \n    // Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð¾Ñ‚Ð´ÐµÐ»ÑŒÐ½Ð¾Ðµ ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ðµ Ð´Ð»Ñ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ (ÐºÐ°Ðº Ð² PhotoForm)\n    const [image, setImage] = useState(() => {\n      // Ð¡Ð½Ð°Ñ‡Ð°Ð»Ð° Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ðµ\n      if (menuImagesStore && menuImagesStore.has(formKey)) {\n        const storedImage = menuImagesStore.get(formKey);\n        // Ð•ÑÐ»Ð¸ Ð² Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ðµ ÐµÑÑ‚ÑŒ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ, ÑƒÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼ Ñ„Ð»Ð°Ð³Ð¸\n        if (storedImage && storedImage.startsWith('data:image')) {\n          userHasUploadedRef.current = true;\n          uploadedImageRef.current = storedImage;\n        }\n        return storedImage;\n      }\n      return item?.image || '';\n    });\n    \n    const [formData, setFormData] = useState(() => {\n      // Ð•ÑÐ»Ð¸ Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€ÑƒÐµÐ¼ ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÑŽÑ‰Ð¸Ð¹ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚ - Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ ÐµÐ³Ð¾ Ð´Ð°Ð½Ð½Ñ‹Ðµ\n      if (item) {\n        return {\n          name: item.name || '',\n          price: item.price.toString().replace(' â‚½', ''),\n          weight: item.weight || '',\n          description: item.description || '',\n          category: item.category || defaultCategory\n        };\n      }\n      \n      // Ð”Ð»Ñ Ð½Ð¾Ð²Ð¾Ð¹ Ñ„Ð¾Ñ€Ð¼Ñ‹ - Ð¿Ñ‹Ñ‚Ð°ÐµÐ¼ÑÑ Ð²Ð¾ÑÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Ð¸Ð· localStorage\n      const savedFormData = localStorage.getItem(formDataStorageKey);\n      if (savedFormData) {\n        try {\n          const parsed = JSON.parse(savedFormData);\n          return {\n            name: parsed.name || '',\n            price: parsed.price || '',\n            weight: parsed.weight || '',\n            description: parsed.description || '',\n            category: parsed.category || defaultCategory\n          };\n        } catch (e) {\n          console.error('ÐžÑˆÐ¸Ð±ÐºÐ° Ð²Ð¾ÑÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ñ Ð´Ð°Ð½Ð½Ñ‹Ñ… Ñ„Ð¾Ñ€Ð¼Ñ‹ Ð¸Ð· localStorage:', e);\n        }\n      }\n      \n      // Ð•ÑÐ»Ð¸ Ð½ÐµÑ‚ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð½Ñ‹Ñ… Ð´Ð°Ð½Ð½Ñ‹Ñ… - ÑÐ¾Ð·Ð´Ð°ÐµÐ¼ Ð¿ÑƒÑÑ‚ÑƒÑŽ Ñ„Ð¾Ñ€Ð¼Ñƒ\n      return {\n        name: '',\n        price: '',\n        weight: '',\n        description: '',\n        category: defaultCategory\n      };\n    });\n\n    const [errors, setErrors] = useState({});\n    const [isUploading, setIsUploading] = useState(false);\n    \n    // Ð˜Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð¿Ñ€Ð¸ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ð¸ ID ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð° (Ð½Ðµ Ð¿Ñ€Ð¸ ÐºÐ°Ð¶Ð´Ð¾Ð¼ Ñ€ÐµÐ½Ð´ÐµÑ€Ðµ)\n    useEffect(() => {\n      const isInitialMount = isInitialMountRef.current;\n      isInitialMountRef.current = false;\n      \n      // Ð•ÑÐ»Ð¸ ID Ð¸Ð·Ð¼ÐµÐ½Ð¸Ð»ÑÑ (Ð¿ÐµÑ€ÐµÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ Ð¼ÐµÐ¶Ð´Ñƒ Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸ÐµÐ¼ Ð¸ ÑÐ¾Ð·Ð´Ð°Ð½Ð¸ÐµÐ¼ Ð½Ð¾Ð²Ð¾Ð³Ð¾)\n      if (itemIdRef.current !== itemId) {\n        itemIdRef.current = itemId;\n        \n        // Ð•ÑÐ»Ð¸ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ ÑƒÐ¶Ðµ Ð·Ð°Ð³Ñ€ÑƒÐ·Ð¸Ð» Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ Ð´Ð»Ñ Ð½Ð¾Ð²Ð¾Ð¹ Ñ„Ð¾Ñ€Ð¼Ñ‹, ÐÐ• ÑÐ±Ñ€Ð°ÑÑ‹Ð²Ð°ÐµÐ¼ ÐµÐ³Ð¾\n        if (userHasUploadedRef.current && !itemId && uploadedImageRef.current) {\n          // Ð’Ð¾ÑÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼ Ð·Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½Ð½Ð¾Ðµ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ\n          setImage(uploadedImageRef.current);\n          return; // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ð·Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½Ð½Ð¾Ðµ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¼ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ\n        }\n        \n        // Ð•ÑÐ»Ð¸ Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€ÑƒÐµÐ¼ ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÑŽÑ‰Ð¸Ð¹ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚ - Ð·Ð°Ð³Ñ€ÑƒÐ¶Ð°ÐµÐ¼ ÐµÐ³Ð¾ Ð´Ð°Ð½Ð½Ñ‹Ðµ\n        if (itemId && item) {\n          // Ð•ÑÐ»Ð¸ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ ÑƒÐ¶Ðµ Ð·Ð°Ð³Ñ€ÑƒÐ·Ð¸Ð» Ð½Ð¾Ð²Ð¾Ðµ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¸ Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ð¸, ÐÐ• ÑÐ±Ñ€Ð°ÑÑ‹Ð²Ð°ÐµÐ¼ ÐµÐ³Ð¾\n          if (userHasUploadedRef.current && uploadedImageRef.current) {\n            // ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ðµ\n            const storedImage = menuImagesStore && menuImagesStore.has(formKey) \n              ? menuImagesStore.get(formKey) \n              : uploadedImageRef.current;\n            \n            // Ð’Ð¾ÑÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼ Ð·Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½Ð½Ð¾Ðµ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¼ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ\n            setImage(storedImage);\n            uploadedImageRef.current = storedImage;\n            \n            // ÐžÐ±Ð½Ð¾Ð²Ð»ÑÐµÐ¼ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ñ„Ð¾Ñ€Ð¼Ñƒ, Ð½Ð¾ Ð½Ðµ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ\n            setFormData({\n              name: item.name || '',\n              price: item.price.toString().replace(' â‚½', ''),\n              weight: item.weight || '',\n              description: item.description || '',\n              category: item.category || defaultCategory\n            });\n          } else {\n            // ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ ÐµÑ‰Ðµ Ð½Ðµ Ð·Ð°Ð³Ñ€ÑƒÐ·Ð¸Ð» Ð½Ð¾Ð²Ð¾Ðµ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ - Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÑŽÑ‰ÐµÐµ\n          userHasUploadedRef.current = false;\n          uploadedImageRef.current = null;\n          setImage(item.image || '');\n          setFormData({\n            name: item.name || '',\n            price: item.price.toString().replace(' â‚½', ''),\n            weight: item.weight || '',\n            description: item.description || '',\n            category: item.category || defaultCategory\n          });\n          }\n        } else {\n          // ÐÐ¾Ð²Ð°Ñ Ñ„Ð¾Ñ€Ð¼Ð° - ÑÐ±Ñ€Ð°ÑÑ‹Ð²Ð°ÐµÐ¼ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ ÐµÑÐ»Ð¸ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ ÐµÑ‰Ðµ Ð½Ð¸Ñ‡ÐµÐ³Ð¾ Ð½Ðµ Ð·Ð°Ð³Ñ€ÑƒÐ·Ð¸Ð»\n          if (!userHasUploadedRef.current && !uploadedImageRef.current) {\n            setImage('');\n            setFormData({\n              name: '',\n              price: '',\n              weight: '',\n              description: '',\n              category: defaultCategory\n            });\n          } else if (uploadedImageRef.current) {\n            // Ð’Ð¾ÑÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼ Ð·Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½Ð½Ð¾Ðµ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ\n            setImage(uploadedImageRef.current);\n          }\n        }\n      }\n    }, [itemId, item, defaultCategory]);\n    \n    // ÐžÑ‚Ð´ÐµÐ»ÑŒÐ½Ñ‹Ð¹ ÑÑ„Ñ„ÐµÐºÑ‚ Ð´Ð»Ñ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ Ð¿Ñ€Ð¸ Ð¿ÐµÑ€Ð²Ð¾Ð¼ Ð¼Ð¾Ð½Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ð¸\n    useEffect(() => {\n      if (isInitialMountRef.current && !itemId && image && image.startsWith('data:image')) {\n        uploadedImageRef.current = image;\n      }\n    }, []); // Ð¢Ð¾Ð»ÑŒÐºÐ¾ Ð¿Ñ€Ð¸ Ð¼Ð¾Ð½Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ð¸\n    \n    // ÐŸÐ¾ÑÑ‚Ð¾ÑÐ½Ð½Ð°Ñ Ð·Ð°Ñ‰Ð¸Ñ‚Ð° Ð¾Ñ‚ ÑÐ±Ñ€Ð¾ÑÐ° Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ Ð¿Ñ€Ð¸ Ð¿ÐµÑ€ÐµÑ€ÐµÐ½Ð´ÐµÑ€Ðµ\n    // Ð­Ñ‚Ð¾Ñ‚ ÑÑ„Ñ„ÐµÐºÑ‚ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑÐµÑ‚ Ð¸ Ð²Ð¾ÑÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÑ‚ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ Ð¸Ð· Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ð°, ÐµÑÐ»Ð¸ Ð¾Ð½Ð¾ Ð±Ñ‹Ð»Ð¾ ÑÐ±Ñ€Ð¾ÑˆÐµÐ½Ð¾\n    // Ð Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ Ð´Ð»Ñ Ð½Ð¾Ð²Ñ‹Ñ… Ñ„Ð¾Ñ€Ð¼ (Ð±ÐµÐ· itemId) Ð¸ Ð¿Ñ€Ð¸ Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ð¸ (Ñ itemId), ÐµÑÐ»Ð¸ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ Ð·Ð°Ð³Ñ€ÑƒÐ·Ð¸Ð» Ð½Ð¾Ð²Ð¾Ðµ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ\n    useEffect(() => {\n      // Ð•ÑÐ»Ð¸ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ Ð·Ð°Ð³Ñ€ÑƒÐ·Ð¸Ð» Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ (Ð´Ð»Ñ Ð½Ð¾Ð²Ð¾Ð¹ Ñ„Ð¾Ñ€Ð¼Ñ‹ Ð¸Ð»Ð¸ Ð¿Ñ€Ð¸ Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ð¸)\n      if (userHasUploadedRef.current) {\n        // Ð¡Ð½Ð°Ñ‡Ð°Ð»Ð° Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ðµ\n        const storedImage = menuImagesStore && menuImagesStore.has(formKey) \n          ? menuImagesStore.get(formKey) \n          : null;\n        \n        if (storedImage) {\n          // Ð’Ð¾ÑÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼ Ð¸Ð· Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ð°\n          uploadedImageRef.current = storedImage;\n          // ÐžÐ±Ð½Ð¾Ð²Ð»ÑÐµÐ¼ ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ðµ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ ÐµÑÐ»Ð¸ Ñ‚ÐµÐºÑƒÑ‰ÐµÐµ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ Ð¾Ñ‚Ð»Ð¸Ñ‡Ð°ÐµÑ‚ÑÑ\n          setImage(prevImage => {\n            if (prevImage !== storedImage) {\n              return storedImage;\n            }\n            return prevImage;\n          });\n          return;\n        }\n        \n        // Ð•ÑÐ»Ð¸ Ð² Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ðµ Ð½ÐµÑ‚, Ð½Ð¾ Ð² ref ÐµÑÑ‚ÑŒ - Ð²Ð¾ÑÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼ Ð¸Ð· ref\n        if (uploadedImageRef.current) {\n          // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ð² Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ðµ Ð´Ð»Ñ Ð±ÑƒÐ´ÑƒÑ‰Ð¸Ñ… Ð¿ÐµÑ€ÐµÑ€ÐµÐ½Ð´ÐµÑ€Ð¾Ð²\n          if (menuImagesStore && formKey) {\n            menuImagesStore.set(formKey, uploadedImageRef.current);\n          }\n          // ÐžÐ±Ð½Ð¾Ð²Ð»ÑÐµÐ¼ ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ðµ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ ÐµÑÐ»Ð¸ Ñ‚ÐµÐºÑƒÑ‰ÐµÐµ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ Ð¾Ñ‚Ð»Ð¸Ñ‡Ð°ÐµÑ‚ÑÑ\n          setImage(prevImage => {\n            if (prevImage !== uploadedImageRef.current) {\n              return uploadedImageRef.current;\n            }\n            return prevImage;\n          });\n        }\n      }\n    }); // Ð‘ÐµÐ· Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚ÐµÐ¹ - ÑÑ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°ÐµÑ‚ Ð¿Ñ€Ð¸ ÐºÐ°Ð¶Ð´Ð¾Ð¼ Ñ€ÐµÐ½Ð´ÐµÑ€Ðµ Ð´Ð»Ñ Ð·Ð°Ñ‰Ð¸Ñ‚Ñ‹\n\n    const validateField = (name, value) => {\n      const newErrors = { ...errors };\n      \n      switch (name) {\n        case 'name':\n          if (!value.trim()) newErrors.name = 'ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ Ð¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾';\n          else delete newErrors.name;\n          break;\n        case 'price':\n          if (!value || isNaN(parseFloat(value)) || parseFloat(value) <= 0) \n            newErrors.price = 'Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½ÑƒÑŽ Ñ†ÐµÐ½Ñƒ';\n          else delete newErrors.price;\n          break;\n        case 'weight':\n          if (!value.trim()) newErrors.weight = 'Ð’ÐµÑ/Ð¾Ð±ÑŠÐµÐ¼ Ð¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÐµÐ½';\n          else delete newErrors.weight;\n          break;\n        case 'description':\n          if (!value.trim()) newErrors.description = 'ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ Ð¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾';\n          else delete newErrors.description;\n          break;\n        case 'image':\n          if (!value.trim()) newErrors.image = 'Ð—Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚Ðµ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ';\n          else if (!value.startsWith('data:image')) {\n            newErrors.image = 'Ð—Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚Ðµ Ñ„Ð°Ð¹Ð» Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ';\n          }\n          else delete newErrors.image;\n          break;\n        default:\n          break;\n      }\n      \n      setErrors(newErrors);\n    };\n\n    const handleChange = (e) => {\n      const { name, value } = e.target;\n      setFormData(prev => {\n        const updated = {\n          ...prev,\n          [name]: value\n        };\n        \n        // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ñ„Ð¾Ñ€Ð¼Ñ‹ Ð² localStorage Ð¿Ñ€Ð¸ ÐºÐ°Ð¶Ð´Ð¾Ð¼ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ð¸\n        // Ð¢Ð¾Ð»ÑŒÐºÐ¾ Ð´Ð»Ñ Ð½Ð¾Ð²Ñ‹Ñ… ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð¾Ð² (Ð½Ðµ Ð¿Ñ€Ð¸ Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ð¸)\n        if (!item) {\n          try {\n            const dataToSave = {\n              ...updated,\n              image: image // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ Ð¸Ð· Ð¾Ñ‚Ð´ÐµÐ»ÑŒÐ½Ð¾Ð³Ð¾ ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ñ\n            };\n            localStorage.setItem(formDataStorageKey, JSON.stringify(dataToSave));\n            console.log('ðŸ’¾ MenuItemForm: Ð”Ð°Ð½Ð½Ñ‹Ðµ Ñ„Ð¾Ñ€Ð¼Ñ‹ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ñ‹ Ð² localStorage');\n          } catch (e) {\n            console.error('ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ Ð´Ð°Ð½Ð½Ñ‹Ñ… Ñ„Ð¾Ñ€Ð¼Ñ‹ Ð² localStorage:', e);\n          }\n        }\n        \n        validateField(name, value);\n        return updated;\n      });\n    };\n\n    const handleFileChange = async (e) => {\n      // Ð—Ð°Ñ‰Ð¸Ñ‚Ð° Ð¾Ñ‚ Ð¿Ð¾Ð²Ñ‚Ð¾Ñ€Ð½Ñ‹Ñ… Ð²Ñ‹Ð·Ð¾Ð²Ð¾Ð²\n      if (isProcessingFileRef.current) {\n        return;\n      }\n      \n      const file = e.target.files?.[0];\n      if (!file) {\n        return;\n      }\n      \n      // Ð£ÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼ Ñ„Ð»Ð°Ð³ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸\n      isProcessingFileRef.current = true;\n      \n      // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ ÑÑÑ‹Ð»ÐºÑƒ Ð½Ð° input Ð´Ð»Ñ Ð¾Ñ‡Ð¸ÑÑ‚ÐºÐ¸ Ð¿Ð¾ÑÐ»Ðµ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸\n      const input = e.target;\n\n      // ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ Ñ‚Ð¸Ð¿ Ñ„Ð°Ð¹Ð»Ð° (MIME-Ñ‚Ð¸Ð¿ Ð¸ Ñ€Ð°ÑÑˆÐ¸Ñ€ÐµÐ½Ð¸Ðµ)\n      if (!isImageFile(file)) {\n        onAlert('Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ñ„Ð°Ð¹Ð» Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ (JPG, PNG, GIF, WEBP, BMP, SVG, HEIC Ð¸ Ð´Ñ€ÑƒÐ³Ð¸Ðµ Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ñ‹)', 'error');\n        isProcessingFileRef.current = false;\n        return;\n      }\n\n      // ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ Ñ€Ð°Ð·Ð¼ÐµÑ€ Ñ„Ð°Ð¹Ð»Ð° (Ð¼Ð°ÐºÑÐ¸Ð¼ÑƒÐ¼ 5MB)\n      if (file.size > 5 * 1024 * 1024) {\n        onAlert('Ð Ð°Ð·Ð¼ÐµÑ€ Ñ„Ð°Ð¹Ð»Ð° Ð½Ðµ Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð¿Ñ€ÐµÐ²Ñ‹ÑˆÐ°Ñ‚ÑŒ 5MB', 'error');\n        isProcessingFileRef.current = false;\n        return;\n      }\n\n      setIsUploading(true);\n      try {\n        const base64 = await convertFileToBase64(file);\n        \n        // Ð£ÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼ Ñ„Ð»Ð°Ð³, Ñ‡Ñ‚Ð¾ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ Ð·Ð°Ð³Ñ€ÑƒÐ·Ð¸Ð» Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ\n        userHasUploadedRef.current = true;\n        uploadedImageRef.current = base64; // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ð² ref Ð´Ð»Ñ Ð·Ð°Ñ‰Ð¸Ñ‚Ñ‹ Ð¾Ñ‚ ÑÐ±Ñ€Ð¾ÑÐ°\n        \n        // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ð² Ð³Ð»Ð¾Ð±Ð°Ð»ÑŒÐ½Ð¾Ðµ Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ðµ, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð½Ðµ Ð¿Ð¾Ñ‚ÐµÑ€ÑÑ‚ÑŒ Ð¿Ñ€Ð¸ Ð¿ÐµÑ€ÐµÑ€ÐµÐ½Ð´ÐµÑ€Ðµ\n        if (menuImagesStore && formKey) {\n          menuImagesStore.set(formKey, base64);\n        }\n        \n        // ÐžÐ±Ð½Ð¾Ð²Ð»ÑÐµÐ¼ ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ðµ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ Ñ‡ÐµÑ€ÐµÐ· Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾Ðµ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ\n        // Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð³Ð°Ñ€Ð°Ð½Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ, Ñ‡Ñ‚Ð¾ Ð¼Ñ‹ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð°ÐºÑ‚ÑƒÐ°Ð»ÑŒÐ½Ð¾Ðµ ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ðµ\n        setImage(prevImage => {\n          // Ð•ÑÐ»Ð¸ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ ÑƒÐ¶Ðµ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ð¾ Ð¸ ÑÐ¾Ð²Ð¿Ð°Ð´Ð°ÐµÑ‚, Ð½Ðµ Ð¾Ð±Ð½Ð¾Ð²Ð»ÑÐµÐ¼\n          if (prevImage === base64) {\n            return prevImage;\n          }\n          return base64;\n        });\n        \n        // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ñ„Ð¾Ñ€Ð¼Ñ‹ Ð² localStorage Ð¿Ñ€Ð¸ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐµ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ\n        // Ð¢Ð¾Ð»ÑŒÐºÐ¾ Ð´Ð»Ñ Ð½Ð¾Ð²Ñ‹Ñ… ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð¾Ð² (Ð½Ðµ Ð¿Ñ€Ð¸ Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ð¸)\n        if (!item) {\n          try {\n            const dataToSave = {\n              ...formData,\n              image: base64\n            };\n            localStorage.setItem(formDataStorageKey, JSON.stringify(dataToSave));\n            console.log('ðŸ’¾ handleFileChange: Ð”Ð°Ð½Ð½Ñ‹Ðµ Ñ„Ð¾Ñ€Ð¼Ñ‹ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ñ‹ Ð² localStorage');\n          } catch (e) {\n            console.error('ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ Ð´Ð°Ð½Ð½Ñ‹Ñ… Ñ„Ð¾Ñ€Ð¼Ñ‹ Ð² localStorage:', e);\n          }\n        }\n        \n        // Ð’Ð°Ð»Ð¸Ð´Ð°Ñ†Ð¸ÑŽ Ð²Ñ‹Ð·Ñ‹Ð²Ð°ÐµÐ¼ Ð¿Ð¾ÑÐ»Ðµ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ñ ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ñ\n        setTimeout(() => validateField('image', base64), 0);\n        \n        // ÐžÑ‚ÐºÐ»Ð°Ð´Ñ‹Ð²Ð°ÐµÐ¼ Ð²Ñ‹Ð·Ð¾Ð² onAlert, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð´Ð°Ñ‚ÑŒ React Ð²Ñ€ÐµÐ¼Ñ Ð¾Ð±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ðµ\n        setTimeout(() => {\n          // Ð¤Ð¸Ð½Ð°Ð»ÑŒÐ½Ð°Ñ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð¿ÐµÑ€ÐµÐ´ Ð²Ñ‹Ð·Ð¾Ð²Ð¾Ð¼ onAlert\n          setImage(currentImage => {\n            // Ð•ÑÐ»Ð¸ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ Ð±Ñ‹Ð»Ð¾ ÑÐ±Ñ€Ð¾ÑˆÐµÐ½Ð¾, Ð½Ð¾ Ð² ref Ð¾Ð½Ð¾ ÐµÑÑ‚ÑŒ - Ð²Ð¾ÑÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼\n            if (!currentImage && uploadedImageRef.current) {\n              return uploadedImageRef.current;\n            }\n            return currentImage;\n          });\n          \n          // Ð’Ñ‹Ð·Ñ‹Ð²Ð°ÐµÐ¼ onAlert Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð¿Ð¾ÑÐ»Ðµ Ð¿Ð¾Ð´Ñ‚Ð²ÐµÑ€Ð¶Ð´ÐµÐ½Ð¸Ñ, Ñ‡Ñ‚Ð¾ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ð¾\n          onAlert('Ð˜Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ Ð·Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½Ð¾', 'success');\n        }, 150);\n      } catch (error) {\n        console.error('ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ñ„Ð°Ð¹Ð»Ð° (MenuItemForm):', error);\n        onAlert('ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ñ„Ð°Ð¹Ð»Ð°', 'error');\n      } finally {\n        setIsUploading(false);\n        // Ð¡Ð±Ñ€Ð°ÑÑ‹Ð²Ð°ÐµÐ¼ Ñ„Ð»Ð°Ð³ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸\n        isProcessingFileRef.current = false;\n        \n        // ÐžÑ‡Ð¸Ñ‰Ð°ÐµÐ¼ input Ð¿Ð¾ÑÐ»Ðµ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð¼Ð¾Ð¶Ð½Ð¾ Ð±Ñ‹Ð»Ð¾ Ð²Ñ‹Ð±Ñ€Ð°Ñ‚ÑŒ Ñ‚Ð¾Ñ‚ Ð¶Ðµ Ñ„Ð°Ð¹Ð» ÑÐ½Ð¾Ð²Ð°\n        setTimeout(() => {\n          if (input) {\n            input.value = '';\n          }\n        }, 100);\n      }\n    };\n\n    const handleSubmit = (e) => {\n      e.preventDefault();\n      e.stopPropagation();\n      \n      // Ð’Ð°Ð»Ð¸Ð´Ð°Ñ†Ð¸Ñ Ð²ÑÐµÑ… Ð¿Ð¾Ð»ÐµÐ¹ Ð¿ÐµÑ€ÐµÐ´ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÐºÐ¾Ð¹\n      const newErrors = {};\n      \n      // Ð’Ð°Ð»Ð¸Ð´Ð°Ñ†Ð¸Ñ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ\n      if (!image || !image.trim()) {\n        newErrors.image = 'Ð—Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚Ðµ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ';\n      } else if (!image.startsWith('data:image')) {\n        newErrors.image = 'Ð—Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚Ðµ Ñ„Ð°Ð¹Ð» Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ';\n      }\n      \n      // Ð’Ð°Ð»Ð¸Ð´Ð°Ñ†Ð¸Ñ Ð¾ÑÑ‚Ð°Ð»ÑŒÐ½Ñ‹Ñ… Ð¿Ð¾Ð»ÐµÐ¹\n      if (!formData.name?.trim()) {\n        newErrors.name = 'ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ Ð¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾';\n      }\n      if (!formData.price || isNaN(parseFloat(formData.price)) || parseFloat(formData.price) <= 0) {\n        newErrors.price = 'Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½ÑƒÑŽ Ñ†ÐµÐ½Ñƒ';\n      }\n      if (!formData.weight?.trim()) {\n        newErrors.weight = 'Ð’ÐµÑ/Ð¾Ð±ÑŠÐµÐ¼ Ð¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÐµÐ½';\n      }\n      if (!formData.description?.trim()) {\n        newErrors.description = 'ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ Ð¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾';\n      }\n      \n      setErrors(newErrors);\n\n      if (Object.keys(newErrors).length === 0 && image && image.startsWith('data:image')) {\n        // ÐžÑ‡Ð¸Ñ‰Ð°ÐµÐ¼ localStorage Ð¿Ñ€Ð¸ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾Ð¼ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ð¸\n        if (!item) {\n          try {\n            localStorage.removeItem(formDataStorageKey);\n            console.log('ðŸ—‘ï¸ MenuItemForm: Ð”Ð°Ð½Ð½Ñ‹Ðµ Ñ„Ð¾Ñ€Ð¼Ñ‹ ÑƒÐ´Ð°Ð»ÐµÐ½Ñ‹ Ð¸Ð· localStorage Ð¿Ð¾ÑÐ»Ðµ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ');\n          } catch (e) {\n            console.error('ÐžÑˆÐ¸Ð±ÐºÐ° ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ñ Ð´Ð°Ð½Ð½Ñ‹Ñ… Ñ„Ð¾Ñ€Ð¼Ñ‹ Ð¸Ð· localStorage:', e);\n          }\n        }\n        \n        // ÐŸÐµÑ€ÐµÐ´Ð°ÐµÐ¼ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ñ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸ÐµÐ¼\n        onSave({\n          ...formData,\n          image: image.trim()\n        });\n      } else {\n        if (!image || !image.startsWith('data:image')) {\n          onAlert('Ð—Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚Ðµ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ', 'error');\n        } else {\n          onAlert('Ð˜ÑÐ¿Ñ€Ð°Ð²ÑŒÑ‚Ðµ Ð¾ÑˆÐ¸Ð±ÐºÐ¸ Ð² Ñ„Ð¾Ñ€Ð¼Ðµ', 'error');\n        }\n      }\n    };\n\n    const isFormValid = () => {\n      return formData.name && \n             formData.price && \n             formData.weight && \n             formData.description && \n             image &&\n             Object.keys(errors).length === 0;\n    };\n\n    return (\n      <div className=\"form-modal\">\n        <div className=\"form-content\">\n          <h3>{item ? 'Ð ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð±Ð»ÑŽÐ´Ð¾' : 'Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð½Ð¾Ð²Ð¾Ðµ Ð±Ð»ÑŽÐ´Ð¾'}</h3>\n          <form onSubmit={handleSubmit} noValidate>\n            <div className=\"form-group\">\n              <label>ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ *</label>\n              <input\n                type=\"text\"\n                name=\"name\"\n                value={formData.name}\n                onChange={handleChange}\n                className={errors.name ? 'error' : ''}\n                placeholder=\"Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ðµ Ð±Ð»ÑŽÐ´Ð°\"\n                required\n              />\n              {errors.name && <span className=\"error-text\">{errors.name}</span>}\n            </div>\n\n            <div className=\"form-row\">\n              <div className=\"form-group\">\n                <label>Ð¦ÐµÐ½Ð° (â‚½) *</label>\n                <input\n                  type=\"number\"\n                  name=\"price\"\n                  value={formData.price}\n                  onChange={handleChange}\n                  className={errors.price ? 'error' : ''}\n                  placeholder=\"0\"\n                  min=\"1\"\n                  required\n                />\n                {errors.price && <span className=\"error-text\">{errors.price}</span>}\n              </div>\n\n              <div className=\"form-group\">\n                <label>Ð’ÐµÑ/ÐžÐ±ÑŠÐµÐ¼ *</label>\n                <input\n                  type=\"text\"\n                  name=\"weight\"\n                  value={formData.weight}\n                  onChange={handleChange}\n                  className={errors.weight ? 'error' : ''}\n                  placeholder=\"150 Ð³ Ð¸Ð»Ð¸ 500 Ð¼Ð»\"\n                  required\n                />\n                {errors.weight && <span className=\"error-text\">{errors.weight}</span>}\n              </div>\n\n              <div className=\"form-group\">\n                <label>ÐšÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ñ *</label>\n                <select\n                  name=\"category\"\n                  value={formData.category}\n                  onChange={handleChange}\n                >\n                  {categories.map(cat => (\n                    <option key={cat.id} value={cat.key}>{cat.name}</option>\n                  ))}\n                </select>\n              </div>\n            </div>\n\n            <div className=\"form-group\">\n              <label>ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ *</label>\n              <textarea\n                name=\"description\"\n                value={formData.description}\n                onChange={handleChange}\n                className={errors.description ? 'error' : ''}\n                rows=\"3\"\n                placeholder=\"ÐžÐ¿Ð¸ÑˆÐ¸Ñ‚Ðµ Ð±Ð»ÑŽÐ´Ð¾\"\n                required\n              />\n              {errors.description && <span className=\"error-text\">{errors.description}</span>}\n            </div>\n\n            <div className=\"form-group\">\n              <label>Ð—Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚ÑŒ Ñ„Ð°Ð¹Ð» *</label>\n              <div className=\"file-upload-wrapper\">\n                <input\n                  ref={fileInputRef}\n                  type=\"file\"\n                  accept=\"image/*\"\n                  onChange={handleFileChange}\n                  className=\"file-input-hidden\"\n                  disabled={isUploading}\n                />\n                <button\n                  type=\"button\"\n                  className=\"file-upload-button\"\n                  onClick={(e) => {\n                    e.preventDefault();\n                    if (fileInputRef.current) {\n                      console.log('ÐšÐ»Ð¸Ðº Ð¿Ð¾ ÐºÐ½Ð¾Ð¿ÐºÐµ (MenuItemForm), Ð¾Ñ‚ÐºÑ€Ñ‹Ð²Ð°ÐµÐ¼ Ñ„Ð°Ð¹Ð»Ð¾Ð²Ñ‹Ð¹ Ð´Ð¸Ð°Ð»Ð¾Ð³');\n                      fileInputRef.current.click();\n                    } else {\n                      console.error('fileInputRef.current is null (MenuItemForm)');\n                    }\n                  }}\n                  disabled={isUploading}\n                >\n                  {isUploading ? (\n                    <>\n                      <span className=\"upload-icon\">â³</span>\n                      <span>Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ°...</span>\n                    </>\n                  ) : (\n                    <>\n                      <span className=\"upload-icon\">ðŸ“·</span>\n                      <span>Ð’Ñ‹Ð±Ñ€Ð°Ñ‚ÑŒ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ</span>\n                    </>\n                  )}\n                </button>\n                {image && !isUploading && (\n                  <button\n                    type=\"button\"\n                    className=\"file-remove-button\"\n                    onClick={() => {\n                      userHasUploadedRef.current = false;\n                      uploadedImageRef.current = null;\n                      // ÐžÑ‡Ð¸Ñ‰Ð°ÐµÐ¼ Ð¸Ð· Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ð°\n                      if (menuImagesStore && formKey) {\n                        menuImagesStore.delete(formKey);\n                      }\n                      setImage('');\n                      if (fileInputRef.current) {\n                        fileInputRef.current.value = '';\n                      }\n                      validateField('image', '');\n                    }}\n                  >\n                    âœ•\n                  </button>\n                )}\n              </div>\n              {errors.image && <span className=\"error-text\">{errors.image}</span>}\n            </div>\n\n            {image && image.trim() && (\n              <div className=\"form-group\">\n                <label>ÐŸÑ€ÐµÐ´Ð¿Ñ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€:</label>\n                <div className=\"photo-preview-modern\">\n                  <img\n                    key={image.substring(0, 50)}\n                    src={image}\n                    alt=\"ÐŸÑ€ÐµÐ´Ð¿Ñ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€\"\n                    onLoad={() => console.log('Ð˜Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ Ð·Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½Ð¾ Ð² Ð¿Ñ€ÐµÐ´Ð¿Ñ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€ (MenuItemForm)')}\n                    onError={(e) => {\n                      console.error('ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ Ð² Ð¿Ñ€ÐµÐ´Ð¿Ñ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€ (MenuItemForm)');\n                      e.target.src = 'https://via.placeholder.com/300x200/8B7355/FFFFFF?text=Ð¢Ð±Ð¸Ð»Ð¸ÑÐ¸';\n                    }}\n                  />\n                  <div className=\"photo-preview-overlay\">\n                    <span className=\"preview-badge\">ÐŸÑ€ÐµÐ´Ð¿Ñ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€</span>\n                  </div>\n                </div>\n              </div>\n            )}\n            {!image && (\n              <div className=\"form-group\">\n                <p style={{ color: '#999', fontStyle: 'italic', fontSize: '0.9rem' }}>\n                  ÐŸÑ€ÐµÐ´Ð¿Ñ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€ Ð¿Ð¾ÑÐ²Ð¸Ñ‚ÑÑ Ð¿Ð¾ÑÐ»Ðµ Ð²Ñ‹Ð±Ð¾Ñ€Ð° Ñ„Ð°Ð¹Ð»Ð°\n                </p>\n              </div>\n            )}\n\n            <div className=\"form-actions\">\n              <button \n                type=\"submit\" \n                className=\"save-btn\"\n                disabled={!isFormValid()}\n              >\n                {item ? 'ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ' : 'Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ'}\n              </button>\n              <button type=\"button\" className=\"cancel-btn\" onClick={onCancel}>\n                ÐžÑ‚Ð¼ÐµÐ½Ð°\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    );\n  };\n\n  const formatPrice = (price) => {\n    if (typeof price === 'string' && price.includes('â‚½')) {\n      return price;\n    }\n    const priceNum = parseInt(price);\n    return isNaN(priceNum) ? '0 â‚½' : `${priceNum} â‚½`;\n  };\n\n  const handleImageError = (e) => {\n    e.target.src = 'https://via.placeholder.com/300x200/8B7355/FFFFFF?text=Ð¢Ð±Ð¸Ð»Ð¸ÑÐ¸';\n  };\n\n  // Ð¡Ñ‚Ð°Ð±Ð¸Ð»Ð¸Ð·Ð¸Ñ€ÑƒÐµÐ¼ photo prop Ð´Ð»Ñ PhotoForm, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð¸Ð·Ð±ÐµÐ¶Ð°Ñ‚ÑŒ Ð¿ÐµÑ€ÐµÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ñ ÐºÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚Ð°\n  const stablePhotoForForm = useMemo(() => {\n    if (editingPhoto === null) return null;\n    return editingPhoto.id ? editingPhoto : null;\n  }, [editingPhoto?.id]);\n\n  // Ð•ÑÐ»Ð¸ Ð½Ðµ Ð°Ð²Ñ‚Ð¾Ñ€Ð¸Ð·Ð¾Ð²Ð°Ð½, Ð¿Ð¾ÐºÐ°Ð·Ñ‹Ð²Ð°ÐµÐ¼ Ñ„Ð¾Ñ€Ð¼Ñƒ Ð²Ñ…Ð¾Ð´Ð°\n  if (!isAuthenticated) {\n    return <LoginForm onLogin={handleLogin} />;\n  }\n\n  return (\n    <div className=\"admin-page\">\n      <div className=\"admin-container\">\n        {/* ÐšÐ½Ð¾Ð¿ÐºÐ° Ð²Ñ‹Ñ…Ð¾Ð´Ð° */}\n        <div className=\"admin-header\">\n          <h1>ÐÐ´Ð¼Ð¸Ð½-Ð¿Ð°Ð½ÐµÐ»ÑŒ \"Ð¢Ð±Ð¸Ð»Ð¸ÑÐ¸\"</h1>\n          <button onClick={handleLogout} className=\"logout-btn\">\n            Ð’Ñ‹Ð¹Ñ‚Ð¸\n          </button>\n        </div>\n        \n        {/* Ð£Ð²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ñ */}\n        {showNotification && (\n          <div className={`admin-notification ${notificationType}`}>\n            {notificationMessage}\n            <button onClick={() => setShowNotification(false)}>Ã—</button>\n          </div>\n        )}\n\n        {/* ÐŸÐµÑ€ÐµÐºÐ»ÑŽÑ‡Ð°Ñ‚ÐµÐ»ÑŒ Ð²ÐºÐ»Ð°Ð´Ð¾Ðº */}\n        <div className=\"admin-tabs\">\n          <button \n            className={`tab-button ${activeTab === 'reservations' ? 'active' : ''}`}\n            onClick={() => handleTabChange('reservations')}\n          >\n            Ð—Ð°ÑÐ²ÐºÐ¸ ({reservations.length})\n          </button>\n          <button \n            className={`tab-button ${activeTab === 'menu' ? 'active' : ''}`}\n            onClick={() => handleTabChange('menu')}\n          >\n            ÐœÐµÐ½ÑŽ ({menuItems.length})\n          </button>\n          <button \n            className={`tab-button ${activeTab === 'categories' ? 'active' : ''}`}\n            onClick={() => handleTabChange('categories')}\n          >\n            ÐšÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸ ({categories.length})\n          </button>\n          <button \n            className={`tab-button ${activeTab === 'themes' ? 'active' : ''}`}\n            onClick={() => handleTabChange('themes')}\n          >\n            Ð¢ÐµÐ¼Ñ‹ ({Object.keys(themes).length + 1})\n          </button>\n          <button \n            className={`tab-button ${activeTab === 'photos' ? 'active' : ''}`}\n            onClick={() => handleTabChange('photos')}\n          >\n            Ð¤Ð¾Ñ‚Ð¾ ({photos.length})\n          </button>\n        </div>\n\n        {/* Ð¡Ð¾Ð´ÐµÑ€Ð¶Ð¸Ð¼Ð¾Ðµ Ð²ÐºÐ»Ð°Ð´Ð¾Ðº */}\n        <div className=\"tab-content\">\n          {activeTab === 'reservations' && (\n            <div className=\"reservations-tab\">\n              <h2>Ð—Ð°ÑÐ²ÐºÐ¸ Ð½Ð° Ð±Ñ€Ð¾Ð½Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ</h2>\n              \n              {reservations.length === 0 ? (\n                <p className=\"no-data\">ÐÐµÑ‚ Ð·Ð°ÑÐ²Ð¾Ðº Ð½Ð° Ð±Ñ€Ð¾Ð½ÑŒ</p>\n              ) : (\n                <div className=\"reservations-list\">\n                  {reservations.map(reservation => (\n                    <div key={reservation.id} className=\"reservation-card\">\n                      <div className=\"reservation-header\">\n                        <h3>{reservation.name}</h3>\n                        <span className=\"reservation-date\">\n                          {new Date(reservation.createdAt).toLocaleDateString('ru-RU')}\n                        </span>\n                      </div>\n                      <div className=\"reservation-details\">\n                        <p><strong>Ð¢ÐµÐ»ÐµÑ„Ð¾Ð½:</strong> {reservation.phone}</p>\n                        <p><strong>Ð”Ð°Ñ‚Ð°:</strong> {reservation.date} Ð² {reservation.time}</p>\n                        <p><strong>Ð“Ð¾ÑÑ‚ÐµÐ¹:</strong> {reservation.guests}</p>\n                        {reservation.comments && (\n                          <p><strong>ÐšÐ¾Ð¼Ð¼ÐµÐ½Ñ‚Ð°Ñ€Ð¸Ð¹:</strong> {reservation.comments}</p>\n                        )}\n                      </div>\n                      <button \n                        onClick={() => {\n                          if (window.confirm('Ð’Ñ‹ ÑƒÐ²ÐµÑ€ÐµÐ½Ñ‹, Ñ‡Ñ‚Ð¾ Ñ…Ð¾Ñ‚Ð¸Ñ‚Ðµ ÑƒÐ´Ð°Ð»Ð¸Ñ‚ÑŒ ÑÑ‚Ñƒ Ð·Ð°ÑÐ²ÐºÑƒ?')) {\n                            deleteReservation(reservation.id);\n                          }\n                        }}\n                        className=\"delete-btn\"\n                      >\n                        Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ\n                      </button>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n          )}\n\n          {activeTab === 'menu' && (\n            <div className=\"menu-tab\">\n              <div className=\"menu-header\">\n                <h2>Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð¼ÐµÐ½ÑŽ</h2>\n                <button \n                  onClick={() => setEditingItem({})}\n                  className=\"add-btn\"\n                >\n                  + Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð±Ð»ÑŽÐ´Ð¾\n                </button>\n              </div>\n\n              {menuItems.length === 0 ? (\n                <p className=\"no-data\">ÐœÐµÐ½ÑŽ Ð¿ÑƒÑÑ‚Ð¾. Ð”Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ Ð½Ð¾Ð²Ñ‹Ðµ Ð±Ð»ÑŽÐ´Ð° Ñ‡ÐµÑ€ÐµÐ· Ñ„Ð¾Ñ€Ð¼Ñƒ Ð²Ñ‹ÑˆÐµ.</p>\n              ) : (\n                <div className=\"menu-items-grid\">\n                  {menuItems.map(item => (\n                    <div key={item.id} className=\"menu-item-card\">\n                      <div className=\"item-image\">\n                        <img \n                          src={item.image} \n                          alt={item.name}\n                          onError={handleImageError}\n                        />\n                      </div>\n                      <div className=\"item-content\">\n                        <h4>{item.name}</h4>\n                        <p className=\"item-price\">{formatPrice(item.price)} Â· {item.weight}</p>\n                        <p className=\"item-description\">{item.description}</p>\n                        <p className=\"item-category\">\n                          {categories.find(cat => cat.key === item.category)?.name || item.category}\n                        </p>\n                      </div>\n                      <div className=\"item-actions\">\n                        <button \n                          onClick={() => startEditing(item)}\n                          className=\"edit-btn\"\n                        >\n                          Ð ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ\n                        </button>\n                        <button \n                          onClick={() => {\n                            if (window.confirm('Ð’Ñ‹ ÑƒÐ²ÐµÑ€ÐµÐ½Ñ‹, Ñ‡Ñ‚Ð¾ Ñ…Ð¾Ñ‚Ð¸Ñ‚Ðµ ÑƒÐ´Ð°Ð»Ð¸Ñ‚ÑŒ ÑÑ‚Ð¾ Ð±Ð»ÑŽÐ´Ð¾?')) {\n                              deleteMenuItem(item.id);\n                            }\n                          }}\n                          className=\"delete-btn\"\n                        >\n                          Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ\n                        </button>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n          )}\n\n          {activeTab === 'categories' && (\n            <div className=\"categories-tab\">\n              <div className=\"categories-header\">\n                <h2>Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸ÑÐ¼Ð¸</h2>\n                <button \n                  onClick={addCategory}\n                  className=\"add-btn\"\n                >\n                  + Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸ÑŽ\n                </button>\n              </div>\n\n              {categories.length === 0 ? (\n                <p className=\"no-data\">ÐšÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¹ Ð½ÐµÑ‚. Ð”Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ Ð½Ð¾Ð²ÑƒÑŽ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸ÑŽ.</p>\n              ) : (\n                <div className=\"categories-list\">\n                  {categories.map((category, index) => (\n                    <div key={category.id} className=\"category-card\">\n                      {editingCategory && editingCategory.id === category.id ? (\n                        <div className=\"category-edit-form\">\n                          <input\n                            type=\"text\"\n                            value={editingCategory.name}\n                            onChange={(e) => setEditingCategory({ ...editingCategory, name: e.target.value })}\n                            className=\"category-name-input\"\n                            placeholder=\"ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸\"\n                            autoFocus\n                          />\n                          <div className=\"category-edit-actions\">\n                            <button \n                              onClick={() => updateCategory(editingCategory)}\n                              className=\"save-btn\"\n                            >\n                              Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ\n                            </button>\n                            <button \n                              onClick={() => setEditingCategory(null)}\n                              className=\"cancel-btn\"\n                            >\n                              ÐžÑ‚Ð¼ÐµÐ½Ð°\n                            </button>\n                          </div>\n                        </div>\n                      ) : (\n                        <>\n                          <div className=\"category-info\">\n                            <h4>{category.name}</h4>\n                            <p className=\"category-key\">ÐšÐ»ÑŽÑ‡: {category.key}</p>\n                            <p className=\"category-order\">ÐŸÐ¾Ñ€ÑÐ´Ð¾Ðº: {category.order}</p>\n                            <p className=\"category-items-count\">\n                              Ð‘Ð»ÑŽÐ´ Ð² ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸: {menuItems.filter(item => item.category === category.key).length}\n                            </p>\n                          </div>\n                          <div className=\"category-actions\">\n                            <div className=\"category-order-controls\">\n                              <button\n                                onClick={() => moveCategory(category.id, 'up')}\n                                className=\"move-btn\"\n                                disabled={index === 0}\n                                title=\"ÐŸÐµÑ€ÐµÐ¼ÐµÑÑ‚Ð¸Ñ‚ÑŒ Ð²Ð²ÐµÑ€Ñ…\"\n                              >\n                                â†‘\n                              </button>\n                              <button\n                                onClick={() => moveCategory(category.id, 'down')}\n                                className=\"move-btn\"\n                                disabled={index === categories.length - 1}\n                                title=\"ÐŸÐµÑ€ÐµÐ¼ÐµÑÑ‚Ð¸Ñ‚ÑŒ Ð²Ð½Ð¸Ð·\"\n                              >\n                                â†“\n                              </button>\n                            </div>\n                            <button \n                              onClick={() => setEditingCategory({ ...category })}\n                              className=\"edit-btn\"\n                            >\n                              Ð ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ\n                            </button>\n                            <button \n                              onClick={() => {\n                                if (window.confirm('Ð’Ñ‹ ÑƒÐ²ÐµÑ€ÐµÐ½Ñ‹, Ñ‡Ñ‚Ð¾ Ñ…Ð¾Ñ‚Ð¸Ñ‚Ðµ ÑƒÐ´Ð°Ð»Ð¸Ñ‚ÑŒ ÑÑ‚Ñƒ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸ÑŽ?')) {\n                                  deleteCategory(category.id);\n                                }\n                              }}\n                              className=\"delete-btn\"\n                            >\n                              Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ\n                            </button>\n                          </div>\n                        </>\n                      )}\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n          )}\n\n          {activeTab === 'themes' && (\n            <div className=\"themes-tab\">\n              <div className=\"themes-header\">\n                <h2>Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ñ‚ÐµÐ¼Ð°Ð¼Ð¸</h2>\n                <button \n                  onClick={addTheme}\n                  className=\"add-btn\"\n                >\n                  + Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ñ‚ÐµÐ¼Ñƒ\n                </button>\n              </div>\n\n              <div className=\"themes-list\">\n                {/* Ð¢ÐµÐ¼Ð° Ð¿Ð¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ */}\n                <div className={`theme-card ${currentTheme === 'default' ? 'active' : ''}`}>\n                  <div className=\"theme-preview\">\n                    <div className=\"theme-preview-colors\">\n                      <div className=\"preview-color\" style={{ background: '#8B7355' }}></div>\n                      <div className=\"preview-color\" style={{ background: '#A8D8EA' }}></div>\n                      <div className=\"preview-color\" style={{ background: '#D4B896' }}></div>\n                    </div>\n                  </div>\n                  <div className=\"theme-info\">\n                    <h4>ÐŸÐ¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ</h4>\n                    <p className=\"theme-description\">Ð‘Ð°Ð·Ð¾Ð²Ð°Ñ Ð·ÐµÐ¼Ð»ÑÐ½Ð°Ñ Ñ‚ÐµÐ¼Ð°</p>\n                  </div>\n                  <div className=\"theme-actions\">\n                    <button \n                      onClick={() => applyTheme('default')}\n                      className={`apply-btn ${currentTheme === 'default' ? 'active' : ''}`}\n                    >\n                      {currentTheme === 'default' ? 'âœ“ ÐŸÑ€Ð¸Ð¼ÐµÐ½ÐµÐ½Ð°' : 'ÐŸÑ€Ð¸Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ'}\n                    </button>\n                  </div>\n                </div>\n\n                {/* Ð‘Ð°Ð·Ð¾Ð²Ñ‹Ðµ Ñ‚ÐµÐ¼Ñ‹ */}\n                {Object.values(defaultThemes).map(theme => (\n                  <div key={theme.id} className={`theme-card ${currentTheme === theme.id ? 'active' : ''}`}>\n                    <div className=\"theme-preview\">\n                      <div className=\"theme-preview-colors\">\n                        <div className=\"preview-color\" style={{ background: theme.primaryColor }}></div>\n                        <div className=\"preview-color\" style={{ background: theme.secondaryColor }}></div>\n                        <div className=\"preview-color\" style={{ background: theme.accentColor }}></div>\n                      </div>\n                    </div>\n                    <div className=\"theme-info\">\n                      <h4>{theme.name}</h4>\n                      <p className=\"theme-description\">Ð‘Ð°Ð·Ð¾Ð²Ð°Ñ Ñ‚ÐµÐ¼Ð°</p>\n                    </div>\n                    <div className=\"theme-actions\">\n                      <button \n                        onClick={() => applyTheme(theme.id)}\n                        className={`apply-btn ${currentTheme === theme.id ? 'active' : ''}`}\n                      >\n                        {currentTheme === theme.id ? 'âœ“ ÐŸÑ€Ð¸Ð¼ÐµÐ½ÐµÐ½Ð°' : 'ÐŸÑ€Ð¸Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ'}\n                      </button>\n                    </div>\n                  </div>\n                ))}\n\n                {/* ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒÑÐºÐ¸Ðµ Ñ‚ÐµÐ¼Ñ‹ */}\n                {Object.values(themes).filter(theme => !defaultThemes[theme.id]).map(theme => (\n                  <div key={theme.id} className={`theme-card ${currentTheme === theme.id ? 'active' : ''}`}>\n                    {editingTheme && editingTheme.id === theme.id ? (\n                      <ThemeEditForm\n                        theme={editingTheme}\n                        onSave={updateTheme}\n                        onCancel={() => setEditingTheme(null)}\n                      />\n                    ) : (\n                      <>\n                        <div className=\"theme-preview\">\n                          <div className=\"theme-preview-colors\">\n                            <div className=\"preview-color\" style={{ background: theme.primaryColor }}></div>\n                            <div className=\"preview-color\" style={{ background: theme.secondaryColor }}></div>\n                            <div className=\"preview-color\" style={{ background: theme.accentColor }}></div>\n                          </div>\n                        </div>\n                        <div className=\"theme-info\">\n                          <h4>{theme.name}</h4>\n                          <p className=\"theme-description\">ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒÑÐºÐ°Ñ Ñ‚ÐµÐ¼Ð°</p>\n                        </div>\n                        <div className=\"theme-actions\">\n                          <button \n                            onClick={() => applyTheme(theme.id)}\n                            className={`apply-btn ${currentTheme === theme.id ? 'active' : ''}`}\n                          >\n                            {currentTheme === theme.id ? 'âœ“ ÐŸÑ€Ð¸Ð¼ÐµÐ½ÐµÐ½Ð°' : 'ÐŸÑ€Ð¸Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ'}\n                          </button>\n                          <button \n                            onClick={() => setEditingTheme({ ...theme })}\n                            className=\"edit-btn\"\n                          >\n                            Ð ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ\n                          </button>\n                          {!defaultThemes[theme.id] && (\n                            <button \n                              onClick={() => {\n                                if (window.confirm('Ð’Ñ‹ ÑƒÐ²ÐµÑ€ÐµÐ½Ñ‹, Ñ‡Ñ‚Ð¾ Ñ…Ð¾Ñ‚Ð¸Ñ‚Ðµ ÑƒÐ´Ð°Ð»Ð¸Ñ‚ÑŒ ÑÑ‚Ñƒ Ñ‚ÐµÐ¼Ñƒ?')) {\n                                  deleteTheme(theme.id);\n                                }\n                              }}\n                              className=\"delete-btn\"\n                            >\n                              Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ\n                            </button>\n                          )}\n                        </div>\n                      </>\n                    )}\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {activeTab === 'photos' && (\n            <div className=\"photos-tab\">\n              <div className=\"photos-header\">\n                <h2>Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸ÑÐ¼Ð¸</h2>\n                <button\n                  onClick={() => {\n                    // Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ ÑÑ‚Ð°Ð±Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ Ð¾Ð±ÑŠÐµÐºÑ‚ Ð´Ð»Ñ Ð½Ð¾Ð²Ð¾Ð¹ Ñ„Ð¾Ñ€Ð¼Ñ‹\n                    setEditingPhoto(newPhotoObjectRef.current);\n                  }}\n                  className=\"add-btn\"\n                >\n                  + Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ñ„Ð¾Ñ‚Ð¾\n                </button>\n              </div>\n\n              {photos.length === 0 ? (\n                <p className=\"no-data\">Ð¤Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ð¹ Ð½ÐµÑ‚. Ð”Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ Ð½Ð¾Ð²ÑƒÑŽ Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸ÑŽ.</p>\n              ) : (\n                <div className=\"photos-grid\">\n                  {photos.map(photo => (\n                    <div key={photo.id} className=\"photo-card\">\n                      <div className=\"photo-image\">\n                        <img\n                          src={photo.image}\n                          alt={photo.caption || 'Ð¤Ð¾Ñ‚Ð¾'}\n                          onError={(e) => {\n                            e.target.src = 'https://via.placeholder.com/300x200/8B7355/FFFFFF?text=Ð¢Ð±Ð¸Ð»Ð¸ÑÐ¸';\n                          }}\n                        />\n                      </div>\n                      <div className=\"photo-info\">\n                        {photo.caption && (\n                          <p className=\"photo-caption\">{photo.caption}</p>\n                        )}\n                        {!photo.caption && (\n                          <p className=\"photo-caption-empty\">Ð‘ÐµÐ· Ð¿Ð¾Ð´Ð¿Ð¸ÑÐ¸</p>\n                        )}\n                      </div>\n                      <div className=\"photo-actions\">\n                        <button\n                          onClick={() => setEditingPhoto({ ...photo })}\n                          className=\"edit-btn\"\n                        >\n                          Ð ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ\n                        </button>\n                        <button\n                          onClick={() => {\n                            if (window.confirm('Ð’Ñ‹ ÑƒÐ²ÐµÑ€ÐµÐ½Ñ‹, Ñ‡Ñ‚Ð¾ Ñ…Ð¾Ñ‚Ð¸Ñ‚Ðµ ÑƒÐ´Ð°Ð»Ð¸Ñ‚ÑŒ ÑÑ‚Ð¾ Ñ„Ð¾Ñ‚Ð¾?')) {\n                              deletePhoto(photo.id);\n                            }\n                          }}\n                          className=\"delete-btn\"\n                        >\n                          Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ\n                        </button>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n\n        {/* ÐœÐ¾Ð´Ð°Ð»ÑŒÐ½Ð¾Ðµ Ð¾ÐºÐ½Ð¾ Ð´Ð»Ñ Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ/Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¸Ñ */}\n        {editingItem !== null && (\n          <MenuItemForm\n            key={editingItem?.id || newMenuItemKeyRef.current} // Ð¡Ñ‚Ð°Ð±Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ key\n            item={editingItem.id ? editingItem : null}\n            onSave={saveMenuItem}\n            onCancel={cancelEditing}\n            onAlert={showAlert}\n            menuImagesStore={menuImagesStore.current} // ÐŸÐµÑ€ÐµÐ´Ð°ÐµÐ¼ Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ðµ Ð´Ð»Ñ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ñ\n            formKey={editingItem?.id || newMenuItemKeyRef.current} // Ð£Ð½Ð¸ÐºÐ°Ð»ÑŒÐ½Ñ‹Ð¹ ÐºÐ»ÑŽÑ‡ Ñ„Ð¾Ñ€Ð¼Ñ‹\n          />\n        )}\n\n        {/* ÐœÐ¾Ð´Ð°Ð»ÑŒÐ½Ð¾Ðµ Ð¾ÐºÐ½Ð¾ Ð´Ð»Ñ Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ/Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¸Ñ Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ð¹ */}\n        {editingPhoto !== null && (\n          <PhotoForm\n            key={editingPhoto?.id || newPhotoKeyRef.current} // Ð¡Ñ‚Ð°Ð±Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ key\n            photo={stablePhotoForForm}\n            onSave={savePhoto}\n            onCancel={cancelPhotoEditing}\n            onAlert={showAlert}\n            uploadedImagesStore={uploadedImagesStore.current} // ÐŸÐµÑ€ÐµÐ´Ð°ÐµÐ¼ Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ðµ Ð´Ð»Ñ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ñ\n            formKey={editingPhoto?.id || newPhotoKeyRef.current} // Ð£Ð½Ð¸ÐºÐ°Ð»ÑŒÐ½Ñ‹Ð¹ ÐºÐ»ÑŽÑ‡ Ñ„Ð¾Ñ€Ð¼Ñ‹\n          />\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Admin;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}