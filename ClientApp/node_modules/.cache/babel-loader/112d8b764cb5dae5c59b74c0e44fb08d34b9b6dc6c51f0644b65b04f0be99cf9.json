{"ast":null,"code":"// Ð£Ñ‚Ð¸Ð»Ð¸Ñ‚Ð° Ð´Ð»Ñ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ Ñ Ð´Ð°Ð½Ð½Ñ‹Ð¼Ð¸ Ñ‡ÐµÑ€ÐµÐ· ÑÑ‚Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ JSON Ñ„Ð°Ð¹Ð»Ñ‹\n// Ð’ÑÐµ Ð´Ð°Ð½Ð½Ñ‹Ðµ ÑÐ¾Ñ…Ñ€Ð°Ð½ÑÑŽÑ‚ÑÑ Ñ‡ÐµÑ€ÐµÐ· API Ð½Ð°Ð¿Ñ€ÑÐ¼ÑƒÑŽ Ð² Ñ„Ð°Ð¹Ð»Ñ‹ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°\n\n// ÐžÐ¿Ñ€ÐµÐ´ÐµÐ»ÑÐµÐ¼ URL API\nconst getApiUrl = () => {\n  // Ð’ÑÐµÐ³Ð´Ð° Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð¾Ñ‚Ð½Ð¾ÑÐ¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ð¹ Ð¿ÑƒÑ‚ÑŒ - Ð±ÑÐºÐµÐ½Ð´ Ð¿Ñ€Ð¾ÐºÑÐ¸Ñ€ÑƒÐµÑ‚ Ð·Ð°Ð¿Ñ€Ð¾ÑÑ‹\n  // Ð•ÑÐ»Ð¸ React Ð½Ð° Ð¿Ð¾Ñ€Ñ‚Ñƒ 3000, Ð±ÑÐºÐµÐ½Ð´ Ð½Ð° 5000 Ð¿Ñ€Ð¾ÐºÑÐ¸Ñ€ÑƒÐµÑ‚ Ð·Ð°Ð¿Ñ€Ð¾ÑÑ‹ Ðº React\n  // API Ð·Ð°Ð¿Ñ€Ð¾ÑÑ‹ Ð´Ð¾Ð»Ð¶Ð½Ñ‹ Ð¸Ð´Ñ‚Ð¸ Ñ‡ÐµÑ€ÐµÐ· Ð±ÑÐºÐµÐ½Ð´ Ð½Ð° Ð¿Ð¾Ñ€Ñ‚Ñƒ 5000\n  const port = window.location.port;\n  const hostname = window.location.hostname;\n  console.log(`ðŸ” getApiUrl: hostname=${hostname}, port=${port}`);\n\n  // Ð•ÑÐ»Ð¸ Ð¼Ñ‹ Ð½Ð° Ð¿Ð¾Ñ€Ñ‚Ñƒ 3000 (React dev server), Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð°Ð±ÑÐ¾Ð»ÑŽÑ‚Ð½Ñ‹Ð¹ Ð¿ÑƒÑ‚ÑŒ Ðº Ð±ÑÐºÐµÐ½Ð´Ñƒ\n  if (port === '3000') {\n    const apiUrl = 'http://localhost:5000/api';\n    console.log(`ðŸ” getApiUrl: React Ð½Ð° Ð¿Ð¾Ñ€Ñ‚Ñƒ 3000, Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ ${apiUrl}`);\n    return apiUrl;\n  }\n\n  // Ð˜Ð½Ð°Ñ‡Ðµ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð¾Ñ‚Ð½Ð¾ÑÐ¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ð¹ Ð¿ÑƒÑ‚ÑŒ (Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÐ¼ Ñ‡ÐµÑ€ÐµÐ· Ð±ÑÐºÐµÐ½Ð´)\n  const apiUrl = '/api';\n  console.log(`ðŸ” getApiUrl: Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð¾Ñ‚Ð½Ð¾ÑÐ¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ð¹ Ð¿ÑƒÑ‚ÑŒ ${apiUrl}`);\n  return apiUrl;\n};\n\n// Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ Ñ„Ð°Ð¹Ð»Ð° Ñ‡ÐµÑ€ÐµÐ· API (Ð½Ð°Ð¿Ñ€ÑÐ¼ÑƒÑŽ Ð² Ñ„Ð°Ð¹Ð» Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°)\nconst saveToProjectFile = async (data, filename) => {\n  try {\n    console.log(`ðŸ’¾ saveToProjectFile: Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ ${filename}...`);\n    console.log(`ðŸ’¾ saveToProjectFile: Ð”Ð°Ð½Ð½Ñ‹Ðµ (Ð¿ÐµÑ€Ð²Ñ‹Ðµ 100 ÑÐ¸Ð¼Ð²Ð¾Ð»Ð¾Ð²):`, JSON.stringify(data).substring(0, 100));\n    const apiUrl = getApiUrl();\n    const url = `${apiUrl}/files/${filename}`;\n    console.log(`ðŸ’¾ saveToProjectFile: URL: ${url}`);\n    console.log(`ðŸ’¾ saveToProjectFile: ÐžÑ‚Ð¿Ñ€Ð°Ð²ÐºÐ° Ð·Ð°Ð¿Ñ€Ð¾ÑÐ° Ð½Ð° ${url}...`);\n    console.log(`ðŸ’¾ saveToProjectFile: ÐœÐµÑ‚Ð¾Ð´: POST, Headers: Content-Type: application/json`);\n    let response;\n    try {\n      response = await fetch(url, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(data)\n      });\n      console.log(`ðŸ’¾ saveToProjectFile: ÐžÑ‚Ð²ÐµÑ‚ Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½:`, response.status, response.statusText);\n    } catch (fetchError) {\n      console.error(`âŒ saveToProjectFile: ÐžÑˆÐ¸Ð±ÐºÐ° fetch:`, fetchError);\n      console.error(`âŒ saveToProjectFile: Ð¢Ð¸Ð¿ Ð¾ÑˆÐ¸Ð±ÐºÐ¸:`, fetchError.name);\n      console.error(`âŒ saveToProjectFile: Ð¡Ð¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ:`, fetchError.message);\n      throw new Error(`ÐÐµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²Ð¸Ñ‚ÑŒ Ð·Ð°Ð¿Ñ€Ð¾Ñ: ${fetchError.message}. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ, Ñ‡Ñ‚Ð¾ Ð±ÑÐºÐµÐ½Ð´ Ð·Ð°Ð¿ÑƒÑ‰ÐµÐ½ Ð½Ð° Ð¿Ð¾Ñ€Ñ‚Ñƒ 5000 Ð¸ Ð´Ð¾ÑÑ‚ÑƒÐ¿ÐµÐ½.`);\n    }\n    if (!response.ok) {\n      const errorText = await response.text();\n      console.error(`âŒ saveToProjectFile: ÐžÑˆÐ¸Ð±ÐºÐ° HTTP ${response.status}:`, errorText);\n      throw new Error(`HTTP error! status: ${response.status}, message: ${errorText}`);\n    }\n    const result = await response.json();\n    console.log(`âœ… saveToProjectFile: ${filename} ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½:`, result.message);\n    console.log(`âœ… saveToProjectFile: ÐŸÑƒÑ‚ÑŒ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ:`, result.path);\n    return {\n      success: true,\n      message: result.message || `Ð¤Ð°Ð¹Ð» ${filename} ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½ Ð² Ð¿Ñ€Ð¾ÐµÐºÑ‚`,\n      path: result.path\n    };\n  } catch (error) {\n    console.error(`âŒ saveToProjectFile: ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ ${filename} Ñ‡ÐµÑ€ÐµÐ· API:`, error);\n    return {\n      success: false,\n      message: `ÐÐµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ ÑÐ¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ ${filename}: ${error.message}. Ð£Ð±ÐµÐ´Ð¸Ñ‚ÐµÑÑŒ, Ñ‡Ñ‚Ð¾ Ð±ÑÐºÐµÐ½Ð´ Ð·Ð°Ð¿ÑƒÑ‰ÐµÐ½ Ð½Ð° Ð¿Ð¾Ñ€Ñ‚Ñƒ 5000.`\n    };\n  }\n};\n\n// Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð¸Ð· Ñ„Ð°Ð¹Ð»Ð° Ñ‡ÐµÑ€ÐµÐ· fetch\nexport const loadDataFromFile = async filename => {\n  try {\n    // Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ timestamp Ð´Ð»Ñ Ð¿Ñ€ÐµÐ´Ð¾Ñ‚Ð²Ñ€Ð°Ñ‰ÐµÐ½Ð¸Ñ ÐºÐµÑˆÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ\n    const timestamp = Date.now();\n    const url = `/${filename}?t=${timestamp}`;\n    console.log(`ðŸ“¥ loadDataFromFile: Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° ${filename} Ñ URL: ${url}`);\n\n    // Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ cache: 'no-store' Ð´Ð»Ñ Ð¿Ñ€ÐµÐ´Ð¾Ñ‚Ð²Ñ€Ð°Ñ‰ÐµÐ½Ð¸Ñ ÐºÐµÑˆÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ\n    const response = await fetch(url, {\n      cache: 'no-store',\n      headers: {\n        'Cache-Control': 'no-cache, no-store, must-revalidate',\n        'Pragma': 'no-cache',\n        'Expires': '0'\n      }\n    });\n    if (!response.ok) {\n      console.error(`âŒ loadDataFromFile: HTTP Ð¾ÑˆÐ¸Ð±ÐºÐ° ${response.status} Ð´Ð»Ñ ${filename}`);\n      throw new Error(`HTTP error! status: ${response.status}`);\n    }\n    const data = await response.json();\n    console.log(`âœ… loadDataFromFile: ${filename} Ð·Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½, ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð¾Ð²:`, Array.isArray(data) ? data.length : 'Ð½Ðµ Ð¼Ð°ÑÑÐ¸Ð²');\n\n    // ÐÐ• ÑÐ¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ð¸ Ð² localStorage (Ð¾Ð½Ð¸ ÑÐ»Ð¸ÑˆÐºÐ¾Ð¼ Ð±Ð¾Ð»ÑŒÑˆÐ¸Ðµ)\n    // Ð”Ð»Ñ Ð´Ñ€ÑƒÐ³Ð¸Ñ… Ñ„Ð°Ð¹Ð»Ð¾Ð² ÑÐ¸Ð½Ñ…Ñ€Ð¾Ð½Ð¸Ð·Ð¸Ñ€ÑƒÐµÐ¼ Ñ localStorage\n    if (filename !== 'theme.json' && filename !== 'photos.json') {\n      const storageKey = `restaurant-${filename.replace('.json', '')}`;\n      try {\n        localStorage.setItem(storageKey, JSON.stringify(data));\n      } catch (storageError) {\n        console.warn(`âš ï¸ loadDataFromFile: ÐÐµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ ÑÐ¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ ${filename} Ð² localStorage:`, storageError);\n      }\n    }\n    return {\n      success: true,\n      data\n    };\n  } catch (error) {\n    console.error(`âŒ loadDataFromFile: ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ ${filename}:`, error);\n\n    // Fallback Ð½Ð° localStorage Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð´Ð»Ñ ÐÐ• Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ð¹\n    if (filename !== 'photos.json') {\n      const stored = localStorage.getItem(`restaurant-${filename.replace('.json', '')}`);\n      if (stored) {\n        try {\n          const parsed = JSON.parse(stored);\n          console.log(`ðŸ“¥ loadDataFromFile: Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½ fallback Ð¸Ð· localStorage Ð´Ð»Ñ ${filename}`);\n          return {\n            success: true,\n            data: parsed\n          };\n        } catch (e) {\n          console.error(`âŒ loadDataFromFile: ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ð°Ñ€ÑÐ¸Ð½Ð³Ð° Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð¸Ð· localStorage Ð´Ð»Ñ ${filename}:`, e);\n          return {\n            success: false,\n            message: 'ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ð°Ñ€ÑÐ¸Ð½Ð³Ð° Ð´Ð°Ð½Ð½Ñ‹Ñ…'\n          };\n        }\n      }\n    }\n    return {\n      success: false,\n      message: 'Ð¤Ð°Ð¹Ð» Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½'\n    };\n  }\n};\n\n// Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ñ‚ÐµÐ¼Ñ‹ Ð¸Ð· Ñ„Ð°Ð¹Ð»Ð°\nexport const loadTheme = async () => {\n  const result = await loadDataFromFile('theme.json');\n  if (result.success) {\n    const themeData = result.data;\n    const currentThemeId = localStorage.getItem('restaurant-theme') || 'default';\n    const newThemeId = themeData.currentTheme || 'default';\n\n    // Ð¡Ð¸Ð½Ñ…Ñ€Ð¾Ð½Ð¸Ð·Ð¸Ñ€ÑƒÐµÐ¼ Ñ localStorage Ð² Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¾Ð¼ Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ðµ\n    if (themeData.currentTheme) {\n      localStorage.setItem('restaurant-theme', themeData.currentTheme);\n    }\n    if (themeData.themes) {\n      localStorage.setItem('restaurant-themes', JSON.stringify(themeData.themes));\n    }\n\n    // Ð•ÑÐ»Ð¸ Ñ‚ÐµÐ¼Ð° Ð¸Ð·Ð¼ÐµÐ½Ð¸Ð»Ð°ÑÑŒ, Ð¿Ñ€Ð¸Ð¼ÐµÐ½ÑÐµÐ¼ ÐµÑ‘ (Ð½Ð¾ Ð½Ðµ Ð¿ÐµÑ€ÐµÐ·Ð°Ð¿Ð¸ÑÑ‹Ð²Ð°ÐµÐ¼, ÐµÑÐ»Ð¸ ÑƒÐ¶Ðµ Ð¿Ñ€Ð¸Ð¼ÐµÐ½ÐµÐ½Ð°)\n    if (newThemeId !== currentThemeId) {\n      // Ð¢ÐµÐ¼Ð° Ð¸Ð·Ð¼ÐµÐ½Ð¸Ð»Ð°ÑÑŒ Ð² Ñ„Ð°Ð¹Ð»Ðµ, Ð½Ð¾ Ð½Ðµ Ð¿Ñ€Ð¸Ð¼ÐµÐ½ÑÐµÐ¼ Ð·Ð´ÐµÑÑŒ - Ð¿ÑƒÑÑ‚ÑŒ Header.js ÑÑ‚Ð¾ ÑÐ´ÐµÐ»Ð°ÐµÑ‚\n      // Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð¸Ð·Ð±ÐµÐ¶Ð°Ñ‚ÑŒ ÐºÐ¾Ð½Ñ„Ð»Ð¸ÐºÑ‚Ð¾Ð² Ñ ÑƒÐ¶Ðµ Ð¿Ñ€Ð¸Ð¼ÐµÐ½ÐµÐ½Ð½Ð¾Ð¹ Ñ‚ÐµÐ¼Ð¾Ð¹\n    }\n    return themeData;\n  }\n  // Ð’Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÐ¼ Ð´ÐµÑ„Ð¾Ð»Ñ‚Ð½ÑƒÑŽ Ñ‚ÐµÐ¼Ñƒ\n  const defaultTheme = {\n    currentTheme: 'default',\n    themes: {\n      elegant: {\n        id: 'elegant',\n        name: 'Ð­Ð»ÐµÐ³Ð°Ð½Ñ‚Ð½Ð°Ñ ÑÐ¸Ð½ÑÑ',\n        primaryColor: '#2C3E50',\n        primaryLight: '#34495E',\n        primaryDark: '#1C2833',\n        secondaryColor: '#3498DB',\n        secondaryLight: '#5DADE2',\n        secondaryDark: '#2980B9',\n        accentColor: '#E74C3C',\n        backgroundColor: '#ECF0F1',\n        textColor: '#2C3E50',\n        textLight: '#566573'\n      }\n    }\n  };\n  // Ð¡Ð¸Ð½Ñ…Ñ€Ð¾Ð½Ð¸Ð·Ð¸Ñ€ÑƒÐµÐ¼ Ð´ÐµÑ„Ð¾Ð»Ñ‚Ð½ÑƒÑŽ Ñ‚ÐµÐ¼Ñƒ Ñ localStorage\n  localStorage.setItem('restaurant-theme', defaultTheme.currentTheme);\n  localStorage.setItem('restaurant-themes', JSON.stringify(defaultTheme.themes));\n  return defaultTheme;\n};\n\n// Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ð¼ÐµÐ½ÑŽ Ð¸Ð· Ñ„Ð°Ð¹Ð»Ð°\nexport const loadMenu = async () => {\n  console.log('ðŸ“¥ loadMenu: ÐÐ°Ñ‡Ð°Ð»Ð¾ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ð¼ÐµÐ½ÑŽ...');\n\n  // Ð—Ð°Ð³Ñ€ÑƒÐ¶Ð°ÐµÐ¼ Ð¼ÐµÐ½ÑŽ Ñ ÑÐµÑ€Ð²ÐµÑ€Ð° (Ð½Ðµ Ð¸Ð· localStorage, Ñ‚Ð°Ðº ÐºÐ°Ðº Ð¾Ð½Ð¾ ÑÐ»Ð¸ÑˆÐºÐ¾Ð¼ Ð±Ð¾Ð»ÑŒÑˆÐ¾Ðµ)\n  const result = await loadDataFromFile('menu.json');\n  if (result.success && Array.isArray(result.data)) {\n    console.log('ðŸ“¥ loadMenu: ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½Ð¾ Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ð¹ Ñ ÑÐµÑ€Ð²ÐµÑ€Ð°:', result.data.length);\n\n    // ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼, Ñ‡Ñ‚Ð¾ Ð²ÑÐµ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ñ‹ Ð¼ÐµÐ½ÑŽ Ð¸Ð¼ÐµÑŽÑ‚ ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ\n    const validMenuItems = result.data.filter(item => {\n      return item && item.id && item.name && item.price !== undefined;\n    });\n\n    // ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ (Ð´Ð»Ñ Ð¾Ñ‚Ð»Ð°Ð´ÐºÐ¸)\n    const itemsWithImages = validMenuItems.filter(item => item.image && item.image.startsWith('data:image'));\n    console.log(`ðŸ“¥ loadMenu: Ð’Ð°Ð»Ð¸Ð´Ð½Ñ‹Ñ… Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ð¹: ${validMenuItems.length}, Ñ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸ÑÐ¼Ð¸: ${itemsWithImages.length}`);\n\n    // ÐÐ• ÑÐ¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ð² localStorage - Ð¼ÐµÐ½ÑŽ ÑÐ»Ð¸ÑˆÐºÐ¾Ð¼ Ð±Ð¾Ð»ÑŒÑˆÐ¾Ðµ\n    // ÐžÐ½Ð¾ Ð²ÑÐµÐ³Ð´Ð° Ð·Ð°Ð³Ñ€ÑƒÐ¶Ð°ÐµÑ‚ÑÑ Ñ ÑÐµÑ€Ð²ÐµÑ€Ð°\n\n    return validMenuItems;\n  }\n  console.warn('ðŸ“¥ loadMenu: ÐœÐµÐ½ÑŽ Ð½Ðµ Ð·Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½Ð¾ Ñ ÑÐµÑ€Ð²ÐµÑ€Ð°, Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ localStorage (fallback)...');\n\n  // Ð•ÑÐ»Ð¸ Ñ„Ð°Ð¹Ð» Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½, Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ localStorage Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð´Ð»Ñ Ð¾Ð±Ñ€Ð°Ñ‚Ð½Ð¾Ð¹ ÑÐ¾Ð²Ð¼ÐµÑÑ‚Ð¸Ð¼Ð¾ÑÑ‚Ð¸\n  // Ð½Ð¾ ÑÑ‚Ð¾ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð´Ð»Ñ ÑÑ‚Ð°Ñ€Ñ‹Ñ… Ð´Ð°Ð½Ð½Ñ‹Ñ…\n  try {\n    const stored = localStorage.getItem('restaurant-menu');\n    if (stored) {\n      const parsed = JSON.parse(stored);\n      if (Array.isArray(parsed)) {\n        console.log('ðŸ“¥ loadMenu: ÐÐ°Ð¹Ð´ÐµÐ½Ð¾ Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ð¹ Ð² localStorage (fallback):', parsed.length);\n        const validMenuItems = parsed.filter(item => {\n          return item && item.id && item.name && item.price !== undefined;\n        });\n        console.log('ðŸ“¥ loadMenu: Ð’Ð°Ð»Ð¸Ð´Ð½Ñ‹Ñ… Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ð¹ Ð¸Ð· localStorage:', validMenuItems.length);\n        return validMenuItems;\n      }\n    }\n  } catch (error) {\n    // Ð˜Ð³Ð½Ð¾Ñ€Ð¸Ñ€ÑƒÐµÐ¼ Ð¾ÑˆÐ¸Ð±ÐºÐ¸ localStorage\n    console.warn('âš ï¸ loadMenu: ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ð¼ÐµÐ½ÑŽ Ð¸Ð· localStorage:', error);\n  }\n  console.log('ðŸ“¥ loadMenu: ÐœÐµÐ½ÑŽ Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½Ð¾');\n  return [];\n};\n\n// Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ð·Ð°ÑÐ²Ð¾Ðº Ð¸Ð· Ñ„Ð°Ð¹Ð»Ð°\nexport const loadReservations = async () => {\n  const result = await loadDataFromFile('reservations.json');\n  if (result.success && Array.isArray(result.data)) {\n    return result.data;\n  }\n  return [];\n};\n\n// Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¹ Ð¸Ð· Ñ„Ð°Ð¹Ð»Ð°\nexport const loadCategories = async () => {\n  const result = await loadDataFromFile('categories.json');\n  if (result.success && Array.isArray(result.data)) {\n    return result.data;\n  }\n  return [{\n    id: 1,\n    key: 'cold',\n    name: 'Ð¥Ð¾Ð»Ð¾Ð´Ð½Ñ‹Ðµ Ð·Ð°ÐºÑƒÑÐºÐ¸',\n    order: 1\n  }, {\n    id: 2,\n    key: 'salads',\n    name: 'Ð¡Ð°Ð»Ð°Ñ‚Ñ‹',\n    order: 2\n  }, {\n    id: 3,\n    key: 'hot',\n    name: 'Ð“Ð¾Ñ€ÑÑ‡Ð¸Ðµ Ð±Ð»ÑŽÐ´Ð°',\n    order: 3\n  }, {\n    id: 4,\n    key: 'drinks',\n    name: 'ÐÐ°Ð¿Ð¸Ñ‚ÐºÐ¸',\n    order: 4\n  }];\n};\n\n// Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ Ñ‚ÐµÐ¼Ñ‹ Ð² Ñ„Ð°Ð¹Ð» Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°\nexport const saveTheme = async themeData => {\n  // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ð² localStorage Ð´Ð»Ñ Ð±Ñ‹ÑÑ‚Ñ€Ð¾Ð³Ð¾ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð°\n  localStorage.setItem('restaurant-theme', themeData.currentTheme);\n  localStorage.setItem('restaurant-themes', JSON.stringify(themeData.themes));\n\n  // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ð½Ð°Ð¿Ñ€ÑÐ¼ÑƒÑŽ Ð² Ñ„Ð°Ð¹Ð» Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð° Ñ‡ÐµÑ€ÐµÐ· API\n  const result = await saveToProjectFile(themeData, 'theme.json');\n  return result;\n};\n\n// Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ Ð¼ÐµÐ½ÑŽ Ð² Ñ„Ð°Ð¹Ð» Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°\nexport const saveMenu = async menuItems => {\n  console.log('ðŸ’¾ saveMenu: ÐÐ°Ñ‡Ð°Ð»Ð¾ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ Ð¼ÐµÐ½ÑŽ, Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ð¹:', (menuItems === null || menuItems === void 0 ? void 0 : menuItems.length) || 0);\n  if (!Array.isArray(menuItems)) {\n    console.error('âŒ saveMenu: menuItems Ð½Ðµ ÑÐ²Ð»ÑÐµÑ‚ÑÑ Ð¼Ð°ÑÑÐ¸Ð²Ð¾Ð¼:', typeof menuItems);\n    return {\n      success: false,\n      message: 'menuItems Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð±Ñ‹Ñ‚ÑŒ Ð¼Ð°ÑÑÐ¸Ð²Ð¾Ð¼'\n    };\n  }\n\n  // ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼, Ñ‡Ñ‚Ð¾ Ð²ÑÐµ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ñ‹ Ð¼ÐµÐ½ÑŽ Ð¸Ð¼ÐµÑŽÑ‚ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ (Ð´Ð»Ñ Ð¾Ñ‚Ð»Ð°Ð´ÐºÐ¸)\n  const itemsWithImages = menuItems.filter(item => item.image && item.image.startsWith('data:image'));\n  console.log(`ðŸ’¾ saveMenu: ÐŸÐ¾Ð·Ð¸Ñ†Ð¸Ð¹ Ñ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸ÑÐ¼Ð¸: ${itemsWithImages.length} Ð¸Ð· ${menuItems.length}`);\n\n  // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ð² localStorage Ð´Ð»Ñ Ð±Ñ‹ÑÑ‚Ñ€Ð¾Ð³Ð¾ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð°\n  localStorage.setItem('restaurant-menu', JSON.stringify(menuItems));\n  console.log('ðŸ’¾ saveMenu: ÐœÐµÐ½ÑŽ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¾ Ð² localStorage');\n\n  // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ð½Ð°Ð¿Ñ€ÑÐ¼ÑƒÑŽ Ð² Ñ„Ð°Ð¹Ð» Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð° Ñ‡ÐµÑ€ÐµÐ· API\n  console.log('ðŸ’¾ saveMenu: ÐžÑ‚Ð¿Ñ€Ð°Ð²ÐºÐ° Ð½Ð° ÑÐµÑ€Ð²ÐµÑ€...');\n  const result = await saveToProjectFile(menuItems, 'menu.json');\n  if (result.success) {\n    console.log('âœ… saveMenu: ÐœÐµÐ½ÑŽ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¾ Ð² Ñ„Ð°Ð¹Ð»:', result.path);\n    console.log(`âœ… saveMenu: Ð’ÑÐµÐ³Ð¾ Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ð¹ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¾: ${menuItems.length}, Ñ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸ÑÐ¼Ð¸: ${itemsWithImages.length}`);\n  } else {\n    console.error('âŒ saveMenu: ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ:', result.message);\n  }\n  return result;\n};\n\n// Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ Ð·Ð°ÑÐ²Ð¾Ðº Ð² Ñ„Ð°Ð¹Ð» Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð° - Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð´Ð»Ñ Ð°Ð´Ð¼Ð¸Ð½-Ð¿Ð°Ð½ÐµÐ»Ð¸\nexport const saveReservations = async reservations => {\n  // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ð² localStorage Ð´Ð»Ñ Ð±Ñ‹ÑÑ‚Ñ€Ð¾Ð³Ð¾ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð°\n  localStorage.setItem('restaurant-reservations', JSON.stringify(reservations));\n\n  // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ð½Ð°Ð¿Ñ€ÑÐ¼ÑƒÑŽ Ð² Ñ„Ð°Ð¹Ð» Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð° Ñ‡ÐµÑ€ÐµÐ· API\n  const result = await saveToProjectFile(reservations, 'reservations.json');\n  return result;\n};\n\n// ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ Ð·Ð°ÑÐ²Ð¾Ðº Ð² Ñ„Ð°Ð¹Ð» Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°\nexport const autoSaveReservations = async reservations => {\n  // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ð² localStorage Ð´Ð»Ñ Ð±Ñ‹ÑÑ‚Ñ€Ð¾Ð³Ð¾ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð°\n  localStorage.setItem('restaurant-reservations', JSON.stringify(reservations));\n\n  // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ð½Ð°Ð¿Ñ€ÑÐ¼ÑƒÑŽ Ð² Ñ„Ð°Ð¹Ð» Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð° Ñ‡ÐµÑ€ÐµÐ· API\n  const result = await saveToProjectFile(reservations, 'reservations.json');\n  return result;\n};\n\n// Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¹ Ð² Ñ„Ð°Ð¹Ð» Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°\nexport const saveCategories = async categories => {\n  // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ð² localStorage Ð´Ð»Ñ Ð±Ñ‹ÑÑ‚Ñ€Ð¾Ð³Ð¾ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð°\n  localStorage.setItem('restaurant-categories', JSON.stringify(categories));\n\n  // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ð½Ð°Ð¿Ñ€ÑÐ¼ÑƒÑŽ Ð² Ñ„Ð°Ð¹Ð» Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð° Ñ‡ÐµÑ€ÐµÐ· API\n  const result = await saveToProjectFile(categories, 'categories.json');\n  return result;\n};\n\n// ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ (Ð°Ð»Ð¸Ð°ÑÑ‹ Ð´Ð»Ñ Ð¾Ð±Ñ€Ð°Ñ‚Ð½Ð¾Ð¹ ÑÐ¾Ð²Ð¼ÐµÑÑ‚Ð¸Ð¼Ð¾ÑÑ‚Ð¸)\nexport const autoSaveMenu = saveMenu;\nexport const saveMenuToFile = saveMenu;\nexport const saveReservationsToFile = saveReservations;\n\n// Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ð¹ Ð¸Ð· Ñ„Ð°Ð¹Ð»Ð°\nexport const loadPhotos = async () => {\n  console.log('ðŸ“¸ loadPhotos: ÐÐ°Ñ‡Ð°Ð»Ð¾ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ð¹...');\n\n  // Ð—Ð°Ð³Ñ€ÑƒÐ¶Ð°ÐµÐ¼ Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ð¸ Ñ ÑÐµÑ€Ð²ÐµÑ€Ð° (Ð½Ðµ Ð¸Ð· localStorage, Ñ‚Ð°Ðº ÐºÐ°Ðº Ð¾Ð½Ð¸ ÑÐ»Ð¸ÑˆÐºÐ¾Ð¼ Ð±Ð¾Ð»ÑŒÑˆÐ¸Ðµ)\n  const result = await loadDataFromFile('photos.json');\n  if (result.success && Array.isArray(result.data)) {\n    console.log('ðŸ“¸ loadPhotos: ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½Ð¾ Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ð¹ Ñ ÑÐµÑ€Ð²ÐµÑ€Ð°:', result.data.length);\n\n    // Ð¤Ð¸Ð»ÑŒÑ‚Ñ€ÑƒÐµÐ¼ Ð¿ÑƒÑÑ‚Ñ‹Ðµ Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ð¸ Ð¸Ð»Ð¸ Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ð¸ Ð±ÐµÐ· Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ\n    const validPhotos = result.data.filter(photo => {\n      const isValid = photo && photo.id &&\n      // ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ Ð½Ð°Ð»Ð¸Ñ‡Ð¸Ðµ ID\n      photo.image && photo.image.trim() && photo.image.startsWith('data:image');\n      if (!isValid) {\n        var _photo$image;\n        console.warn('ðŸ“¸ loadPhotos: ÐŸÑ€Ð¾Ð¿ÑƒÑ‰ÐµÐ½Ð° Ð½ÐµÐ²Ð°Ð»Ð¸Ð´Ð½Ð°Ñ Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ñ:', {\n          hasId: !!(photo !== null && photo !== void 0 && photo.id),\n          hasImage: !!(photo !== null && photo !== void 0 && photo.image),\n          imageType: photo === null || photo === void 0 ? void 0 : (_photo$image = photo.image) === null || _photo$image === void 0 ? void 0 : _photo$image.substring(0, 20)\n        });\n      }\n      return isValid;\n    });\n    console.log('ðŸ“¸ loadPhotos: Ð’Ð°Ð»Ð¸Ð´Ð½Ñ‹Ñ… Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ð¹:', validPhotos.length);\n\n    // ÐÐ• ÑÐ¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ð² localStorage - Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ð¸ ÑÐ»Ð¸ÑˆÐºÐ¾Ð¼ Ð±Ð¾Ð»ÑŒÑˆÐ¸Ðµ\n    // ÐžÐ½Ð¸ Ð²ÑÐµÐ³Ð´Ð° Ð·Ð°Ð³Ñ€ÑƒÐ¶Ð°ÑŽÑ‚ÑÑ Ñ ÑÐµÑ€Ð²ÐµÑ€Ð°\n\n    return validPhotos;\n  }\n  console.warn('ðŸ“¸ loadPhotos: Ð¤Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ð¸ Ð½Ðµ Ð·Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½Ñ‹ Ñ ÑÐµÑ€Ð²ÐµÑ€Ð°, Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ localStorage (fallback)...');\n\n  // Ð•ÑÐ»Ð¸ Ñ„Ð°Ð¹Ð» Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½, Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ localStorage Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð´Ð»Ñ Ð¾Ð±Ñ€Ð°Ñ‚Ð½Ð¾Ð¹ ÑÐ¾Ð²Ð¼ÐµÑÑ‚Ð¸Ð¼Ð¾ÑÑ‚Ð¸\n  // Ð½Ð¾ ÑÑ‚Ð¾ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð´Ð»Ñ ÑÑ‚Ð°Ñ€Ñ‹Ñ… Ð´Ð°Ð½Ð½Ñ‹Ñ…\n  try {\n    const stored = localStorage.getItem('restaurant-photos');\n    if (stored) {\n      const parsed = JSON.parse(stored);\n      if (Array.isArray(parsed)) {\n        console.log('ðŸ“¸ loadPhotos: ÐÐ°Ð¹Ð´ÐµÐ½Ð¾ Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ð¹ Ð² localStorage (fallback):', parsed.length);\n\n        // Ð¤Ð¸Ð»ÑŒÑ‚Ñ€ÑƒÐµÐ¼ Ð²Ð°Ð»Ð¸Ð´Ð½Ñ‹Ðµ Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ð¸\n        const validPhotos = parsed.filter(photo => {\n          return photo && photo.id && photo.image && photo.image.trim() && photo.image.startsWith('data:image');\n        });\n        console.log('ðŸ“¸ loadPhotos: Ð’Ð°Ð»Ð¸Ð´Ð½Ñ‹Ñ… Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ð¹ Ð¸Ð· localStorage:', validPhotos.length);\n        return validPhotos;\n      }\n    }\n  } catch (error) {\n    // Ð˜Ð³Ð½Ð¾Ñ€Ð¸Ñ€ÑƒÐµÐ¼ Ð¾ÑˆÐ¸Ð±ÐºÐ¸ localStorage\n    console.warn('âš ï¸ loadPhotos: ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ð¹ Ð¸Ð· localStorage:', error);\n  }\n  console.log('ðŸ“¸ loadPhotos: Ð¤Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ð¸ Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½Ñ‹');\n  return [];\n};\n\n// Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ð¹ Ð² Ñ„Ð°Ð¹Ð» Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°\nexport const savePhotos = async photos => {\n  // ÐÐ• ÑÐ¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ð² localStorage - Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ð¸ Ð² base64 ÑÐ»Ð¸ÑˆÐºÐ¾Ð¼ Ð±Ð¾Ð»ÑŒÑˆÐ¸Ðµ\n  // Ð¸ Ð¼Ð¾Ð³ÑƒÑ‚ Ð¿Ñ€ÐµÐ²Ñ‹ÑÐ¸Ñ‚ÑŒ Ð»Ð¸Ð¼Ð¸Ñ‚ localStorage (Ð¾Ð±Ñ‹Ñ‡Ð½Ð¾ 5-10MB)\n  // Ð’Ð¼ÐµÑÑ‚Ð¾ ÑÑ‚Ð¾Ð³Ð¾ ÑÐ¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð½Ð° ÑÐµÑ€Ð²ÐµÑ€\n\n  // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ð½Ð°Ð¿Ñ€ÑÐ¼ÑƒÑŽ Ð² Ñ„Ð°Ð¹Ð» Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð° Ñ‡ÐµÑ€ÐµÐ· API\n  const result = await saveToProjectFile(photos, 'photos.json');\n\n  // Ð•ÑÐ»Ð¸ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ Ð½Ð° ÑÐµÑ€Ð²ÐµÑ€ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾, Ð¿Ñ‹Ñ‚Ð°ÐµÐ¼ÑÑ ÑÐ¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð¼ÐµÑ‚Ð°Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð² localStorage\n  // (Ð±ÐµÐ· ÑÐ°Ð¼Ð¸Ñ… Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ð¹) Ð´Ð»Ñ Ð±Ñ‹ÑÑ‚Ñ€Ð¾Ð³Ð¾ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð°\n  if (result.success) {\n    try {\n      // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð¼ÐµÑ‚Ð°Ð´Ð°Ð½Ð½Ñ‹Ðµ (Ð±ÐµÐ· base64 Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ð¹) Ð´Ð»Ñ ÐºÐµÑˆÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ\n      const photosMetadata = photos.map(photo => ({\n        id: photo.id,\n        caption: photo.caption\n        // ÐÐ• ÑÐ¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ image - ÑÑ‚Ð¾ ÑÐ»Ð¸ÑˆÐºÐ¾Ð¼ Ð±Ð¾Ð»ÑŒÑˆÐ¾Ð¹ Ð¾Ð±ÑŠÐµÐ¼ Ð´Ð°Ð½Ð½Ñ‹Ñ…\n      }));\n      localStorage.setItem('restaurant-photos-metadata', JSON.stringify(photosMetadata));\n    } catch (storageError) {\n      // Ð•ÑÐ»Ð¸ localStorage Ð¿ÐµÑ€ÐµÐ¿Ð¾Ð»Ð½ÐµÐ½, Ð¿Ñ€Ð¾ÑÑ‚Ð¾ Ð¸Ð³Ð½Ð¾Ñ€Ð¸Ñ€ÑƒÐµÐ¼ Ð¾ÑˆÐ¸Ð±ÐºÑƒ\n      // Ð“Ð»Ð°Ð²Ð½Ð¾Ðµ - Ð´Ð°Ð½Ð½Ñ‹Ðµ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ñ‹ Ð½Ð° ÑÐµÑ€Ð²ÐµÑ€Ðµ\n      console.warn('ÐÐµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ ÑÐ¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ Ð¼ÐµÑ‚Ð°Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð² localStorage:', storageError);\n    }\n  }\n  return result;\n};\n\n// ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ð¹ (ÑÐ¾Ñ…Ñ€Ð°Ð½ÑÐµÑ‚ Ð½Ð° ÑÐµÑ€Ð²ÐµÑ€)\nexport const autoSavePhotos = async photos => {\n  // Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ñ‚Ñƒ Ð¶Ðµ Ð»Ð¾Ð³Ð¸ÐºÑƒ, Ñ‡Ñ‚Ð¾ Ð¸ savePhotos\n  return await savePhotos(photos);\n};\nexport const savePhotosToFile = async photos => {\n  // ÐÐ»Ð¸Ð°Ñ Ð´Ð»Ñ Ð¾Ð±Ñ€Ð°Ñ‚Ð½Ð¾Ð¹ ÑÐ¾Ð²Ð¼ÐµÑÑ‚Ð¸Ð¼Ð¾ÑÑ‚Ð¸\n  return await savePhotos(photos);\n};\n\n// Ð˜Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ Ñ„Ð°Ð¹Ð»Ð¾Ð² (Ð¾ÑÑ‚Ð°Ð²Ð»ÑÐµÐ¼ Ð´Ð»Ñ Ð¾Ð±Ñ€Ð°Ñ‚Ð½Ð¾Ð¹ ÑÐ¾Ð²Ð¼ÐµÑÑ‚Ð¸Ð¼Ð¾ÑÑ‚Ð¸, Ð½Ð¾ Ð¾Ð½Ð¸ Ð½Ðµ Ð½ÑƒÐ¶Ð½Ñ‹)\nexport const initializeReservationsFile = async () => {\n  return null;\n};\nexport const initializeMenuFile = async () => {\n  return null;\n};\nexport const initializePhotosFile = async () => {\n  return null;\n};","map":{"version":3,"names":["getApiUrl","port","window","location","hostname","console","log","apiUrl","saveToProjectFile","data","filename","JSON","stringify","substring","url","response","fetch","method","headers","body","status","statusText","fetchError","error","name","message","Error","ok","errorText","text","result","json","path","success","loadDataFromFile","timestamp","Date","now","cache","Array","isArray","length","storageKey","replace","localStorage","setItem","storageError","warn","stored","getItem","parsed","parse","e","loadTheme","themeData","currentThemeId","newThemeId","currentTheme","themes","defaultTheme","elegant","id","primaryColor","primaryLight","primaryDark","secondaryColor","secondaryLight","secondaryDark","accentColor","backgroundColor","textColor","textLight","loadMenu","validMenuItems","filter","item","price","undefined","itemsWithImages","image","startsWith","loadReservations","loadCategories","key","order","saveTheme","saveMenu","menuItems","saveReservations","reservations","autoSaveReservations","saveCategories","categories","autoSaveMenu","saveMenuToFile","saveReservationsToFile","loadPhotos","validPhotos","photo","isValid","trim","_photo$image","hasId","hasImage","imageType","savePhotos","photos","photosMetadata","map","caption","autoSavePhotos","savePhotosToFile","initializeReservationsFile","initializeMenuFile","initializePhotosFile"],"sources":["C:/restaurant-website (2)/restaurant-website/Backend/ClientApp/src/utils/fileStorage.js"],"sourcesContent":["// Ð£Ñ‚Ð¸Ð»Ð¸Ñ‚Ð° Ð´Ð»Ñ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ Ñ Ð´Ð°Ð½Ð½Ñ‹Ð¼Ð¸ Ñ‡ÐµÑ€ÐµÐ· ÑÑ‚Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ JSON Ñ„Ð°Ð¹Ð»Ñ‹\n// Ð’ÑÐµ Ð´Ð°Ð½Ð½Ñ‹Ðµ ÑÐ¾Ñ…Ñ€Ð°Ð½ÑÑŽÑ‚ÑÑ Ñ‡ÐµÑ€ÐµÐ· API Ð½Ð°Ð¿Ñ€ÑÐ¼ÑƒÑŽ Ð² Ñ„Ð°Ð¹Ð»Ñ‹ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°\n\n// ÐžÐ¿Ñ€ÐµÐ´ÐµÐ»ÑÐµÐ¼ URL API\nconst getApiUrl = () => {\n  // Ð’ÑÐµÐ³Ð´Ð° Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð¾Ñ‚Ð½Ð¾ÑÐ¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ð¹ Ð¿ÑƒÑ‚ÑŒ - Ð±ÑÐºÐµÐ½Ð´ Ð¿Ñ€Ð¾ÐºÑÐ¸Ñ€ÑƒÐµÑ‚ Ð·Ð°Ð¿Ñ€Ð¾ÑÑ‹\n  // Ð•ÑÐ»Ð¸ React Ð½Ð° Ð¿Ð¾Ñ€Ñ‚Ñƒ 3000, Ð±ÑÐºÐµÐ½Ð´ Ð½Ð° 5000 Ð¿Ñ€Ð¾ÐºÑÐ¸Ñ€ÑƒÐµÑ‚ Ð·Ð°Ð¿Ñ€Ð¾ÑÑ‹ Ðº React\n  // API Ð·Ð°Ð¿Ñ€Ð¾ÑÑ‹ Ð´Ð¾Ð»Ð¶Ð½Ñ‹ Ð¸Ð´Ñ‚Ð¸ Ñ‡ÐµÑ€ÐµÐ· Ð±ÑÐºÐµÐ½Ð´ Ð½Ð° Ð¿Ð¾Ñ€Ñ‚Ñƒ 5000\n  const port = window.location.port;\n  const hostname = window.location.hostname;\n  \n  console.log(`ðŸ” getApiUrl: hostname=${hostname}, port=${port}`);\n\n  // Ð•ÑÐ»Ð¸ Ð¼Ñ‹ Ð½Ð° Ð¿Ð¾Ñ€Ñ‚Ñƒ 3000 (React dev server), Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð°Ð±ÑÐ¾Ð»ÑŽÑ‚Ð½Ñ‹Ð¹ Ð¿ÑƒÑ‚ÑŒ Ðº Ð±ÑÐºÐµÐ½Ð´Ñƒ\n  if (port === '3000') {\n    const apiUrl = 'http://localhost:5000/api';\n    console.log(`ðŸ” getApiUrl: React Ð½Ð° Ð¿Ð¾Ñ€Ñ‚Ñƒ 3000, Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ ${apiUrl}`);\n    return apiUrl;\n  }\n  \n  // Ð˜Ð½Ð°Ñ‡Ðµ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð¾Ñ‚Ð½Ð¾ÑÐ¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ð¹ Ð¿ÑƒÑ‚ÑŒ (Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÐ¼ Ñ‡ÐµÑ€ÐµÐ· Ð±ÑÐºÐµÐ½Ð´)\n  const apiUrl = '/api';\n  console.log(`ðŸ” getApiUrl: Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð¾Ñ‚Ð½Ð¾ÑÐ¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ð¹ Ð¿ÑƒÑ‚ÑŒ ${apiUrl}`);\n  return apiUrl;\n};\n\n// Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ Ñ„Ð°Ð¹Ð»Ð° Ñ‡ÐµÑ€ÐµÐ· API (Ð½Ð°Ð¿Ñ€ÑÐ¼ÑƒÑŽ Ð² Ñ„Ð°Ð¹Ð» Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°)\nconst saveToProjectFile = async (data, filename) => {\n  try {\n    console.log(`ðŸ’¾ saveToProjectFile: Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ ${filename}...`);\n    console.log(`ðŸ’¾ saveToProjectFile: Ð”Ð°Ð½Ð½Ñ‹Ðµ (Ð¿ÐµÑ€Ð²Ñ‹Ðµ 100 ÑÐ¸Ð¼Ð²Ð¾Ð»Ð¾Ð²):`, JSON.stringify(data).substring(0, 100));\n    \n    const apiUrl = getApiUrl();\n    const url = `${apiUrl}/files/${filename}`;\n    console.log(`ðŸ’¾ saveToProjectFile: URL: ${url}`);\n    \n    console.log(`ðŸ’¾ saveToProjectFile: ÐžÑ‚Ð¿Ñ€Ð°Ð²ÐºÐ° Ð·Ð°Ð¿Ñ€Ð¾ÑÐ° Ð½Ð° ${url}...`);\n    console.log(`ðŸ’¾ saveToProjectFile: ÐœÐµÑ‚Ð¾Ð´: POST, Headers: Content-Type: application/json`);\n    \n    let response;\n    try {\n      response = await fetch(url, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(data),\n    });\n      console.log(`ðŸ’¾ saveToProjectFile: ÐžÑ‚Ð²ÐµÑ‚ Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½:`, response.status, response.statusText);\n    } catch (fetchError) {\n      console.error(`âŒ saveToProjectFile: ÐžÑˆÐ¸Ð±ÐºÐ° fetch:`, fetchError);\n      console.error(`âŒ saveToProjectFile: Ð¢Ð¸Ð¿ Ð¾ÑˆÐ¸Ð±ÐºÐ¸:`, fetchError.name);\n      console.error(`âŒ saveToProjectFile: Ð¡Ð¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ:`, fetchError.message);\n      throw new Error(`ÐÐµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²Ð¸Ñ‚ÑŒ Ð·Ð°Ð¿Ñ€Ð¾Ñ: ${fetchError.message}. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ, Ñ‡Ñ‚Ð¾ Ð±ÑÐºÐµÐ½Ð´ Ð·Ð°Ð¿ÑƒÑ‰ÐµÐ½ Ð½Ð° Ð¿Ð¾Ñ€Ñ‚Ñƒ 5000 Ð¸ Ð´Ð¾ÑÑ‚ÑƒÐ¿ÐµÐ½.`);\n    }\n\n    if (!response.ok) {\n      const errorText = await response.text();\n      console.error(`âŒ saveToProjectFile: ÐžÑˆÐ¸Ð±ÐºÐ° HTTP ${response.status}:`, errorText);\n      throw new Error(`HTTP error! status: ${response.status}, message: ${errorText}`);\n    }\n\n    const result = await response.json();\n    console.log(`âœ… saveToProjectFile: ${filename} ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½:`, result.message);\n    console.log(`âœ… saveToProjectFile: ÐŸÑƒÑ‚ÑŒ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ:`, result.path);\n    return { \n      success: true, \n      message: result.message || `Ð¤Ð°Ð¹Ð» ${filename} ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½ Ð² Ð¿Ñ€Ð¾ÐµÐºÑ‚`,\n      path: result.path\n    };\n  } catch (error) {\n    console.error(`âŒ saveToProjectFile: ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ ${filename} Ñ‡ÐµÑ€ÐµÐ· API:`, error);\n    return { \n      success: false, \n      message: `ÐÐµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ ÑÐ¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ ${filename}: ${error.message}. Ð£Ð±ÐµÐ´Ð¸Ñ‚ÐµÑÑŒ, Ñ‡Ñ‚Ð¾ Ð±ÑÐºÐµÐ½Ð´ Ð·Ð°Ð¿ÑƒÑ‰ÐµÐ½ Ð½Ð° Ð¿Ð¾Ñ€Ñ‚Ñƒ 5000.` \n    };\n  }\n};\n\n// Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð¸Ð· Ñ„Ð°Ð¹Ð»Ð° Ñ‡ÐµÑ€ÐµÐ· fetch\nexport const loadDataFromFile = async (filename) => {\n  try {\n    // Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ timestamp Ð´Ð»Ñ Ð¿Ñ€ÐµÐ´Ð¾Ñ‚Ð²Ñ€Ð°Ñ‰ÐµÐ½Ð¸Ñ ÐºÐµÑˆÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ\n    const timestamp = Date.now();\n    const url = `/${filename}?t=${timestamp}`;\n    console.log(`ðŸ“¥ loadDataFromFile: Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° ${filename} Ñ URL: ${url}`);\n    \n    // Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ cache: 'no-store' Ð´Ð»Ñ Ð¿Ñ€ÐµÐ´Ð¾Ñ‚Ð²Ñ€Ð°Ñ‰ÐµÐ½Ð¸Ñ ÐºÐµÑˆÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ\n    const response = await fetch(url, {\n      cache: 'no-store',\n      headers: {\n        'Cache-Control': 'no-cache, no-store, must-revalidate',\n        'Pragma': 'no-cache',\n        'Expires': '0'\n      }\n    });\n    \n    if (!response.ok) {\n      console.error(`âŒ loadDataFromFile: HTTP Ð¾ÑˆÐ¸Ð±ÐºÐ° ${response.status} Ð´Ð»Ñ ${filename}`);\n      throw new Error(`HTTP error! status: ${response.status}`);\n    }\n    \n    const data = await response.json();\n    console.log(`âœ… loadDataFromFile: ${filename} Ð·Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½, ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð¾Ð²:`, Array.isArray(data) ? data.length : 'Ð½Ðµ Ð¼Ð°ÑÑÐ¸Ð²');\n    \n    // ÐÐ• ÑÐ¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ð¸ Ð² localStorage (Ð¾Ð½Ð¸ ÑÐ»Ð¸ÑˆÐºÐ¾Ð¼ Ð±Ð¾Ð»ÑŒÑˆÐ¸Ðµ)\n    // Ð”Ð»Ñ Ð´Ñ€ÑƒÐ³Ð¸Ñ… Ñ„Ð°Ð¹Ð»Ð¾Ð² ÑÐ¸Ð½Ñ…Ñ€Ð¾Ð½Ð¸Ð·Ð¸Ñ€ÑƒÐµÐ¼ Ñ localStorage\n    if (filename !== 'theme.json' && filename !== 'photos.json') {\n      const storageKey = `restaurant-${filename.replace('.json', '')}`;\n      try {\n        localStorage.setItem(storageKey, JSON.stringify(data));\n      } catch (storageError) {\n        console.warn(`âš ï¸ loadDataFromFile: ÐÐµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ ÑÐ¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ ${filename} Ð² localStorage:`, storageError);\n      }\n    }\n    \n    return { success: true, data };\n  } catch (error) {\n    console.error(`âŒ loadDataFromFile: ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ ${filename}:`, error);\n    \n    // Fallback Ð½Ð° localStorage Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð´Ð»Ñ ÐÐ• Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ð¹\n    if (filename !== 'photos.json') {\n      const stored = localStorage.getItem(`restaurant-${filename.replace('.json', '')}`);\n      if (stored) {\n        try {\n          const parsed = JSON.parse(stored);\n          console.log(`ðŸ“¥ loadDataFromFile: Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½ fallback Ð¸Ð· localStorage Ð´Ð»Ñ ${filename}`);\n          return { success: true, data: parsed };\n        } catch (e) {\n          console.error(`âŒ loadDataFromFile: ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ð°Ñ€ÑÐ¸Ð½Ð³Ð° Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð¸Ð· localStorage Ð´Ð»Ñ ${filename}:`, e);\n          return { success: false, message: 'ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ð°Ñ€ÑÐ¸Ð½Ð³Ð° Ð´Ð°Ð½Ð½Ñ‹Ñ…' };\n        }\n      }\n    }\n    \n    return { success: false, message: 'Ð¤Ð°Ð¹Ð» Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½' };\n  }\n};\n\n// Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ñ‚ÐµÐ¼Ñ‹ Ð¸Ð· Ñ„Ð°Ð¹Ð»Ð°\nexport const loadTheme = async () => {\n  const result = await loadDataFromFile('theme.json');\n  if (result.success) {\n    const themeData = result.data;\n    const currentThemeId = localStorage.getItem('restaurant-theme') || 'default';\n    const newThemeId = themeData.currentTheme || 'default';\n    \n    // Ð¡Ð¸Ð½Ñ…Ñ€Ð¾Ð½Ð¸Ð·Ð¸Ñ€ÑƒÐµÐ¼ Ñ localStorage Ð² Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¾Ð¼ Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ðµ\n    if (themeData.currentTheme) {\n      localStorage.setItem('restaurant-theme', themeData.currentTheme);\n    }\n    if (themeData.themes) {\n      localStorage.setItem('restaurant-themes', JSON.stringify(themeData.themes));\n    }\n    \n    // Ð•ÑÐ»Ð¸ Ñ‚ÐµÐ¼Ð° Ð¸Ð·Ð¼ÐµÐ½Ð¸Ð»Ð°ÑÑŒ, Ð¿Ñ€Ð¸Ð¼ÐµÐ½ÑÐµÐ¼ ÐµÑ‘ (Ð½Ð¾ Ð½Ðµ Ð¿ÐµÑ€ÐµÐ·Ð°Ð¿Ð¸ÑÑ‹Ð²Ð°ÐµÐ¼, ÐµÑÐ»Ð¸ ÑƒÐ¶Ðµ Ð¿Ñ€Ð¸Ð¼ÐµÐ½ÐµÐ½Ð°)\n    if (newThemeId !== currentThemeId) {\n      // Ð¢ÐµÐ¼Ð° Ð¸Ð·Ð¼ÐµÐ½Ð¸Ð»Ð°ÑÑŒ Ð² Ñ„Ð°Ð¹Ð»Ðµ, Ð½Ð¾ Ð½Ðµ Ð¿Ñ€Ð¸Ð¼ÐµÐ½ÑÐµÐ¼ Ð·Ð´ÐµÑÑŒ - Ð¿ÑƒÑÑ‚ÑŒ Header.js ÑÑ‚Ð¾ ÑÐ´ÐµÐ»Ð°ÐµÑ‚\n      // Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð¸Ð·Ð±ÐµÐ¶Ð°Ñ‚ÑŒ ÐºÐ¾Ð½Ñ„Ð»Ð¸ÐºÑ‚Ð¾Ð² Ñ ÑƒÐ¶Ðµ Ð¿Ñ€Ð¸Ð¼ÐµÐ½ÐµÐ½Ð½Ð¾Ð¹ Ñ‚ÐµÐ¼Ð¾Ð¹\n    }\n    \n    return themeData;\n  }\n  // Ð’Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÐ¼ Ð´ÐµÑ„Ð¾Ð»Ñ‚Ð½ÑƒÑŽ Ñ‚ÐµÐ¼Ñƒ\n  const defaultTheme = {\n    currentTheme: 'default',\n    themes: {\n      elegant: {\n        id: 'elegant',\n        name: 'Ð­Ð»ÐµÐ³Ð°Ð½Ñ‚Ð½Ð°Ñ ÑÐ¸Ð½ÑÑ',\n        primaryColor: '#2C3E50',\n        primaryLight: '#34495E',\n        primaryDark: '#1C2833',\n        secondaryColor: '#3498DB',\n        secondaryLight: '#5DADE2',\n        secondaryDark: '#2980B9',\n        accentColor: '#E74C3C',\n        backgroundColor: '#ECF0F1',\n        textColor: '#2C3E50',\n        textLight: '#566573'\n      }\n    }\n  };\n  // Ð¡Ð¸Ð½Ñ…Ñ€Ð¾Ð½Ð¸Ð·Ð¸Ñ€ÑƒÐµÐ¼ Ð´ÐµÑ„Ð¾Ð»Ñ‚Ð½ÑƒÑŽ Ñ‚ÐµÐ¼Ñƒ Ñ localStorage\n  localStorage.setItem('restaurant-theme', defaultTheme.currentTheme);\n  localStorage.setItem('restaurant-themes', JSON.stringify(defaultTheme.themes));\n  return defaultTheme;\n};\n\n// Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ð¼ÐµÐ½ÑŽ Ð¸Ð· Ñ„Ð°Ð¹Ð»Ð°\nexport const loadMenu = async () => {\n  console.log('ðŸ“¥ loadMenu: ÐÐ°Ñ‡Ð°Ð»Ð¾ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ð¼ÐµÐ½ÑŽ...');\n  \n  // Ð—Ð°Ð³Ñ€ÑƒÐ¶Ð°ÐµÐ¼ Ð¼ÐµÐ½ÑŽ Ñ ÑÐµÑ€Ð²ÐµÑ€Ð° (Ð½Ðµ Ð¸Ð· localStorage, Ñ‚Ð°Ðº ÐºÐ°Ðº Ð¾Ð½Ð¾ ÑÐ»Ð¸ÑˆÐºÐ¾Ð¼ Ð±Ð¾Ð»ÑŒÑˆÐ¾Ðµ)\n  const result = await loadDataFromFile('menu.json');\n  \n  if (result.success && Array.isArray(result.data)) {\n    console.log('ðŸ“¥ loadMenu: ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½Ð¾ Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ð¹ Ñ ÑÐµÑ€Ð²ÐµÑ€Ð°:', result.data.length);\n    \n    // ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼, Ñ‡Ñ‚Ð¾ Ð²ÑÐµ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ñ‹ Ð¼ÐµÐ½ÑŽ Ð¸Ð¼ÐµÑŽÑ‚ ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ\n    const validMenuItems = result.data.filter(item => {\n      return item && \n             item.id && \n             item.name && \n             item.price !== undefined;\n    });\n    \n    // ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ (Ð´Ð»Ñ Ð¾Ñ‚Ð»Ð°Ð´ÐºÐ¸)\n    const itemsWithImages = validMenuItems.filter(item => item.image && item.image.startsWith('data:image'));\n    console.log(`ðŸ“¥ loadMenu: Ð’Ð°Ð»Ð¸Ð´Ð½Ñ‹Ñ… Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ð¹: ${validMenuItems.length}, Ñ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸ÑÐ¼Ð¸: ${itemsWithImages.length}`);\n    \n    // ÐÐ• ÑÐ¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ð² localStorage - Ð¼ÐµÐ½ÑŽ ÑÐ»Ð¸ÑˆÐºÐ¾Ð¼ Ð±Ð¾Ð»ÑŒÑˆÐ¾Ðµ\n    // ÐžÐ½Ð¾ Ð²ÑÐµÐ³Ð´Ð° Ð·Ð°Ð³Ñ€ÑƒÐ¶Ð°ÐµÑ‚ÑÑ Ñ ÑÐµÑ€Ð²ÐµÑ€Ð°\n    \n    return validMenuItems;\n  }\n  \n  console.warn('ðŸ“¥ loadMenu: ÐœÐµÐ½ÑŽ Ð½Ðµ Ð·Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½Ð¾ Ñ ÑÐµÑ€Ð²ÐµÑ€Ð°, Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ localStorage (fallback)...');\n  \n  // Ð•ÑÐ»Ð¸ Ñ„Ð°Ð¹Ð» Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½, Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ localStorage Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð´Ð»Ñ Ð¾Ð±Ñ€Ð°Ñ‚Ð½Ð¾Ð¹ ÑÐ¾Ð²Ð¼ÐµÑÑ‚Ð¸Ð¼Ð¾ÑÑ‚Ð¸\n  // Ð½Ð¾ ÑÑ‚Ð¾ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð´Ð»Ñ ÑÑ‚Ð°Ñ€Ñ‹Ñ… Ð´Ð°Ð½Ð½Ñ‹Ñ…\n  try {\n    const stored = localStorage.getItem('restaurant-menu');\n    if (stored) {\n      const parsed = JSON.parse(stored);\n      if (Array.isArray(parsed)) {\n        console.log('ðŸ“¥ loadMenu: ÐÐ°Ð¹Ð´ÐµÐ½Ð¾ Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ð¹ Ð² localStorage (fallback):', parsed.length);\n        \n        const validMenuItems = parsed.filter(item => {\n          return item && \n                 item.id && \n                 item.name && \n                 item.price !== undefined;\n        });\n        \n        console.log('ðŸ“¥ loadMenu: Ð’Ð°Ð»Ð¸Ð´Ð½Ñ‹Ñ… Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ð¹ Ð¸Ð· localStorage:', validMenuItems.length);\n        return validMenuItems;\n      }\n    }\n  } catch (error) {\n    // Ð˜Ð³Ð½Ð¾Ñ€Ð¸Ñ€ÑƒÐµÐ¼ Ð¾ÑˆÐ¸Ð±ÐºÐ¸ localStorage\n    console.warn('âš ï¸ loadMenu: ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ð¼ÐµÐ½ÑŽ Ð¸Ð· localStorage:', error);\n  }\n  \n  console.log('ðŸ“¥ loadMenu: ÐœÐµÐ½ÑŽ Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½Ð¾');\n  return [];\n};\n\n// Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ð·Ð°ÑÐ²Ð¾Ðº Ð¸Ð· Ñ„Ð°Ð¹Ð»Ð°\nexport const loadReservations = async () => {\n  const result = await loadDataFromFile('reservations.json');\n  if (result.success && Array.isArray(result.data)) {\n    return result.data;\n  }\n  return [];\n};\n\n// Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¹ Ð¸Ð· Ñ„Ð°Ð¹Ð»Ð°\nexport const loadCategories = async () => {\n  const result = await loadDataFromFile('categories.json');\n  if (result.success && Array.isArray(result.data)) {\n    return result.data;\n  }\n  return [\n    { id: 1, key: 'cold', name: 'Ð¥Ð¾Ð»Ð¾Ð´Ð½Ñ‹Ðµ Ð·Ð°ÐºÑƒÑÐºÐ¸', order: 1 },\n    { id: 2, key: 'salads', name: 'Ð¡Ð°Ð»Ð°Ñ‚Ñ‹', order: 2 },\n    { id: 3, key: 'hot', name: 'Ð“Ð¾Ñ€ÑÑ‡Ð¸Ðµ Ð±Ð»ÑŽÐ´Ð°', order: 3 },\n    { id: 4, key: 'drinks', name: 'ÐÐ°Ð¿Ð¸Ñ‚ÐºÐ¸', order: 4 }\n  ];\n};\n\n// Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ Ñ‚ÐµÐ¼Ñ‹ Ð² Ñ„Ð°Ð¹Ð» Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°\nexport const saveTheme = async (themeData) => {\n  // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ð² localStorage Ð´Ð»Ñ Ð±Ñ‹ÑÑ‚Ñ€Ð¾Ð³Ð¾ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð°\n  localStorage.setItem('restaurant-theme', themeData.currentTheme);\n  localStorage.setItem('restaurant-themes', JSON.stringify(themeData.themes));\n  \n  // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ð½Ð°Ð¿Ñ€ÑÐ¼ÑƒÑŽ Ð² Ñ„Ð°Ð¹Ð» Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð° Ñ‡ÐµÑ€ÐµÐ· API\n  const result = await saveToProjectFile(themeData, 'theme.json');\n  return result;\n};\n\n// Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ Ð¼ÐµÐ½ÑŽ Ð² Ñ„Ð°Ð¹Ð» Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°\nexport const saveMenu = async (menuItems) => {\n  console.log('ðŸ’¾ saveMenu: ÐÐ°Ñ‡Ð°Ð»Ð¾ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ Ð¼ÐµÐ½ÑŽ, Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ð¹:', menuItems?.length || 0);\n  \n  if (!Array.isArray(menuItems)) {\n    console.error('âŒ saveMenu: menuItems Ð½Ðµ ÑÐ²Ð»ÑÐµÑ‚ÑÑ Ð¼Ð°ÑÑÐ¸Ð²Ð¾Ð¼:', typeof menuItems);\n    return { success: false, message: 'menuItems Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð±Ñ‹Ñ‚ÑŒ Ð¼Ð°ÑÑÐ¸Ð²Ð¾Ð¼' };\n  }\n  \n  // ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼, Ñ‡Ñ‚Ð¾ Ð²ÑÐµ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ñ‹ Ð¼ÐµÐ½ÑŽ Ð¸Ð¼ÐµÑŽÑ‚ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ (Ð´Ð»Ñ Ð¾Ñ‚Ð»Ð°Ð´ÐºÐ¸)\n  const itemsWithImages = menuItems.filter(item => item.image && item.image.startsWith('data:image'));\n  console.log(`ðŸ’¾ saveMenu: ÐŸÐ¾Ð·Ð¸Ñ†Ð¸Ð¹ Ñ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸ÑÐ¼Ð¸: ${itemsWithImages.length} Ð¸Ð· ${menuItems.length}`);\n  \n  // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ð² localStorage Ð´Ð»Ñ Ð±Ñ‹ÑÑ‚Ñ€Ð¾Ð³Ð¾ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð°\n  localStorage.setItem('restaurant-menu', JSON.stringify(menuItems));\n  console.log('ðŸ’¾ saveMenu: ÐœÐµÐ½ÑŽ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¾ Ð² localStorage');\n  \n  // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ð½Ð°Ð¿Ñ€ÑÐ¼ÑƒÑŽ Ð² Ñ„Ð°Ð¹Ð» Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð° Ñ‡ÐµÑ€ÐµÐ· API\n  console.log('ðŸ’¾ saveMenu: ÐžÑ‚Ð¿Ñ€Ð°Ð²ÐºÐ° Ð½Ð° ÑÐµÑ€Ð²ÐµÑ€...');\n  const result = await saveToProjectFile(menuItems, 'menu.json');\n  \n  if (result.success) {\n    console.log('âœ… saveMenu: ÐœÐµÐ½ÑŽ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¾ Ð² Ñ„Ð°Ð¹Ð»:', result.path);\n    console.log(`âœ… saveMenu: Ð’ÑÐµÐ³Ð¾ Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ð¹ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¾: ${menuItems.length}, Ñ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸ÑÐ¼Ð¸: ${itemsWithImages.length}`);\n  } else {\n    console.error('âŒ saveMenu: ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ:', result.message);\n  }\n  \n  return result;\n};\n\n// Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ Ð·Ð°ÑÐ²Ð¾Ðº Ð² Ñ„Ð°Ð¹Ð» Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð° - Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð´Ð»Ñ Ð°Ð´Ð¼Ð¸Ð½-Ð¿Ð°Ð½ÐµÐ»Ð¸\nexport const saveReservations = async (reservations) => {\n  // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ð² localStorage Ð´Ð»Ñ Ð±Ñ‹ÑÑ‚Ñ€Ð¾Ð³Ð¾ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð°\n  localStorage.setItem('restaurant-reservations', JSON.stringify(reservations));\n  \n  // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ð½Ð°Ð¿Ñ€ÑÐ¼ÑƒÑŽ Ð² Ñ„Ð°Ð¹Ð» Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð° Ñ‡ÐµÑ€ÐµÐ· API\n  const result = await saveToProjectFile(reservations, 'reservations.json');\n  return result;\n};\n\n// ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ Ð·Ð°ÑÐ²Ð¾Ðº Ð² Ñ„Ð°Ð¹Ð» Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°\nexport const autoSaveReservations = async (reservations) => {\n  // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ð² localStorage Ð´Ð»Ñ Ð±Ñ‹ÑÑ‚Ñ€Ð¾Ð³Ð¾ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð°\n  localStorage.setItem('restaurant-reservations', JSON.stringify(reservations));\n  \n  // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ð½Ð°Ð¿Ñ€ÑÐ¼ÑƒÑŽ Ð² Ñ„Ð°Ð¹Ð» Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð° Ñ‡ÐµÑ€ÐµÐ· API\n  const result = await saveToProjectFile(reservations, 'reservations.json');\n  return result;\n};\n\n// Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¹ Ð² Ñ„Ð°Ð¹Ð» Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°\nexport const saveCategories = async (categories) => {\n  // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ð² localStorage Ð´Ð»Ñ Ð±Ñ‹ÑÑ‚Ñ€Ð¾Ð³Ð¾ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð°\n  localStorage.setItem('restaurant-categories', JSON.stringify(categories));\n  \n  // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ð½Ð°Ð¿Ñ€ÑÐ¼ÑƒÑŽ Ð² Ñ„Ð°Ð¹Ð» Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð° Ñ‡ÐµÑ€ÐµÐ· API\n  const result = await saveToProjectFile(categories, 'categories.json');\n  return result;\n};\n\n// ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ (Ð°Ð»Ð¸Ð°ÑÑ‹ Ð´Ð»Ñ Ð¾Ð±Ñ€Ð°Ñ‚Ð½Ð¾Ð¹ ÑÐ¾Ð²Ð¼ÐµÑÑ‚Ð¸Ð¼Ð¾ÑÑ‚Ð¸)\nexport const autoSaveMenu = saveMenu;\nexport const saveMenuToFile = saveMenu;\nexport const saveReservationsToFile = saveReservations;\n\n// Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ð¹ Ð¸Ð· Ñ„Ð°Ð¹Ð»Ð°\nexport const loadPhotos = async () => {\n  console.log('ðŸ“¸ loadPhotos: ÐÐ°Ñ‡Ð°Ð»Ð¾ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ð¹...');\n  \n  // Ð—Ð°Ð³Ñ€ÑƒÐ¶Ð°ÐµÐ¼ Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ð¸ Ñ ÑÐµÑ€Ð²ÐµÑ€Ð° (Ð½Ðµ Ð¸Ð· localStorage, Ñ‚Ð°Ðº ÐºÐ°Ðº Ð¾Ð½Ð¸ ÑÐ»Ð¸ÑˆÐºÐ¾Ð¼ Ð±Ð¾Ð»ÑŒÑˆÐ¸Ðµ)\n  const result = await loadDataFromFile('photos.json');\n  \n  if (result.success && Array.isArray(result.data)) {\n    console.log('ðŸ“¸ loadPhotos: ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½Ð¾ Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ð¹ Ñ ÑÐµÑ€Ð²ÐµÑ€Ð°:', result.data.length);\n    \n    // Ð¤Ð¸Ð»ÑŒÑ‚Ñ€ÑƒÐµÐ¼ Ð¿ÑƒÑÑ‚Ñ‹Ðµ Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ð¸ Ð¸Ð»Ð¸ Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ð¸ Ð±ÐµÐ· Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ\n    const validPhotos = result.data.filter(photo => {\n      const isValid = photo && \n                     photo.id && // ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ Ð½Ð°Ð»Ð¸Ñ‡Ð¸Ðµ ID\n                     photo.image && \n                     photo.image.trim() && \n                     photo.image.startsWith('data:image');\n      \n      if (!isValid) {\n        console.warn('ðŸ“¸ loadPhotos: ÐŸÑ€Ð¾Ð¿ÑƒÑ‰ÐµÐ½Ð° Ð½ÐµÐ²Ð°Ð»Ð¸Ð´Ð½Ð°Ñ Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ñ:', {\n          hasId: !!photo?.id,\n          hasImage: !!photo?.image,\n          imageType: photo?.image?.substring(0, 20)\n        });\n      }\n      \n      return isValid;\n    });\n    \n    console.log('ðŸ“¸ loadPhotos: Ð’Ð°Ð»Ð¸Ð´Ð½Ñ‹Ñ… Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ð¹:', validPhotos.length);\n    \n    // ÐÐ• ÑÐ¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ð² localStorage - Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ð¸ ÑÐ»Ð¸ÑˆÐºÐ¾Ð¼ Ð±Ð¾Ð»ÑŒÑˆÐ¸Ðµ\n    // ÐžÐ½Ð¸ Ð²ÑÐµÐ³Ð´Ð° Ð·Ð°Ð³Ñ€ÑƒÐ¶Ð°ÑŽÑ‚ÑÑ Ñ ÑÐµÑ€Ð²ÐµÑ€Ð°\n    \n    return validPhotos;\n  }\n  \n  console.warn('ðŸ“¸ loadPhotos: Ð¤Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ð¸ Ð½Ðµ Ð·Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½Ñ‹ Ñ ÑÐµÑ€Ð²ÐµÑ€Ð°, Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ localStorage (fallback)...');\n  \n  // Ð•ÑÐ»Ð¸ Ñ„Ð°Ð¹Ð» Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½, Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ localStorage Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð´Ð»Ñ Ð¾Ð±Ñ€Ð°Ñ‚Ð½Ð¾Ð¹ ÑÐ¾Ð²Ð¼ÐµÑÑ‚Ð¸Ð¼Ð¾ÑÑ‚Ð¸\n  // Ð½Ð¾ ÑÑ‚Ð¾ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð´Ð»Ñ ÑÑ‚Ð°Ñ€Ñ‹Ñ… Ð´Ð°Ð½Ð½Ñ‹Ñ…\n  try {\n    const stored = localStorage.getItem('restaurant-photos');\n    if (stored) {\n      const parsed = JSON.parse(stored);\n      if (Array.isArray(parsed)) {\n        console.log('ðŸ“¸ loadPhotos: ÐÐ°Ð¹Ð´ÐµÐ½Ð¾ Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ð¹ Ð² localStorage (fallback):', parsed.length);\n        \n        // Ð¤Ð¸Ð»ÑŒÑ‚Ñ€ÑƒÐµÐ¼ Ð²Ð°Ð»Ð¸Ð´Ð½Ñ‹Ðµ Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ð¸\n        const validPhotos = parsed.filter(photo => {\n          return photo && \n                 photo.id &&\n                 photo.image && \n                 photo.image.trim() && \n                 photo.image.startsWith('data:image');\n        });\n        \n        console.log('ðŸ“¸ loadPhotos: Ð’Ð°Ð»Ð¸Ð´Ð½Ñ‹Ñ… Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ð¹ Ð¸Ð· localStorage:', validPhotos.length);\n        return validPhotos;\n      }\n    }\n  } catch (error) {\n    // Ð˜Ð³Ð½Ð¾Ñ€Ð¸Ñ€ÑƒÐµÐ¼ Ð¾ÑˆÐ¸Ð±ÐºÐ¸ localStorage\n    console.warn('âš ï¸ loadPhotos: ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ð¹ Ð¸Ð· localStorage:', error);\n  }\n  \n  console.log('ðŸ“¸ loadPhotos: Ð¤Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ð¸ Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½Ñ‹');\n  return [];\n};\n\n// Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ð¹ Ð² Ñ„Ð°Ð¹Ð» Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°\nexport const savePhotos = async (photos) => {\n  // ÐÐ• ÑÐ¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ð² localStorage - Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ð¸ Ð² base64 ÑÐ»Ð¸ÑˆÐºÐ¾Ð¼ Ð±Ð¾Ð»ÑŒÑˆÐ¸Ðµ\n  // Ð¸ Ð¼Ð¾Ð³ÑƒÑ‚ Ð¿Ñ€ÐµÐ²Ñ‹ÑÐ¸Ñ‚ÑŒ Ð»Ð¸Ð¼Ð¸Ñ‚ localStorage (Ð¾Ð±Ñ‹Ñ‡Ð½Ð¾ 5-10MB)\n  // Ð’Ð¼ÐµÑÑ‚Ð¾ ÑÑ‚Ð¾Ð³Ð¾ ÑÐ¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð½Ð° ÑÐµÑ€Ð²ÐµÑ€\n  \n  // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ð½Ð°Ð¿Ñ€ÑÐ¼ÑƒÑŽ Ð² Ñ„Ð°Ð¹Ð» Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð° Ñ‡ÐµÑ€ÐµÐ· API\n  const result = await saveToProjectFile(photos, 'photos.json');\n  \n  // Ð•ÑÐ»Ð¸ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ Ð½Ð° ÑÐµÑ€Ð²ÐµÑ€ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾, Ð¿Ñ‹Ñ‚Ð°ÐµÐ¼ÑÑ ÑÐ¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð¼ÐµÑ‚Ð°Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð² localStorage\n  // (Ð±ÐµÐ· ÑÐ°Ð¼Ð¸Ñ… Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ð¹) Ð´Ð»Ñ Ð±Ñ‹ÑÑ‚Ñ€Ð¾Ð³Ð¾ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð°\n  if (result.success) {\n    try {\n      // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð¼ÐµÑ‚Ð°Ð´Ð°Ð½Ð½Ñ‹Ðµ (Ð±ÐµÐ· base64 Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ð¹) Ð´Ð»Ñ ÐºÐµÑˆÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ\n      const photosMetadata = photos.map(photo => ({\n        id: photo.id,\n        caption: photo.caption,\n        // ÐÐ• ÑÐ¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ image - ÑÑ‚Ð¾ ÑÐ»Ð¸ÑˆÐºÐ¾Ð¼ Ð±Ð¾Ð»ÑŒÑˆÐ¾Ð¹ Ð¾Ð±ÑŠÐµÐ¼ Ð´Ð°Ð½Ð½Ñ‹Ñ…\n      }));\n      localStorage.setItem('restaurant-photos-metadata', JSON.stringify(photosMetadata));\n    } catch (storageError) {\n      // Ð•ÑÐ»Ð¸ localStorage Ð¿ÐµÑ€ÐµÐ¿Ð¾Ð»Ð½ÐµÐ½, Ð¿Ñ€Ð¾ÑÑ‚Ð¾ Ð¸Ð³Ð½Ð¾Ñ€Ð¸Ñ€ÑƒÐµÐ¼ Ð¾ÑˆÐ¸Ð±ÐºÑƒ\n      // Ð“Ð»Ð°Ð²Ð½Ð¾Ðµ - Ð´Ð°Ð½Ð½Ñ‹Ðµ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ñ‹ Ð½Ð° ÑÐµÑ€Ð²ÐµÑ€Ðµ\n      console.warn('ÐÐµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ ÑÐ¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ Ð¼ÐµÑ‚Ð°Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð² localStorage:', storageError);\n    }\n  }\n  \n  return result;\n};\n\n// ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ð¹ (ÑÐ¾Ñ…Ñ€Ð°Ð½ÑÐµÑ‚ Ð½Ð° ÑÐµÑ€Ð²ÐµÑ€)\nexport const autoSavePhotos = async (photos) => {\n  // Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ñ‚Ñƒ Ð¶Ðµ Ð»Ð¾Ð³Ð¸ÐºÑƒ, Ñ‡Ñ‚Ð¾ Ð¸ savePhotos\n  return await savePhotos(photos);\n};\n\nexport const savePhotosToFile = async (photos) => {\n  // ÐÐ»Ð¸Ð°Ñ Ð´Ð»Ñ Ð¾Ð±Ñ€Ð°Ñ‚Ð½Ð¾Ð¹ ÑÐ¾Ð²Ð¼ÐµÑÑ‚Ð¸Ð¼Ð¾ÑÑ‚Ð¸\n  return await savePhotos(photos);\n};\n\n// Ð˜Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ Ñ„Ð°Ð¹Ð»Ð¾Ð² (Ð¾ÑÑ‚Ð°Ð²Ð»ÑÐµÐ¼ Ð´Ð»Ñ Ð¾Ð±Ñ€Ð°Ñ‚Ð½Ð¾Ð¹ ÑÐ¾Ð²Ð¼ÐµÑÑ‚Ð¸Ð¼Ð¾ÑÑ‚Ð¸, Ð½Ð¾ Ð¾Ð½Ð¸ Ð½Ðµ Ð½ÑƒÐ¶Ð½Ñ‹)\nexport const initializeReservationsFile = async () => {\n  return null;\n};\n\nexport const initializeMenuFile = async () => {\n  return null;\n};\n\nexport const initializePhotosFile = async () => {\n  return null;\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}